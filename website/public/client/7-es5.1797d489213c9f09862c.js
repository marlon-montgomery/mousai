!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7,12],{"/Sbb":function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(t)[0];if(n){e&&(n="".concat(e,"-").concat(n));var i=document.getElementById(n);i&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}n.d(e,"a",function(){return i})},"/uxT":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("fXoL"),a=n("LRXf"),r=function(){var t=function(){function t(e){l(this,t),this.http=e}return d(t,[{key:"getRequest",value:function(t){return this.http.get("backstage-request/".concat(t))}},{key:"submitRequest",value:function(t){return this.http.post("backstage-request",t)}},{key:"approveRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.post("backstage-request/".concat(t,"/approve"),e)}},{key:"denyRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.post("backstage-request/".concat(t,"/deny"),e)}},{key:"deleteRequests",value:function(t){return this.http.delete("backstage-request/".concat(t.join(",")))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Zb(a.a))},t.\u0275prov=i.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"6SKC":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("4Ait"),a=n("fXoL"),r=function(){var t=function(){function t(){l(this,t)}return d(t,[{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return isNaN(parseFloat(String(t)))||!isFinite(t)?"-":Object(i.a)(t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Ob({name:"formattedFileSize",type:t,pure:!0}),t}()},"7EHt":function(t,e,n){"use strict";n.d(e,"a",function(){return at}),n.d(e,"b",function(){return ot}),n.d(e,"c",function(){return tt}),n.d(e,"d",function(){return et}),n.d(e,"e",function(){return nt}),n.d(e,"f",function(){return it}),n.d(e,"g",function(){return W});var r,c,u,b=n("fXoL"),p=n("8LU1"),m=n("XNiG"),f=n("quSY"),g=n("0EQZ"),h=0,v=new b.r("CdkAccordion"),y=((u=function(){function t(){l(this,t),this._stateChanges=new m.a,this._openCloseAllActions=new m.a,this.id="cdk-accordion-"+h++,this._multi=!1}return d(t,[{key:"multi",get:function(){return this._multi},set:function(t){this._multi=Object(p.c)(t)}},{key:"openAll",value:function(){this._openCloseAll(!0)}},{key:"closeAll",value:function(){this._openCloseAll(!1)}},{key:"ngOnChanges",value:function(t){this._stateChanges.next(t)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}},{key:"_openCloseAll",value:function(t){this.multi&&this._openCloseAllActions.next(t)}}]),t}()).\u0275fac=function(t){return new(t||u)},u.\u0275dir=b.Kb({type:u,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[b.Cb([{provide:v,useExisting:u}]),b.Bb]}),u),k=0,x=((c=function(){function t(e,n,i){var a=this;l(this,t),this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=i,this._openCloseAllSubscription=f.a.EMPTY,this.closed=new b.n,this.opened=new b.n,this.destroyed=new b.n,this.expandedChange=new b.n,this.id="cdk-accordion-child-"+k++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=i.listen(function(t,e){a.accordion&&!a.accordion.multi&&a.accordion.id===e&&a.id!==t&&(a.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}return d(t,[{key:"expanded",get:function(){return this._expanded},set:function(t){t=Object(p.c)(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(p.c)(t)}},{key:"ngOnDestroy",value:function(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}},{key:"toggle",value:function(){this.disabled||(this.expanded=!this.expanded)}},{key:"close",value:function(){this.disabled||(this.expanded=!1)}},{key:"open",value:function(){this.disabled||(this.expanded=!0)}},{key:"_subscribeToOpenCloseAllActions",value:function(){var t=this;return this.accordion._openCloseAllActions.subscribe(function(e){t.disabled||(t.expanded=e)})}}]),t}()).\u0275fac=function(t){return new(t||c)(b.Pb(v,12),b.Pb(b.h),b.Pb(g.c))},c.\u0275dir=b.Kb({type:c,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[b.Cb([{provide:v,useValue:void 0}])]}),c),C=((r=function t(){l(this,t)}).\u0275fac=function(t){return new(t||r)},r.\u0275mod=b.Nb({type:r}),r.\u0275inj=b.Mb({}),r),P=n("+rOU"),O=n("ofXK"),_=n("u47x"),U=n("/uUt"),V=n("JX91"),I=n("pLZG"),w=n("IzEk"),D=n("FtGj"),M=n("R1ws"),A=n("EY2u"),F=n("VRyK"),J=n("R0Ic"),$=["body"];function S(t,e){}var T=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Q=["mat-expansion-panel-header","*","mat-action-row"];function H(t,e){if(1&t&&b.Qb(0,"span",2),2&t){var n=b.gc();b.nc("@indicatorRotate",n._getExpandedState())}}var j,E,q,R,z,N,L,B=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],K=["mat-panel-title","mat-panel-description","*"],G=new b.r("MAT_ACCORDION"),W={indicatorRotate:Object(J.m)("indicatorRotate",[Object(J.j)("collapsed, void",Object(J.k)({transform:"rotate(0deg)"})),Object(J.j)("expanded",Object(J.k)({transform:"rotate(180deg)"})),Object(J.l)("expanded <=> collapsed, void => collapsed",Object(J.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:Object(J.m)("bodyExpansion",[Object(J.j)("collapsed, void",Object(J.k)({height:"0px",visibility:"hidden"})),Object(J.j)("expanded",Object(J.k)({height:"*",visibility:"visible"})),Object(J.l)("expanded <=> collapsed, void => collapsed",Object(J.e)("225ms cubic-bezier(0.4,0.0,0.2,1)"))])},X=((j=function t(e){l(this,t),this._template=e}).\u0275fac=function(t){return new(t||j)(b.Pb(b.N))},j.\u0275dir=b.Kb({type:j,selectors:[["ng-template","matExpansionPanelContent",""]]}),j),Y=0,Z=new b.r("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),tt=((N=function(t){a(n,t);var e=o(n);function n(t,i,a,r,o,c,s){var u;return l(this,n),(u=e.call(this,t,i,a))._viewContainerRef=r,u._animationMode=c,u._hideToggle=!1,u.afterExpand=new b.n,u.afterCollapse=new b.n,u._inputChanges=new m.a,u._headerId="mat-expansion-panel-header-"+Y++,u._bodyAnimationDone=new m.a,u.accordion=t,u._document=o,u._bodyAnimationDone.pipe(Object(U.a)(function(t,e){return t.fromState===e.fromState&&t.toState===e.toState})).subscribe(function(t){"void"!==t.fromState&&("expanded"===t.toState?u.afterExpand.emit():"collapsed"===t.toState&&u.afterCollapse.emit())}),s&&(u.hideToggle=s.hideToggle),u}return d(n,[{key:"hideToggle",get:function(){return this._hideToggle||this.accordion&&this.accordion.hideToggle},set:function(t){this._hideToggle=Object(p.c)(t)}},{key:"togglePosition",get:function(){return this._togglePosition||this.accordion&&this.accordion.togglePosition},set:function(t){this._togglePosition=t}},{key:"_hasSpacing",value:function(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}},{key:"_getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"close",value:function(){this.expanded=!1}},{key:"open",value:function(){this.expanded=!0}},{key:"ngAfterContentInit",value:function(){var t=this;this._lazyContent&&this.opened.pipe(Object(V.a)(null),Object(I.a)(function(){return t.expanded&&!t._portal}),Object(w.a)(1)).subscribe(function(){t._portal=new P.i(t._lazyContent._template,t._viewContainerRef)})}},{key:"ngOnChanges",value:function(t){this._inputChanges.next(t)}},{key:"ngOnDestroy",value:function(){i(s(n.prototype),"ngOnDestroy",this).call(this),this._bodyAnimationDone.complete(),this._inputChanges.complete()}},{key:"_containsFocus",value:function(){if(this._body){var t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}]),n}(x)).\u0275fac=function(t){return new(t||N)(b.Pb(G,12),b.Pb(b.h),b.Pb(g.c),b.Pb(b.R),b.Pb(O.e),b.Pb(M.a,8),b.Pb(Z,8))},N.\u0275cmp=b.Jb({type:N,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,n){var i;1&t&&b.Ib(n,X,1),2&t&&b.uc(i=b.dc())&&(e._lazyContent=i.first)},viewQuery:function(t,e){var n;1&t&&b.Pc($,1),2&t&&b.uc(n=b.dc())&&(e._body=n.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&b.Hb("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[b.Cb([{provide:G,useValue:void 0}]),b.Ab,b.Bb],ngContentSelectors:Q,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(b.mc(T),b.lc(0),b.Vb(1,"div",0,1),b.cc("@bodyExpansion.done",function(t){return e._bodyAnimationDone.next(t)}),b.Vb(3,"div",2),b.lc(4,1),b.Hc(5,S,0,0,"ng-template",3),b.Ub(),b.lc(6,2),b.Ub()),2&t&&(b.Db(1),b.nc("@bodyExpansion",e._getExpandedState())("id",e.id),b.Eb("aria-labelledby",e._headerId),b.Db(4),b.nc("cdkPortalOutlet",e._portal))},directives:[P.c],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[W.bodyExpansion]},changeDetection:0}),N),et=((z=function t(){l(this,t)}).\u0275fac=function(t){return new(t||z)},z.\u0275dir=b.Kb({type:z,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),z),nt=((R=function(){function t(e,n,i,a,r,o){var c=this;l(this,t),this.panel=e,this._element=n,this._focusMonitor=i,this._changeDetectorRef=a,this._animationMode=o,this._parentChangeSubscription=f.a.EMPTY;var s=e.accordion?e.accordion._stateChanges.pipe(Object(I.a)(function(t){return!(!t.hideToggle&&!t.togglePosition)})):A.a;this._parentChangeSubscription=Object(F.a)(e.opened,e.closed,s,e._inputChanges.pipe(Object(I.a)(function(t){return!!(t.hideToggle||t.disabled||t.togglePosition)}))).subscribe(function(){return c._changeDetectorRef.markForCheck()}),e.closed.pipe(Object(I.a)(function(){return e._containsFocus()})).subscribe(function(){return i.focusVia(n,"program")}),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}return d(t,[{key:"disabled",get:function(){return this.panel.disabled}},{key:"_toggle",value:function(){this.disabled||this.panel.toggle()}},{key:"_isExpanded",value:function(){return this.panel.expanded}},{key:"_getExpandedState",value:function(){return this.panel._getExpandedState()}},{key:"_getPanelId",value:function(){return this.panel.id}},{key:"_getTogglePosition",value:function(){return this.panel.togglePosition}},{key:"_showToggle",value:function(){return!this.panel.hideToggle&&!this.panel.disabled}},{key:"_getHeaderHeight",value:function(){var t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}},{key:"_keydown",value:function(t){switch(t.keyCode){case D.n:case D.f:Object(D.s)(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",e=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._element,t,e)}},{key:"ngAfterViewInit",value:function(){var t=this;this._focusMonitor.monitor(this._element).subscribe(function(e){e&&t.panel.accordion&&t.panel.accordion._handleHeaderFocus(t)})}},{key:"ngOnDestroy",value:function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}]),t}()).\u0275fac=function(t){return new(t||R)(b.Pb(tt,1),b.Pb(b.l),b.Pb(_.h),b.Pb(b.h),b.Pb(Z,8),b.Pb(M.a,8))},R.\u0275cmp=b.Jb({type:R,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,e){1&t&&b.cc("click",function(){return e._toggle()})("keydown",function(t){return e._keydown(t)}),2&t&&(b.Eb("id",e.panel._headerId)("tabindex",e.disabled?-1:0)("aria-controls",e._getPanelId())("aria-expanded",e._isExpanded())("aria-disabled",e.panel.disabled),b.Ec("height",e._getHeaderHeight()),b.Hb("mat-expanded",e._isExpanded())("mat-expansion-toggle-indicator-after","after"===e._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===e._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:K,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,e){1&t&&(b.mc(B),b.Vb(0,"span",0),b.lc(1),b.lc(2,1),b.lc(3,2),b.Ub(),b.Hc(4,H,1,1,"span",1)),2&t&&(b.Db(4),b.nc("ngIf",e._showToggle()))},directives:[O.o],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[W.indicatorRotate]},changeDetection:0}),R),it=((q=function t(){l(this,t)}).\u0275fac=function(t){return new(t||q)},q.\u0275dir=b.Kb({type:q,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),q),at=((E=function(t){a(n,t);var e=o(n);function n(){var t;return l(this,n),(t=e.apply(this,arguments))._ownHeaders=new b.E,t._hideToggle=!1,t.displayMode="default",t.togglePosition="after",t}return d(n,[{key:"hideToggle",get:function(){return this._hideToggle},set:function(t){this._hideToggle=Object(p.c)(t)}},{key:"ngAfterContentInit",value:function(){var t=this;this._headers.changes.pipe(Object(V.a)(this._headers)).subscribe(function(e){t._ownHeaders.reset(e.filter(function(e){return e.panel.accordion===t})),t._ownHeaders.notifyOnChanges()}),this._keyManager=new _.g(this._ownHeaders).withWrap().withHomeAndEnd()}},{key:"_handleHeaderKeydown",value:function(t){this._keyManager.onKeydown(t)}},{key:"_handleHeaderFocus",value:function(t){this._keyManager.updateActiveItem(t)}}]),n}(y)).\u0275fac=function(t){return rt(t||E)},E.\u0275dir=b.Kb({type:E,selectors:[["mat-accordion"]],contentQueries:function(t,e,n){var i;1&t&&b.Ib(n,nt,1),2&t&&b.uc(i=b.dc())&&(e._headers=i)},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,e){2&t&&b.Hb("mat-accordion-multi",e.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[b.Cb([{provide:G,useExisting:E}]),b.Ab]}),E),rt=b.Xb(at),ot=((L=function t(){l(this,t)}).\u0275fac=function(t){return new(t||L)},L.\u0275mod=b.Nb({type:L}),L.\u0275inj=b.Mb({imports:[[O.c,C,P.h]]}),L)},"8/ZB":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){return t.becomeArtist="become-artist",t.verifyArtist="verify-artist",t.claimArtist="claim-artist",t}({})},EAOp:function(t,e,n){"use strict";n.d(e,"a",function(){return j});var i=n("fXoL"),a=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:50},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:50}],r=n("nPOm"),o=n("0IaG"),c=n("ZfYz"),s=n("NFeN"),u=n("Rd8u"),b=n("3Pt+"),p=n("ofXK"),m=n("bTqV");function f(t,e){1&t&&i.Rb(0)}var g,h=((g=function(){function t(e,n){l(this,t),this.data=e,this.overlayPanelRef=n}return d(t,[{key:"close",value:function(){this.overlayPanelRef.close()}}]),t}()).\u0275fac=function(t){return new(t||g)(i.Pb(r.a),i.Pb(c.a))},g.\u0275cmp=i.Jb({type:g,selectors:[["datatable-filters-panel"]],hostVars:1,hostBindings:function(t,e){2&t&&i.Gc("@dialogContainer","enter")},decls:9,vars:1,consts:[["svgIcon","filter-list"],["trans",""],[1,"body",3,"ngSubmit"],[4,"ngTemplateOutlet"],["type","button","mat-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(i.Vb(0,"header"),i.Qb(1,"mat-icon",0),i.Vb(2,"span",1),i.Jc(3,"Filters"),i.Ub(),i.Ub(),i.Vb(4,"form",2),i.cc("ngSubmit",function(){return e.close()}),i.Hc(5,f,1,0,"ng-container",3),i.Ub(),i.Vb(6,"footer"),i.Vb(7,"button",4),i.cc("click",function(){return e.close()}),i.Jc(8,"Close"),i.Ub(),i.Ub()),2&t&&(i.Db(5),i.nc("ngTemplateOutlet",e.data.filters))},directives:[s.a,u.a,b.D,b.t,b.u,p.t,m.b],styles:["[_nghost-%COMP%]{display:block;min-width:250px;margin:auto;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}.body[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[o.i.dialogContainer]},changeDetection:0}),g),v=n("lJxs"),y=n("F96W"),k=n("2hX1"),x=n("dz5c"),C=n("bv9b"),P=n("bmro"),O=n("A5z7"),_=n("zW5C"),U=n("bHJH"),V=["tableFilters"],I=["filterButton"];function w(t,e){1&t&&i.Qb(0,"mat-progress-bar",7)}function D(t,e){1&t&&(i.Vb(0,"div",8),i.lc(1),i.Ub())}var M=function(t,e){return{count:t,resource:e}};function A(t,e){if(1&t&&(i.Vb(0,"div",9),i.Jc(1),i.hc(2,"trans"),i.Ub()),2&t){var n=i.gc();i.Db(1),i.Lc(" ",i.jc(2,1,":count :resource selected",i.sc(4,M,n.numberOfRowsSelected,n.pluralResourceName))," ")}}function F(t,e){if(1&t){var n=i.Wb();i.Vb(0,"mat-chip",18),i.cc("removed",function(){i.yc(n);var t=e.$implicit;return i.gc(3).datatable.removeFilter(t.key)}),i.Jc(1),i.hc(2,"trans"),i.hc(3,"titleCase"),i.Qb(4,"mat-icon",19),i.Ub()}if(2&t){var a=e.$implicit,r=i.gc(3);i.nc("removable",!0)("selectable",!1),i.Db(1),i.Mc(" ",i.ic(2,4,i.ic(3,6,a.key)),": ",r.isModel(a.value)?a.value.name||a.value.display_name:a.value," ")}}function J(t,e){if(1&t){var n=i.Wb();i.Tb(0),i.Vb(1,"mat-chip-list",13),i.Hc(2,F,5,8,"mat-chip",14),i.hc(3,"keyvalue"),i.hc(4,"async"),i.Ub(),i.Vb(5,"button",15,16),i.cc("click",function(){return i.yc(n),i.gc(2).openFiltersPanel()}),i.Qb(7,"mat-icon",17),i.Ub(),i.Sb()}if(2&t){var a=i.gc(2);i.Db(2),i.nc("ngForOf",i.ic(3,3,i.ic(4,5,a.filters$))),i.Db(3),i.Hb("active",a.filterPanelRef)}}function $(t,e){if(1&t&&(i.Vb(0,"div",10),i.Hc(1,J,8,7,"ng-container",11),i.Qb(2,"datatable-header-search-input",12),i.Ub()),2&t){var n=i.gc();i.Db(1),i.nc("ngIf",n.filterPanelTemplate),i.Db(1),i.pc("placeholder","Search ",n.pluralResourceName,"")}}function S(t,e){1&t&&(i.Vb(0,"div",20),i.lc(1,1),i.Ub())}var T,Q=[[["","leftContent",""]],[["","rightContent",""]]],H=["[leftContent]","[rightContent]"],j=((T=function(){function t(e,n,i){l(this,t),this.datatable=e,this.cd=n,this.overlayPanel=i,this.showSelectedActions=!0,this.subscriptions=[],this.filters$=this.datatable.filters$.pipe(Object(v.a)(function(t){var e=Object(y.a)(t);return delete e.query,e}))}return d(t,[{key:"ngOnInit",value:function(){var t=this,e=this.datatable.filters$.subscribe(function(){t.filterPanelRef&&t.filterPanelRef.close()}),n=this.datatable.selectedRows$.subscribe(function(e){t.numberOfRowsSelected=e.length,t.cd.markForCheck()});this.subscriptions=[e,n]}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){return t.unsubscribe()})}},{key:"openFiltersPanel",value:function(){var t=this;if(this.filterPanelRef)this.filterPanelRef.close();else{var e=a.slice();e[0].offsetY=40,e[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(h,{origin:this.filterButton,position:e,mobilePosition:"center",data:{filters:this.filterPanelTemplate},maxWidth:"90%"}),this.filterButton.nativeElement.classList.add("active"),this.filterPanelRef.afterClosed().subscribe(function(){t.filterPanelRef=null,t.filterButton.nativeElement.classList.remove("active")})}}},{key:"isModel",value:function(t){return"object"==typeof t&&t.id}}]),t}()).\u0275fac=function(t){return new(t||T)(i.Pb(k.a),i.Pb(i.h),i.Pb(x.a))},T.\u0275cmp=i.Jb({type:T,selectors:[["datatable-header"]],contentQueries:function(t,e,n){var a;1&t&&i.Ib(n,V,1),2&t&&i.uc(a=i.dc())&&(e.filterPanelTemplate=a.first)},viewQuery:function(t,e){var n;1&t&&i.Pc(I,1,i.l),2&t&&i.uc(n=i.dc())&&(e.filterButton=n.first)},hostVars:2,hostBindings:function(t,e){2&t&&i.Hb("rows-selected",e.numberOfRowsSelected)},inputs:{pluralResourceName:"pluralResourceName",showSelectedActions:"showSelectedActions"},ngContentSelectors:H,decls:8,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"left-column"],["class","default-left-content",4,"ngIf"],["class","selected-left-content capitalize",4,"ngIf"],[1,"right-column"],["class","default-right-content",4,"ngIf"],["class","selected-right-actions",4,"ngIf"],["mode","indeterminate","color","accent"],[1,"default-left-content"],[1,"selected-left-content","capitalize"],[1,"default-right-content"],[4,"ngIf"],[3,"placeholder"],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"selected-right-actions"]],template:function(t,e){1&t&&(i.mc(Q),i.Hc(0,w,1,0,"mat-progress-bar",0),i.hc(1,"async"),i.Vb(2,"div",1),i.Hc(3,D,2,0,"div",2),i.Hc(4,A,3,7,"div",3),i.Ub(),i.Vb(5,"div",4),i.Hc(6,$,3,2,"div",5),i.Hc(7,S,2,0,"div",6),i.Ub()),2&t&&(i.nc("ngIf",i.ic(1,5,e.datatable.paginator&&e.datatable.paginator.loading$)),i.Db(3),i.nc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),i.Db(1),i.nc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected),i.Db(2),i.nc("ngIf",!e.showSelectedActions||!e.numberOfRowsSelected),i.Db(1),i.nc("ngIf",e.showSelectedActions&&e.numberOfRowsSelected))},directives:[p.o,C.a,P.a,O.c,p.n,m.b,s.a,O.a,O.d],pipes:[p.b,_.a,p.i,U.a],styles:[".rows-selected[_nghost-%COMP%], .rows-selected   [_nghost-%COMP%]{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}[_nghost-%COMP%]{display:flex;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;position:relative}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.left-column[_ngcontent-%COMP%]{margin-right:auto}.right-column[_ngcontent-%COMP%]{margin-left:25px}.default-right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-button[_ngcontent-%COMP%]{margin-right:10px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.mat-chip[_ngcontent-%COMP%]{text-transform:capitalize}  datatable-header info-popover{margin-left:10px}"],changeDetection:0}),T)},I3oe:function(t,n,i){"use strict";i.d(n,"a",function(){return w});var a=i("3Pt+"),r=i("2Vo4"),o=i("LRne"),c=i("Kj3r"),s=i("/uUt"),u=i("eIep"),b=i("JIr8"),p=i("fXoL"),m=i("A5z7"),f=i("ofXK"),g=i("/1cH"),h=i("NFeN"),v=i("FKr1"),y=i("zW5C"),k=["auto"],x=["inputEl"],C=["selectModeTemplate"];function P(t,e){if(1&t){var n=p.Wb();p.Vb(0,"mat-chip",8),p.cc("removed",function(){p.yc(n);var t=e.index;return p.gc().remove(t)}),p.Jc(1),p.Qb(2,"mat-icon",9),p.Ub()}if(2&t){var i=e.$implicit,a=p.gc();p.nc("selectable",!1)("removable",!a.selectMode),p.Db(1),p.Lc(" ",a.displayChipValue(i)," ")}}var O=function(t){return{elementRef:t}};function _(t,e){if(1&t){var n=p.Wb();p.Vb(0,"input",10,11),p.cc("matChipInputTokenEnd",function(t){return p.yc(n),p.gc().addFromChipInput(t.value)}),p.hc(2,"trans"),p.Ub()}if(2&t){var i=p.gc(),a=p.vc(1),r=p.vc(6);p.nc("placeholder",p.ic(2,7,i.placeholder))("type",i.type)("matChipInputFor",a)("matChipInputAddOnBlur",!0)("matAutocomplete",r)("matAutocompleteConnectedTo",p.rc(9,O,i.el))("formControl",i.formControl)}}function U(t,e){if(1&t&&(p.Vb(0,"mat-option",12),p.Jc(1),p.Ub()),2&t){var n=e.$implicit,i=p.gc();p.nc("value",n),p.Db(1),p.Kc(i.displayChipValue(n))}}function V(t,e){if(1&t&&(p.Vb(0,"mat-option",12),p.Jc(1),p.Ub()),2&t){var n=e.$implicit,i=p.gc(2);p.nc("value",n),p.Db(1),p.Kc(i.displayChipValue(n))}}function I(t,e){1&t&&p.Hc(0,V,2,2,"mat-option",6),2&t&&p.nc("ngForOf",e.suggestions)}var w=function(){var t=function(){function t(e){l(this,t),this.el=e,this.type="text",this.emailsInput=!1,this.selectMode=!1,this.formControl=new a.g,this.items$=new r.a([]),this.suggestedValues$=new r.a([])}return d(t,[{key:"suggestedValues",set:function(t){this.suggestedValues$.next(t)}},{key:"ngOnInit",value:function(){this.suggestFn&&this.bindToSearchControl()}},{key:"ngAfterViewInit",value:function(){this.emailsInput&&this.parseEmailsOnPaste()}},{key:"remove",value:function(t){var n=e(this.items$.value);n.splice(t,1),this.items$.next(n),this.propagateChange(this.items$.value)}},{key:"addFromChipInput",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!t||this.matAutocomplete.isOpen||this.selectMode||this.add(t,e)}},{key:"addFromAutocomplete",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.add(t,e)}},{key:"add",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t="string"==typeof t?t.trim():t;var i=this.findValueIndex(t)>-1;t&&!i&&(this.items$.next([].concat(e(this.items$.value),[t])),n&&this.propagateChange(this.items$.value)),this.inputEl&&(this.inputEl.nativeElement.value=""),this.formControl.setValue(null),this.suggestedValues$.next([])}},{key:"findValueIndex",value:function(t){return"string"==typeof t?this.items$.value.indexOf(t):this.items$.value.findIndex(function(e){return e.id===t.id})}},{key:"writeValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.items$.next(t||[])}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var t=this;this.formControl.valueChanges.pipe(Object(c.a)(150),Object(s.a)(),Object(u.a)(function(e){return e?t.suggestFn(e):Object(o.a)([])}),Object(b.a)(function(){return Object(o.a)([])})).subscribe(function(e){var n=e.filter(function(e){return-1===t.findValueIndex(e)});t.suggestedValues$.next(n)})}},{key:"displayChipValue",value:function(t){return"object"==typeof t?t.name:t}},{key:"parseEmailsOnPaste",value:function(){var t=this;this.inputEl.nativeElement.addEventListener("paste",function(e){var n=(e.clipboardData||window.clipboardData).getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(n){e.preventDefault();var i=window.getSelection();i.rangeCount&&(i.deleteFromDocument(),n.forEach(function(e){return t.add(e)}))}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Pb(p.l))},t.\u0275cmp=p.Jb({type:t,selectors:[["chip-input"]],viewQuery:function(t,e){var n;(1&t&&(p.Pc(k,1),p.Pc(x,1),p.Pc(C,1)),2&t)&&(p.uc(n=p.dc())&&(e.matAutocomplete=n.first),p.uc(n=p.dc())&&(e.inputEl=n.first),p.uc(n=p.dc())&&(e.selectModeTemplate=n.first))},hostVars:2,hostBindings:function(t,e){2&t&&p.Hb("select-mode",e.selectMode)},inputs:{placeholder:"placeholder",type:"type",emailsInput:"emailsInput",suggestFn:"suggestFn",selectMode:"selectMode",suggestedValues:"suggestedValues"},features:[p.Cb([{provide:a.q,useExisting:t,multi:!0}])],decls:11,vars:9,consts:[[3,"selectable"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["class","mat-chip-input mat-input-element",3,"placeholder","type","matChipInputFor","matChipInputAddOnBlur","matAutocomplete","matAutocompleteConnectedTo","formControl","matChipInputTokenEnd",4,"ngIf"],[1,"chip-input-autocomplete-panel",3,"autoActiveFirstOption","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["selectModeTemplate",""],[3,"selectable","removable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"mat-chip-input","mat-input-element",3,"placeholder","type","matChipInputFor","matChipInputAddOnBlur","matAutocomplete","matAutocompleteConnectedTo","formControl","matChipInputTokenEnd"],["inputEl",""],[3,"value"]],template:function(t,e){1&t&&(p.Vb(0,"mat-chip-list",0,1),p.Hc(2,P,3,3,"mat-chip",2),p.hc(3,"async"),p.Hc(4,_,3,11,"input",3),p.Ub(),p.Vb(5,"mat-autocomplete",4,5),p.cc("optionSelected",function(t){return e.addFromAutocomplete(t.option.value)}),p.Hc(7,U,2,2,"mat-option",6),p.hc(8,"async"),p.Ub(),p.Hc(9,I,1,1,"ng-template",null,7,p.Ic)),2&t&&(p.nc("selectable",!1),p.Db(2),p.nc("ngForOf",p.ic(3,5,e.items$)),p.Db(2),p.nc("ngIf",!e.selectMode),p.Db(1),p.nc("autoActiveFirstOption",!0),p.Db(2),p.nc("ngForOf",p.ic(8,7,e.suggestedValues$)))},directives:[m.c,f.n,f.o,g.a,m.a,h.a,m.d,m.b,g.c,a.c,a.s,a.h,v.l],pipes:[f.b,y.a],styles:["chip-input{display:block;min-height:46px}chip-input .mat-chip-list-wrapper{width:100%;height:100%;color:inherit;border:1px solid var(--be-divider-default);padding:6px;line-height:normal;font-size:1.4rem;font-family:inherit;background-color:inherit;box-sizing:border-box;border-radius:2px;margin:0}chip-input .mat-chip-input{height:24px;font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:0;max-width:100%;vertical-align:bottom;text-align:inherit}chip-input .mat-chip-input:focus{outline:none;box-shadow:none}.chip-input-select-panel{background-color:var(--be-background);min-width:180px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}"],encapsulation:2,changeDetection:0}),t}()},bHJH:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("ofXK"),c=n("fXoL"),u=function(){var t=function(t){a(n,t);var e=o(n);function n(){return l(this,n),e.apply(this,arguments)}return d(n,[{key:"transform",value:function(t){return t?i(s(n.prototype),"transform",this).call(this,t.replace("-"," ").replace("_"," ")):""}}]),n}(r.x);return t.\u0275fac=function(e){return b(e||t)},t.\u0275pipe=c.Ob({name:"titleCase",type:t,pure:!0}),t}(),b=c.Xb(u)},n0fL:function(n,i,r){"use strict";r.r(i),r.d(i,"BackstageModule",function(){return $i});var c=r("ofXK"),s=r("tyNb"),u=r("2Vo4"),b=r("nYR2"),p=r("8/ZB"),m=r("fXoL"),f=r("/uxT"),g=r("3Pt+"),h=r("kmQS"),v=r("ORVr"),y=r("QJx+"),k=r("h586"),x=r("xrAa"),C=r("Rd8u"),P=r("pCVY"),O=r("bTqV"),_=r("NFeN"),U=r("DzUk"),V=r("rG4v"),I=r("LRne"),w=r("Kj3r"),D=r("/uUt"),M=r("eIep"),A=r("JIr8"),F=r("lJxs"),J=r("OkhP"),$=r("STbY"),S=r("FBzJ"),T=r("8HKz"),Q=["searchInput"],H=["fakeInput"];function j(t,e){if(1&t&&(m.Vb(0,"span"),m.Qb(1,"media-image",16),m.Jc(2),m.Ub()),2&t){var n=e.ngIf;m.Db(1),m.nc("media",n),m.Db(1),m.Lc(" ",n.name," ")}}function E(t,e){1&t&&(m.Vb(0,"span",17),m.Jc(1,"Select an artist"),m.Ub())}function q(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",18),m.cc("click",function(){return m.yc(n),m.gc().clearSearchInput()}),m.Qb(1,"mat-icon",19),m.Ub()}}function R(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",20),m.cc("click",function(){m.yc(n);var t=e.$implicit;return m.gc().selectArtist(t)}),m.Qb(1,"media-image",16),m.Vb(2,"div",21),m.Vb(3,"div",22),m.Jc(4),m.Ub(),m.Vb(5,"div",23),m.Jc(6,"Artist"),m.Ub(),m.Ub(),m.Ub()}if(2&t){var i=e.$implicit;m.Db(1),m.nc("media",i),m.Db(3),m.Kc(i.name)}}function z(t,e){1&t&&(m.Vb(0,"div",24),m.Jc(1,"No artists found."),m.Ub())}var N,L=((N=function(){function t(e){l(this,t),this.search=e,this.listAll=!1,this.isDisabled$=new u.a(!1),this.searchFormControl=new g.g,this.loading$=new u.a(!1),this.artists$=new u.a([]),this.selectedArtist$=new u.a(null),this.searchedOnce=!1}return d(t,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(t){this.selectedArtist$.next(t)}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"setDisabledState",value:function(t){this.isDisabled$.next(t)}},{key:"bindToSearchControl",value:function(){var t=this;this.searchFormControl.valueChanges.pipe(Object(w.a)(150),Object(D.a)(),Object(M.a)(function(e){return t.searchArtists(e)}),Object(A.a)(function(){return Object(I.a)([])})).subscribe(function(e){t.searchedOnce=!0,t.artists$.next(e)})}},{key:"searchArtists",value:function(t){var e=this;return this.loading$.next(!0),this.search.suggestArtists({query:t,limit:7,listAll:this.listAll}).pipe(Object(b.a)(function(){return e.loading$.next(!1)}),Object(F.a)(function(t){return t.artists}))}},{key:"onMenuOpened",value:function(){document.querySelector(".select-artist-control-menu").style.width=this.fakeInput.nativeElement.getBoundingClientRect().width+"px",this.searchedOnce||this.clearSearchInput()}},{key:"selectArtist",value:function(t){this.selectedArtist$.next(t),this.propagateChange(t)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),t}()).\u0275fac=function(t){return new(t||N)(m.Pb(J.a))},N.\u0275cmp=m.Jb({type:N,selectors:[["select-artist-control"]],viewQuery:function(t,e){var n;1&t&&(m.Pc(Q,1),m.Pc(H,1)),2&t&&(m.uc(n=m.dc())&&(e.searchInput=n.first),m.uc(n=m.dc())&&(e.fakeInput=n.first))},hostAttrs:["tabindex","0"],inputs:{listAll:"listAll"},features:[m.Cb([{provide:g.q,useExisting:N,multi:!0}])],decls:22,vars:20,consts:[[1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],["fakeInput",""],[4,"ngIf","ngIfElse"],["anyArtist",""],[1,"arrow-container"],[1,"arrow"],[1,"select-artist-control-menu"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","mat-menu-item","","trans-placeholder","",3,"formControl"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["type","button","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","disabled","","trans","",4,"ngIf"],[1,"result-image",3,"media"],["trans",""],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],["type","button","mat-menu-item","",3,"click"],[1,"user-info"],[1,"name"],["trans","",1,"email"],["mat-menu-item","","disabled","","trans",""]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0,1),m.cc("menuOpened",function(){return e.onMenuOpened()})("menuClosed",function(){return e.onMenuClosed()}),m.hc(2,"async"),m.Hc(3,j,3,2,"span",2),m.hc(4,"async"),m.Hc(5,E,2,0,"ng-template",null,3,m.Ic),m.Vb(7,"div",4),m.Qb(8,"div",5),m.Ub(),m.Ub(),m.Vb(9,"mat-menu",6,7),m.Vb(11,"div",8),m.cc("click",function(t){return t.stopPropagation()}),m.Vb(12,"div",9),m.Qb(13,"input",10,11),m.Hc(15,q,2,0,"button",12),m.Qb(16,"loading-indicator",13),m.hc(17,"async"),m.Ub(),m.Ub(),m.Hc(18,R,7,2,"button",14),m.hc(19,"async"),m.Hc(20,z,2,0,"div",15),m.hc(21,"async"),m.Ub()),2&t){var n=m.vc(6),i=m.vc(10);m.Hb("disabled",m.ic(2,10,e.isDisabled$)),m.nc("matMenuTriggerFor",i),m.Db(3),m.nc("ngIf",m.ic(4,12,e.selectedArtist$))("ngIfElse",n),m.Db(10),m.nc("formControl",e.searchFormControl),m.Db(2),m.nc("ngIf",e.searchFormControl.value),m.Db(1),m.nc("isVisible",m.ic(17,14,e.loading$)),m.Db(2),m.nc("ngForOf",m.ic(19,16,e.artists$)),m.Db(2),m.nc("ngIf",e.searchedOnce&&!m.ic(21,18,e.artists$).length)}},directives:[$.c,c.o,$.d,g.c,$.a,C.a,g.s,g.h,S.a,c.n,T.a,O.b,_.a],pipes:[c.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;cursor:pointer}.fake-input.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.result-image[_ngcontent-%COMP%]{display:inline-block;margin-right:5px;width:25px;height:25px;border-radius:4px;vertical-align:middle}.placeholder[_ngcontent-%COMP%]{opacity:.6}.arrow-container[_ngcontent-%COMP%]{height:100%;position:absolute;top:1px;right:1px;width:20px}.arrow[_ngcontent-%COMP%]{position:absolute;border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0;left:50%;top:50%;margin-left:-4px;margin-top:-2px}  .select-artist-control-menu{max-width:none!important}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}.search-input-container[_ngcontent-%COMP%]{padding:7px 15px 15px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]:not(input){display:flex;align-items:center;height:65px;line-height:65px}.mat-menu-item[_ngcontent-%COMP%]:not(input).selected{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]:not(input)   .result-image[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:15px;border-radius:50%}.mat-menu-item[_ngcontent-%COMP%]:not(input)   .name[_ngcontent-%COMP%]{text-transform:capitalize;overflow:hidden;text-overflow:ellipsis}.mat-menu-item[_ngcontent-%COMP%]:not(input)   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem;overflow:hidden;text-overflow:ellipsis}.user-info[_ngcontent-%COMP%]{line-height:normal}.any-user-info[_ngcontent-%COMP%]{line-height:35px}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}"],changeDetection:0}),N),B=r("6SKC");function K(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(3).ngIf;m.Db(1),m.Kc(n.artist_id)}}function G(t,e){if(1&t&&(m.Vb(0,"div",7),m.Vb(1,"label",30),m.Jc(2,"Select Artist"),m.Ub(),m.Qb(3,"select-artist-control",31),m.Hc(4,K,2,1,"div",10),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(3),m.nc("listAll",!0),m.Db(1),m.nc("ngIf",n.artist_id)}}function W(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(3).ngIf;m.Db(1),m.Kc(n.name)}}function X(t,e){if(1&t&&(m.Vb(0,"div",7),m.Vb(1,"label",33),m.Jc(2,"Your artist name"),m.Ub(),m.Qb(3,"input",34),m.Hc(4,W,2,1,"div",10),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(4),m.nc("ngIf",n.name)}}function Y(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.first_name)}}function Z(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.last_name)}}function tt(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(3).ngIf;m.Db(1),m.Kc(n.role)}}function et(t,e){if(1&t&&(m.Vb(0,"div",7),m.Vb(1,"label",35),m.Jc(2,"Role"),m.Ub(),m.Vb(3,"select",36),m.Vb(4,"option",37),m.Jc(5,"Select role"),m.Ub(),m.Vb(6,"option",38),m.Jc(7,"Artist"),m.Ub(),m.Vb(8,"option",39),m.Jc(9,"Agent"),m.Ub(),m.Vb(10,"option",40),m.Jc(11,"Composer"),m.Ub(),m.Vb(12,"option",41),m.Jc(13,"Label"),m.Ub(),m.Vb(14,"option",42),m.Jc(15,"Manager"),m.Ub(),m.Vb(16,"option",43),m.Jc(17,"Musician"),m.Ub(),m.Vb(18,"option",44),m.Jc(19,"Producer"),m.Ub(),m.Vb(20,"option",45),m.Jc(21,"Publisher"),m.Ub(),m.Vb(22,"option",46),m.Jc(23,"Songwriter"),m.Ub(),m.Ub(),m.Hc(24,tt,2,1,"div",10),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(4),m.nc("value",null),m.Db(20),m.nc("ngIf",n.role)}}function nt(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.company)}}function it(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",47),m.Qb(1,"img",48),m.Vb(2,"div",49),m.Vb(3,"div",50),m.Jc(4),m.Ub(),m.Vb(5,"a",51),m.Jc(6),m.Ub(),m.Ub(),m.Vb(7,"button",52),m.cc("click",function(){m.yc(n);var t=e.$implicit;return m.gc(3).removeSocialProfile(t.key)}),m.Qb(8,"mat-icon",53),m.Ub(),m.Ub()}if(2&t){var i=e.$implicit;m.Db(1),m.nc("src",i.value.avatar,m.Bc),m.Db(3),m.Lc("",i.key," Profile"),m.Db(1),m.nc("href",i.value.profileUrl,m.Bc),m.Db(1),m.Kc(i.value.profileUrl)}}function at(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",54),m.Qb(1,"mat-icon",55),m.Vb(2,"div",49),m.Vb(3,"div",50),m.Jc(4,"Passport Scan"),m.Ub(),m.Vb(5,"div"),m.Jc(6),m.hc(7,"formattedFileSize"),m.Ub(),m.Ub(),m.Vb(8,"button",52),m.cc("click",function(){return m.yc(n),m.gc(3).removePassportUpload()}),m.Qb(9,"mat-icon",53),m.Ub(),m.Ub()}if(2&t){var i=e.ngIf;m.Db(6),m.Mc("",i.name," (",m.ic(7,2,i.file_size),")")}}var rt=function(){return["image/*"]},ot=function(t){return{types:t}};function ct(t,e){if(1&t){var n=m.Wb();m.Tb(0),m.Qb(1,"upload-image-control",4),m.Hc(2,G,5,2,"div",5),m.Hc(3,X,5,1,"div",5),m.Vb(4,"div",6),m.Vb(5,"div",7),m.Vb(6,"label",8),m.Jc(7,"First name"),m.Ub(),m.Qb(8,"input",9),m.Hc(9,Y,2,1,"div",10),m.Ub(),m.Vb(10,"div",7),m.Vb(11,"label",11),m.Jc(12,"Last name"),m.Ub(),m.Qb(13,"input",12),m.Hc(14,Z,2,1,"div",10),m.Ub(),m.Ub(),m.Hc(15,et,25,2,"div",5),m.Vb(16,"div",7),m.Vb(17,"label",13),m.Jc(18,"Company (optional)"),m.Ub(),m.Qb(19,"input",14),m.Hc(20,nt,2,1,"div",10),m.Ub(),m.Vb(21,"div",15),m.Vb(22,"div",16),m.Jc(23,"Speed up the process by connecting artist social media accounts or uploading your passport scan."),m.Ub(),m.Vb(24,"div",17),m.Vb(25,"button",18),m.cc("click",function(){return m.yc(n),m.gc(2).retrieveSocialProfile("twitter")}),m.Qb(26,"mat-icon",19),m.Vb(27,"span",0),m.Jc(28,"Connect to Twitter"),m.Ub(),m.Ub(),m.Vb(29,"button",20),m.cc("click",function(){return m.yc(n),m.gc(2).retrieveSocialProfile("facebook")}),m.Qb(30,"mat-icon",21),m.Vb(31,"span",0),m.Jc(32,"Connect to Facebook"),m.Ub(),m.Ub(),m.Vb(33,"button",22),m.cc("filesSelected",function(t){return m.yc(n),m.gc(2).uploadPassportScan(t)}),m.Qb(34,"mat-icon",23),m.Vb(35,"span",0),m.Jc(36,"Upload Passport Scan"),m.Ub(),m.Ub(),m.Ub(),m.Vb(37,"div",24),m.Hc(38,it,9,4,"div",25),m.hc(39,"keyvalue"),m.hc(40,"async"),m.Hc(41,at,10,4,"div",26),m.hc(42,"async"),m.Qb(43,"upload-progress-bar"),m.Ub(),m.Ub(),m.Vb(44,"div",27),m.Vb(45,"a",28),m.Jc(46,"Go Back"),m.Ub(),m.Vb(47,"button",29),m.hc(48,"async"),m.Jc(49,"Submit Request"),m.Ub(),m.Ub(),m.Sb()}if(2&t){var i=e.ngIf,a=m.gc().ngIf,r=m.gc();m.Db(1),m.nc("compact",!0),m.Db(1),m.nc("ngIf","become-artist"!==i),m.Db(1),m.nc("ngIf","become-artist"===i),m.Db(6),m.nc("ngIf",a.first_name),m.Db(5),m.nc("ngIf",a.last_name),m.Db(1),m.nc("ngIf","claim-artist"===i),m.Db(5),m.nc("ngIf",a.company),m.Db(13),m.nc("uploadButton",m.rc(20,ot,m.qc(19,rt))),m.Db(5),m.nc("ngForOf",m.ic(39,11,m.ic(40,13,r.socialProfiles$))),m.Db(3),m.nc("ngIf",m.ic(42,15,r.uploadedPassportEntry$)),m.Db(6),m.nc("disabled",m.ic(48,17,r.loading$))}}function st(t,e){if(1&t){var n=m.Wb();m.Vb(0,"form",2),m.cc("ngSubmit",function(){return m.yc(n),m.gc().requestAccess()}),m.Hc(1,ct,50,22,"ng-container",3),m.hc(2,"async"),m.Ub()}if(2&t){var i=m.gc();m.nc("formGroup",i.form),m.Db(1),m.nc("ngIf",m.ic(2,2,i.requestType$))}}var lt,ut,dt=((ut=function(){function e(t,n,i,a,r,o,c,s,d){var b;l(this,e),this.backstage=t,this.fb=n,this.settings=i,this.currentUser=a,this.socialAuth=r,this.uploadQueue=o,this.imageValidator=c,this.router=s,this.route=d,this.uploadedPassportEntry$=new u.a(null),this.socialProfiles$=new u.a(null),this.errors$=new u.a({}),this.loading$=new u.a(!1),this.requestType$=new u.a(null),this.form=this.fb.group({artist:[],artist_name:[this.currentUser.get("display_name")],image:[(null===(b=this.currentUser.primaryArtist())||void 0===b?void 0:b.image_small)||this.currentUser.get("avatar")],first_name:[this.currentUser.get("first_name")],last_name:[this.currentUser.get("last_name")],role:[],company:[""]}),this.requestType$.next(this.route.routeConfig.path.replace("requests/","")),this.requestType$.value===p.a.verifyArtist&&(this.form.get("artist").setValue(this.currentUser.primaryArtist()),this.form.get("artist").disable()),this.requestType$.value===p.a.becomeArtist&&(this.form.get("artist").setValue(this.currentUser.artistPlaceholder()),this.form.get("artist").disable()),this.requestType$.value!==p.a.claimArtist&&this.form.get("role").setValue("artist"),this.requestType$.value!==p.a.becomeArtist&&this.form.get("image").disable()}return d(e,[{key:"requestAccess",value:function(){var t,e,n=this;this.loading$.next(!0);var i={artist_name:this.form.value.artist_name,artist_id:null===(t=this.form.value.artist)||void 0===t?void 0:t.id,type:this.requestType$.value,data:Object.assign(Object.assign({},this.form.value),{passportScanEntryId:null===(e=this.uploadedPassportEntry$.value)||void 0===e?void 0:e.id,socialProfiles:this.socialProfiles$.value})};this.backstage.submitRequest(i).pipe(Object(b.a)(function(){return n.loading$.next(!1)})).subscribe(function(t){n.router.navigate(["/backstage/requests",t.request.id,"request-submitted"],{replaceUrl:!0})},function(t){return n.errors$.next(t.errors)})}},{key:"retrieveSocialProfile",value:function(e){var n=this;this.socialAuth.retrieveProfile(e).then(function(i){n.socialProfiles$.next(Object.assign(Object.assign({},n.socialProfiles$.value),t({},e,i)))})}},{key:"uploadPassportScan",value:function(t){var e=this;this.uploadQueue.start(t,{uri:"uploads/images",httpParams:{diskPrefix:"test",disk:"private"},validator:this.imageValidator}).subscribe(function(t){e.uploadedPassportEntry$.next(t.fileEntry)})}},{key:"removePassportUpload",value:function(){this.uploadedPassportEntry$.next(null)}},{key:"removeSocialProfile",value:function(t){var e=Object.assign({},this.socialProfiles$.value);delete e[t],this.socialProfiles$.next(e)}}]),e}()).\u0275fac=function(t){return new(t||ut)(m.Pb(f.a),m.Pb(g.f),m.Pb(h.a),m.Pb(v.a),m.Pb(y.a),m.Pb(k.a),m.Pb(x.a),m.Pb(s.e),m.Pb(s.a))},ut.\u0275cmp=m.Jb({type:ut,selectors:[["backstage-request-form"]],decls:4,vars:3,consts:[["trans",""],["ngNativeValidate","","class","many-inputs",3,"formGroup","ngSubmit",4,"ngIf"],["ngNativeValidate","",1,"many-inputs",3,"formGroup","ngSubmit"],[4,"ngIf"],["formControlName","image",3,"compact"],["class","input-container",4,"ngIf"],[1,"inline-inputs-container","many-inputs"],[1,"input-container"],["for","backstage-first-name","trans",""],["type","text","id","backstage-first-name","formControlName","first_name","required",""],["class","error",4,"ngIf"],["for","backstage-last-name","trans",""],["type","text","id","backstage-last-name","formControlName","last_name","required",""],["for","backstage-company","trans",""],["type","text","id","backstage-company","formControlName","company"],[1,"speed-up-container"],["trans","",1,"speed-up-title"],[1,"speed-up-buttons"],["type","button","mat-flat-button","","color","accent",1,"twitter-btn","speed-up-button",3,"click"],["svgIcon","twitter",1,"social-icon"],["type","button","mat-flat-button","","color","accent",1,"facebook-btn","speed-up-button",3,"click"],["svgIcon","facebook",1,"social-icon"],["type","button","mat-flat-button","","color","accent",1,"passport-btn","speed-up-button",3,"uploadButton","filesSelected"],["svgIcon","document-scanner",1,"social-icon"],[1,"attached-verifications"],["class","facebook-profile verification",4,"ngFor","ngForOf"],["class","passport-attachment verification",4,"ngIf"],[1,"backstage-action-buttons"],["type","button","routerLink","/backstage/requests","mat-raised-button","","trans","",1,"backstage-action-button"],["type","submit","mat-raised-button","","color","accent","trans","",1,"backstage-action-button",3,"disabled"],["for","backstage-artist","trans",""],["id","backstage-artist","formControlName","artist",3,"listAll"],[1,"error"],["for","backstage-name","trans",""],["type","text","id","backstage-name","formControlName","artist_name","required",""],["for","backstage-role","trans",""],["type","text","id","backstage-role","formControlName","role","required",""],["disabled","","trans","",3,"value"],["value","artist","trans",""],["value","agent","trans",""],["value","composer","trans",""],["value","label","trans",""],["value","manager","trans",""],["value","musician","trans",""],["value","producer","trans",""],["value","publisher","trans",""],["value","songwriter","trans",""],[1,"facebook-profile","verification"],["alt","",1,"verification-img",3,"src"],[1,"verification-details"],["trans","",1,"verification-name"],["target","_blank",1,"verification-url",3,"href"],["type","button","mat-icon-button","",1,"remove-verification",3,"click"],["svgIcon","close"],[1,"passport-attachment","verification"],["svgIcon","document-scanner",1,"verification-img"]],template:function(t,e){1&t&&(m.Vb(0,"h1",0),m.Jc(1,"Tell us about yourself"),m.Ub(),m.Hc(2,st,3,4,"form",1),m.hc(3,"async")),2&t&&(m.Db(2),m.nc("ngIf",m.ic(3,1,e.errors$)))},directives:[C.a,c.o,g.t,g.k,P.a,g.s,g.i,g.c,g.A,O.b,_.a,U.a,c.n,V.a,s.h,O.a,L,g.B,g.w,g.E],pipes:[c.b,c.i,B.a],styles:["[_nghost-%COMP%]{display:block;max-width:800px;margin:auto}h1[_ngcontent-%COMP%]{text-align:center}upload-image-control[_ngcontent-%COMP%]{margin:15px auto;width:160px;height:160px;border-radius:50%}.input-container[_ngcontent-%COMP%]     .fake-input, .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:55px}.speed-up-container[_ngcontent-%COMP%]{padding:15px 0 30px;border-bottom:1px solid var(--be-divider-lighter)}.speed-up-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:15px}.speed-up-button[_ngcontent-%COMP%]{margin-right:10px}.facebook-btn[_ngcontent-%COMP%]{background:#3b5998}.twitter-btn[_ngcontent-%COMP%]{background:#1da1f2}.social-icon[_ngcontent-%COMP%]{margin-right:5px}upload-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.attached-verifications[_ngcontent-%COMP%]:not(:empty){position:relative}.attached-verifications[_ngcontent-%COMP%]:not(:empty):not(:empty){margin-top:20px}.verification[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid var(--be-divider-default);border-radius:4px;padding:10px;margin-bottom:10px}.verification-details[_ngcontent-%COMP%]{overflow:hidden}.verification-url[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis}.verification-img[_ngcontent-%COMP%]{height:35px;width:35px;-o-object-fit:cover;object-fit:cover;flex-shrink:0;margin-right:10px}.verification-name[_ngcontent-%COMP%]{font-size:1.3rem;color:var(--be-secondary-text);text-transform:capitalize}.remove-verification[_ngcontent-%COMP%]{margin-left:auto}"],changeDetection:0}),ut),bt=((lt=function t(){l(this,t)}).\u0275fac=function(t){return new(t||lt)},lt.\u0275cmp=m.Jb({type:lt,selectors:[["backstage-request-submitted"]],decls:14,vars:0,consts:[[1,"text-align-center"],["svgIcon","check",1,"check-icon"],["trans",""],[1,"backstage-action-buttons"],["routerLink","/","mat-flat-button","","color","accent","trans","",1,"backstage-action-button"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Qb(1,"mat-icon",1),m.Ub(),m.Vb(2,"h1",2),m.Jc(3,"We've got your request"),m.Ub(),m.Vb(4,"ul"),m.Vb(5,"li"),m.Jc(6,"Our support team will review it and send you an email within 3 days!"),m.Ub(),m.Vb(7,"li"),m.Jc(8,"Don't submit another request until you hear from us."),m.Ub(),m.Vb(9,"li"),m.Jc(10,"If this artist profile is already claimed, ask an admin on your team to invite you."),m.Ub(),m.Ub(),m.Vb(11,"div",3),m.Vb(12,"a",4),m.Jc(13,"Got It"),m.Ub(),m.Ub())},directives:[_.a,C.a,s.h,O.a],styles:["[_nghost-%COMP%]{display:block;margin:auto;max-width:800px}.check-icon[_ngcontent-%COMP%]{width:64px;height:64px;line-height:64px}.check-icon[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{margin-bottom:25px}h1[_ngcontent-%COMP%]{text-align:center}ul[_ngcontent-%COMP%]{font-size:1.6rem;line-height:28px}.text-align-center[_ngcontent-%COMP%]{text-align:center}.action-buttons[_ngcontent-%COMP%]{margin-top:70px}.action-buttons[_ngcontent-%COMP%], .backstage-action-buttons[_ngcontent-%COMP%]{justify-content:center}"],changeDetection:0}),lt);function pt(t,e){1&t&&(m.Tb(0),m.Jc(1,"Get verified"),m.Sb())}function mt(t,e){1&t&&(m.Tb(0),m.Jc(1,"Become an artist"),m.Sb())}var ft,gt=function(t){return{sitename:t}},ht=function(t){return[t]},vt=((ft=function t(e,n){l(this,t),this.settings=e,this.currentUser=n,this.currentUserIsArtist=!1,this.currentUserIsArtist=!!this.currentUser.primaryArtist()}).\u0275fac=function(t){return new(t||ft)(m.Pb(h.a),m.Pb(v.a))},ft.\u0275cmp=m.Jb({type:ft,selectors:[["backstage-type-selector"]],decls:14,vars:8,consts:[["trans","",3,"transValues"],["trans",""],[1,"claim-row"],[1,"claim-col",3,"routerLink"],["trans","",1,"title"],[4,"ngIf"],["src","client/assets/images/backstage/claim-artist.jpg","alt",""],["routerLink","claim-artist",1,"claim-col"],["src","client/assets/images/backstage/claim-label.jpg","alt",""]],template:function(t,e){1&t&&(m.Vb(0,"h1",0),m.Jc(1,"Get Access to :sitename for Artists"),m.Ub(),m.Vb(2,"h2",1),m.Jc(3,"First, select the type of your request."),m.Ub(),m.Vb(4,"div",2),m.Vb(5,"a",3),m.Vb(6,"div",4),m.Hc(7,pt,2,0,"ng-container",5),m.Hc(8,mt,2,0,"ng-container",5),m.Ub(),m.Qb(9,"img",6),m.Ub(),m.Vb(10,"a",7),m.Vb(11,"div",4),m.Jc(12,"Claim existing artist"),m.Ub(),m.Qb(13,"img",8),m.Ub(),m.Ub()),2&t&&(m.nc("transValues",m.rc(4,gt,e.settings.get("branding.site_name"))),m.Db(5),m.nc("routerLink",m.rc(6,ht,e.currentUserIsArtist?"verify-artist":"become-artist")),m.Db(2),m.nc("ngIf",e.currentUserIsArtist),m.Db(1),m.nc("ngIf",!e.currentUserIsArtist))},directives:[C.a,s.h,c.o],styles:["[_nghost-%COMP%]{display:block;max-width:800px;margin:auto}.claim-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:25px}.claim-col[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;border:2px solid var(--be-divider-default);border-radius:10px;width:calc(50% - 30px);padding:35px 25px;transition:box-shadow .2s ease 0s;color:inherit}.claim-col[_ngcontent-%COMP%]:hover{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12);background:var(--be-background)}.claim-col[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:132px;height:132px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.claim-col[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:500;margin-bottom:10px}"],changeDetection:0}),ft),yt=r("XSk8"),kt=r("snqL"),xt=r("i2dy"),Ct=r("oJCZ"),Pt=r("wZkO"),Ot=r("I3oe"),_t=r("rGro"),Ut=r("mrSG"),Vt=r("/RwR"),It=r("2hX1"),wt=r("QGXG"),Dt=r("/M5e"),Mt=r("twBr"),At=r("M7DL"),Ft=r("EAOp"),Jt=r("Um6Z"),$t=r("Qu3c"),St=r("CH4Q"),Tt=r("zW5C"),Qt=function(t){return{artist:t}};function Ht(t,e){if(1&t&&(m.Vb(0,"a",13),m.Jc(1,"New Album"),m.Ub()),2&t){var n=m.gc();m.nc("routerLink",n.urls.createAlbum(n.insideAdmin))("queryParams",m.rc(3,Qt,n.encodedArtist))("disabled",!n.artist)}}function jt(t,e){1&t&&(m.Vb(0,"p",14),m.Qb(1,"mat-icon",15),m.Vb(2,"span",16),m.Jc(3,"Save artist first to enable album creation."),m.Ub(),m.Ub())}function Et(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",26),m.cc("click",function(){m.yc(n);var t=m.gc().$implicit;return m.gc().maybeDeleteAlbum(t)}),m.hc(1,"trans"),m.Qb(2,"mat-icon",27),m.Ub()}2&t&&m.nc("matTooltip",m.ic(1,1,"Delete album"))}function qt(t,e){if(1&t&&(m.Vb(0,"tr"),m.Vb(1,"td"),m.Vb(2,"div",17),m.Qb(3,"media-image",18),m.Vb(4,"span"),m.Jc(5),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"td",19),m.Jc(7),m.Ub(),m.Vb(8,"td",20),m.Jc(9),m.Ub(),m.Vb(10,"td",21),m.Jc(11),m.Ub(),m.Vb(12,"td",22),m.Vb(13,"a",23),m.hc(14,"trans"),m.Qb(15,"mat-icon",24),m.Ub(),m.Hc(16,Et,3,3,"button",25),m.Ub(),m.Ub()),2&t){var n=e.$implicit,i=m.gc();m.Db(3),m.nc("media",n),m.Db(2),m.Kc(n.name),m.Db(2),m.Kc(n.release_date?n.release_date:"\u2013"),m.Db(2),m.Kc(n.views),m.Db(2),m.Kc(n.tracks_count?n.tracks_count:"\u2013"),m.Db(2),m.nc("routerLink",i.urls.editAlbum(n,i.insideAdmin))("queryParams",m.rc(11,Qt,i.encodedArtist))("matTooltip",m.ic(14,9,"Edit album")),m.Db(3),m.nc("ngIf",i.currentUser.hasPermission("albums.delete"))}}function Rt(t,e){1&t&&(m.Vb(0,"no-results-message",28),m.Vb(1,"span",29),m.Jc(2,"This artist has no albums yet"),m.Ub(),m.Ub())}var zt,Nt=((zt=function(){function t(e,n,i,a,r,o,c){l(this,t),this.modal=e,this.albumsApi=n,this.currentUser=i,this.images=a,this.datatable=r,this.urls=o,this.router=c,this.albums=[],this.albums$=this.datatable.data$}return d(t,[{key:"ngOnChanges",value:function(t){this.artist&&(this.encodedArtist=btoa(JSON.stringify({id:this.artist.id,name:this.artist.name,image_small:this.artist.image_small})))}},{key:"ngOnInit",value:function(){this.insideAdmin=this.router.url.includes("admin"),this.datatable.init({initialData:this.albums?this.albums:[]})}},{key:"maybeDeleteAlbum",value:function(t){var e=this;this.modal.show(Vt.a,{title:"Delete Album",body:"Are you sure you want to delete this album?",ok:"Delete"}).beforeClosed().subscribe(function(n){return Object(Ut.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n&&this.albumsApi.delete([t.id]).subscribe(function(){i.datatable.data=i.datatable.data.filter(function(e){return e.id!==t.id})});case 1:case"end":return e.stop()}},e,this)}))})}}]),t}()).\u0275fac=function(t){return new(t||zt)(m.Pb(wt.a),m.Pb(Dt.a),m.Pb(Mt.a),m.Pb(At.a),m.Pb(It.a),m.Pb(Ct.a),m.Pb(s.e))},zt.\u0275cmp=m.Jb({type:zt,selectors:[["artist-albums-table"]],inputs:{artist:"artist",albums:"albums"},features:[m.Cb([It.a]),m.Bb],decls:22,vars:6,consts:[[1,"datatable"],["pluralResourceName","albums"],["leftContent",""],[1,"new-album-container"],["mat-raised-button","","color","accent","trans","",3,"routerLink","queryParams","disabled",4,"ngIf"],["class","save-message",4,"ngIf"],[1,"material-table"],["table-sort-header","name","trans",""],["table-sort-header","","trans",""],["table-sort-header","views","trans",""],["table-sort-header","tracks_count","trans",""],[4,"ngFor","ngForOf"],["svgImage","music.svg",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"routerLink","queryParams","disabled"],[1,"save-message"],["svgIcon","warning"],["trans",""],[1,"column-with-image"],["default","album",3,"media"],["data-label","Release Date"],["data-label","Views"],["data-label","Number of Tracks"],[1,"edit-column"],["mat-icon-button","",3,"routerLink","queryParams","matTooltip"],["svgIcon","edit"],["mat-icon-button","","trans","",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","trans","",3,"matTooltip","click"],["svgIcon","delete"],["svgImage","music.svg"],["primary-text","","trans",""]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"datatable-header",1),m.Tb(2,2),m.Vb(3,"div",3),m.Hc(4,Ht,2,5,"a",4),m.Hc(5,jt,4,0,"p",5),m.Ub(),m.Sb(),m.Ub(),m.Vb(6,"table",6),m.Vb(7,"thead"),m.Vb(8,"tr"),m.Vb(9,"th",7),m.Jc(10,"Album"),m.Ub(),m.Vb(11,"th",8),m.Jc(12,"Release Date"),m.Ub(),m.Vb(13,"th",9),m.Jc(14,"Views"),m.Ub(),m.Vb(15,"th",10),m.Jc(16,"Number Of Tracks"),m.Ub(),m.Qb(17,"th"),m.Ub(),m.Ub(),m.Vb(18,"tbody"),m.Hc(19,qt,17,13,"tr",11),m.hc(20,"async"),m.Ub(),m.Ub(),m.Hc(21,Rt,3,0,"no-results-message",12),m.Ub()),2&t&&(m.Db(4),m.nc("ngIf",e.currentUser.hasPermission("music.create")),m.Db(1),m.nc("ngIf",!e.artist),m.Db(14),m.nc("ngForOf",m.ic(20,4,e.albums$)),m.Db(2),m.nc("ngIf",!e.datatable.data.length))},directives:[Ft.a,c.o,Jt.a,C.a,c.n,O.a,s.h,_.a,T.a,$t.a,O.b,St.a],pipes:[c.b,Tt.a],styles:["artist-albums-table{display:block}artist-albums-table .new-album-container{display:flex;align-items:center}artist-albums-table .no-results-message{margin-top:35px}artist-albums-table .save-message{color:var(--be-secondary-text);font-size:1.3rem;margin-left:25px}artist-albums-table .save-message .mat-icon{vertical-align:middle;margin-right:5px;width:18px;height:18px;line-height:18px}"],encapsulation:2}),zt),Lt=r("1jcm");function Bt(t,e){1&t&&(m.Vb(0,"button",28),m.Jc(1,"Update"),m.Ub())}function Kt(t,e){1&t&&(m.Vb(0,"button",28),m.Jc(1,"Create"),m.Ub())}function Gt(t,e){if(1&t&&(m.Vb(0,"div",29),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.name)}}function Wt(t,e){if(1&t&&(m.Vb(0,"div",29),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.genres)}}function Xt(t,e){1&t&&(m.Vb(0,"div",9),m.Vb(1,"label",33),m.Jc(2,"Spotify ID"),m.Ub(),m.Qb(3,"input",34),m.Ub())}function Yt(t,e){if(1&t&&(m.Vb(0,"div",29),m.Jc(1),m.Ub()),2&t){var n=m.gc(2);m.Db(1),m.Kc(n.errors.verified)}}function Zt(t,e){if(1&t&&(m.Tb(0),m.Hc(1,Xt,4,0,"div",30),m.Vb(2,"div",31),m.Vb(3,"mat-slide-toggle",32),m.Jc(4,"Verified"),m.Ub(),m.Hc(5,Yt,2,1,"div",12),m.Ub(),m.Sb()),2&t){var n=m.gc();m.Db(1),m.nc("ngIf",n.settings.get("spotify_is_setup")),m.Db(4),m.nc("ngIf",n.errors.verified)}}var te=function(){return{diskPrefix:"bio"}},ee=function(t){return{httpParams:t}};function ne(t,e){if(1&t){var n=m.Wb();m.Vb(0,"upload-image-control",35),m.cc("fileDeleted",function(){m.yc(n);var t=e.index;return m.gc().removeProfileImage(t)}),m.Ub()}if(2&t){var i=e.$implicit;m.nc("formControlName",e.index)("uploadConfig",m.rc(4,ee,m.qc(3,te)))("buttonText",i.value?"Replace Image":"Upload Image")}}var ie,ae,re,oe=((ie=function(){function t(e,n,i,a,r,o,c,s,u,d){var b=this;l(this,t),this.settings=e,this.uploadQueue=n,this.artists=i,this.route=a,this.toast=r,this.router=o,this.fb=c,this.cd=s,this.search=u,this.urls=d,this.insideAdmin=!1,this.errors={},this.albums=[],this.form=this.fb.group({name:[""],verified:[""],image_small:[""],spotify_id:[""],genres:[[]],description:[""],country:[""],city:[""],profile_images:this.fb.array([]),links:[[]]}),this.suggestGenreFn=function(t){return b.search.media(t,{types:[yt.a],limit:5}).pipe(Object(F.a)(function(t){return t.results.genres.map(function(t){return t.name})}))}}return d(t,[{key:"ngOnInit",value:function(){this.bindToRouteData(),this.insideAdmin=this.router.url.includes("admin")}},{key:"createOrUpdate",value:function(){this.artist?this.update():this.create()}},{key:"create",value:function(){var t=this;return this.artists.create(this.form.value).subscribe(function(e){t.form.markAsPristine(),t.artist=e.artist,t.toast.open("Artist created."),t.router.navigate(t.urls.editArtist(t.artist.id,!0),{replaceUrl:!0}),t.errors={}},function(e){t.errors=e.errors,t.cd.detectChanges()})}},{key:"update",value:function(){var t=this;return this.artists.update(this.artist.id,this.form.value).subscribe(function(){t.form.markAsPristine(),t.toast.open("Artist updated."),t.router.navigate(["/admin/artists"])},function(e){t.errors=e.errors,t.cd.detectChanges()})}},{key:"profileImagesArray",value:function(){return this.form.get("profile_images")}},{key:"bindToRouteData",value:function(){var t=this;this.route.data.subscribe(function(e){var n,i,a;e.api&&(t.artist=e.api.artist,t.albums=e.api.albums,t.form.patchValue({name:e.api.artist.name,verified:e.api.artist.verified,image_small:e.api.artist.image_small,spotify_id:e.api.artist.spotify_id,genres:(e.api.artist.genres||[]).map(function(t){return t.name}),description:null===(n=e.api.artist.profile)||void 0===n?void 0:n.description,country:null===(i=e.api.artist.profile)||void 0===i?void 0:i.country,city:null===(a=e.api.artist.profile)||void 0===a?void 0:a.city,profile_images:[],links:e.api.artist.links}),(e.api.artist.profile_images||[]).forEach(function(e){t.addProfileImage(e.url)}))}),this.addProfileImage()}},{key:"addProfileImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.profileImagesArray().push(new g.g(t))}},{key:"removeProfileImage",value:function(t){this.profileImagesArray().removeAt(t)}},{key:"canDeactivate",value:function(){return!this.form.dirty}}]),t}()).\u0275fac=function(t){return new(t||ie)(m.Pb(h.a),m.Pb(k.a),m.Pb(kt.a),m.Pb(s.a),m.Pb(xt.b),m.Pb(s.e),m.Pb(g.f),m.Pb(m.h),m.Pb(J.a),m.Pb(Ct.a))},ie.\u0275cmp=m.Jb({type:ie,selectors:[["crupdate-artist-page"]],features:[m.Cb([k.a])],decls:46,vars:20,consts:[[1,"material-panel"],["ngNativeValidate","",1,"edit-main-info",3,"formGroup","ngSubmit"],[1,"left-col"],["formControlName","image_small","diskPrefix","artist"],["type","submit","mat-raised-button","","color","accent","class","main-button","trans","",4,"ngIf"],[1,"right-col","many-inputs","admin-artist-edit-inputs"],["color","accent","animationDuration","0ms"],[3,"label"],[1,"many-inputs","tab"],[1,"input-container"],["for","artist-name","trans",""],["type","text","formControlName","name","id","artist-name","required","",3,"readOnly"],["class","error",4,"ngIf"],["for","artist-genres","trans",""],["placeholder","+Add genre","id","artist-genres","formControlName","genres",3,"suggestFn"],[4,"ngIf"],["formControlName","links"],["for","artist-country","trans",""],["formControlName","country","id","artist-country"],["for","artist-city","trans",""],["formControlName","city","id","artist-city"],["for","artist-bio","trans",""],["formControlName","description","id","artist-bio","rows","8"],[1,"profile-images"],["trans","",1,"profile-images-title"],["formArrayName","profile_images",1,"profile-images-wrapper"],[3,"formControlName","uploadConfig","buttonText","fileDeleted",4,"ngFor","ngForOf"],[3,"albums","artist"],["type","submit","mat-raised-button","","color","accent","trans","",1,"main-button"],[1,"error"],["class","input-container",4,"ngIf"],[1,"setting-toggle-container"],["formControlName","verified","trans",""],["for","artist-spotify-id","trans",""],["type","text","id","artist-spotify-id","formControlName","spotify_id","minlength","22","maxlength","22"],[3,"formControlName","uploadConfig","buttonText","fileDeleted"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"form",1),m.cc("ngSubmit",function(){return e.createOrUpdate()}),m.Vb(2,"div",2),m.Qb(3,"upload-image-control",3),m.Hc(4,Bt,2,0,"button",4),m.Hc(5,Kt,2,0,"button",4),m.Ub(),m.Vb(6,"div",5),m.Vb(7,"mat-tab-group",6),m.Vb(8,"mat-tab",7),m.hc(9,"trans"),m.Vb(10,"div",8),m.Vb(11,"div",9),m.Vb(12,"label",10),m.Jc(13,"Name"),m.Ub(),m.Qb(14,"input",11),m.Hc(15,Gt,2,1,"div",12),m.Ub(),m.Vb(16,"div",9),m.Vb(17,"label",13),m.Jc(18,"Genres"),m.Ub(),m.Qb(19,"chip-input",14),m.Hc(20,Wt,2,1,"div",12),m.Ub(),m.Hc(21,Zt,6,2,"ng-container",15),m.Ub(),m.Ub(),m.Vb(22,"mat-tab",7),m.hc(23,"trans"),m.Qb(24,"profile-links-form-control",16),m.Ub(),m.Vb(25,"mat-tab",7),m.hc(26,"trans"),m.Vb(27,"div",8),m.Vb(28,"div",9),m.Vb(29,"label",17),m.Jc(30,"Country"),m.Ub(),m.Qb(31,"input",18),m.Ub(),m.Vb(32,"div",9),m.Vb(33,"label",19),m.Jc(34,"City"),m.Ub(),m.Qb(35,"input",20),m.Ub(),m.Vb(36,"div",9),m.Vb(37,"label",21),m.Jc(38,"Biography"),m.Ub(),m.Qb(39,"textarea",22),m.Ub(),m.Vb(40,"div",23),m.Vb(41,"div",24),m.Jc(42,"Biography Images"),m.Ub(),m.Vb(43,"div",25),m.Hc(44,ne,1,6,"upload-image-control",26),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Qb(45,"artist-albums-table",27),m.Ub()),2&t&&(m.Db(1),m.nc("formGroup",e.form),m.Db(3),m.nc("ngIf",e.artist),m.Db(1),m.nc("ngIf",!e.artist),m.Db(3),m.nc("label",m.ic(9,14,"Details")),m.Db(6),m.nc("readOnly",!e.insideAdmin),m.Db(1),m.nc("ngIf",e.errors.name),m.Db(4),m.nc("suggestFn",e.suggestGenreFn),m.Db(1),m.nc("ngIf",e.errors.genres),m.Db(1),m.nc("ngIf",e.insideAdmin),m.Db(1),m.nc("label",m.ic(23,16,"Links")),m.Db(3),m.nc("label",m.ic(26,18,"Biography")),m.Db(19),m.nc("ngForOf",e.profileImagesArray().controls),m.Db(1),m.nc("albums",e.albums)("artist",e.artist))},directives:[g.t,g.k,P.a,g.s,g.i,c.o,Pt.b,Pt.a,C.a,g.c,g.A,Ot.a,_t.a,g.e,c.n,Nt,O.b,Lt.a,g.o,g.n],pipes:[Tt.a],styles:[".edit-main-info[_ngcontent-%COMP%]{display:flex}.edit-main-info[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%]{width:220px;flex-shrink:0;margin-right:25px}.edit-main-info[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]{display:block;margin-top:8px;width:100%;line-height:42px}.edit-main-info[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%]   .main-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.edit-main-info[_ngcontent-%COMP%]   .right-col[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0}@media only screen and (max-width:768px){.edit-main-info[_ngcontent-%COMP%]{display:block}.edit-main-info[_ngcontent-%COMP%]   .left-col[_ngcontent-%COMP%]{max-width:220px;margin:auto auto 25px}}.profile-images[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]{padding-top:20px}.profile-images[_ngcontent-%COMP%]{margin-top:30px;border-top:1px solid var(--be-divider-lighter)}.profile-images-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.profile-images-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.profile-images-wrapper[_ngcontent-%COMP%]   upload-image-control[_ngcontent-%COMP%]{margin:0 15px 15px 0}artist-albums-table[_ngcontent-%COMP%]{padding-top:35px;margin-top:35px;border-top:1px solid var(--be-divider-lighter)}"],changeDetection:0}),ie),ce=r("5+tZ"),se=r("EY2u"),le=((ae=function(){function t(e,n){l(this,t),this.artists=e,this.router=n}return d(t,[{key:"resolve",value:function(t,e){var n=this,i=+t.paramMap.get("id");return this.artists.get(i,{with:["simplifiedAlbums","genres","profile"],albumsPerPage:50,forEditing:!0}).pipe(Object(A.a)(function(){return n.router.navigate(["/"]),se.a}),Object(ce.a)(function(t){return t.artist?Object(I.a)(t):(n.router.navigate(["/"]),se.a)}))}}]),t}()).\u0275fac=function(t){return new(t||ae)(m.Zb(kt.a),m.Zb(s.e))},ae.\u0275prov=m.Lb({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae),ue=r("5+WD"),de=r("oSJP"),be=r("7EHt"),pe=r("Lm4C"),me=r("QeDF"),fe=r("XFMS"),ge=r("oJgS"),he=r("/Sbb"),ve=r("IAz0"),ye=r("sJvS"),ke=r("tU2R"),xe=r("PCqb"),Ce=r("JWVf"),Pe=((re=function(t){a(n,t);var e=o(n);function n(){var t;return l(this,n),(t=e.apply(this,arguments)).DEFAULT_MAX_SIZE_MB=50,t.showToast=!0,t}return d(n,[{key:"initValidations",value:function(){var t,e=[new ke.a({maxSize:this.getMaxFileSize()},this.i18n),new Ce.a({types:["audio","video"]},this.i18n)];(t=this.validations).push.apply(t,e)}},{key:"getMaxFileSize",value:function(){return this.settings.get("uploads.max_size",Object(xe.a)(this.DEFAULT_MAX_SIZE_MB,"MB"))}}]),n}(ye.a)).\u0275fac=function(t){return Oe(t||re)},re.\u0275prov=m.Lb({token:re,factory:re.\u0275fac,providedIn:"root"}),re),Oe=m.Xb(Pe),_e=r("Se92"),Ue=r("xgIS"),Ve=r("IzEk"),Ie=r("/1cH"),we=r("A5z7"),De=r("FKr1"),Me=["searchInput"];function Ae(t,e){if(1&t){var n=m.Wb();m.Vb(0,"mat-chip",10),m.cc("removed",function(){m.yc(n);var t=e.$implicit;return m.gc().deselectArtist(t)}),m.Qb(1,"img",11),m.Jc(2),m.Qb(3,"mat-icon",12),m.Ub()}if(2&t){var i=e.$implicit;m.nc("removable",!0),m.Db(1),m.nc("src",i.image_small,m.Bc)("alt",i.name),m.Db(1),m.Lc(" ",i.name," ")}}function Fe(t,e){if(1&t&&(m.Vb(0,"mat-option",13),m.Qb(1,"img",11),m.Vb(2,"span"),m.Jc(3),m.Ub(),m.Ub()),2&t){var n=e.$implicit;m.nc("value",n),m.Db(1),m.nc("src",n.image_small,m.Bc)("alt",n.name+" image"),m.Db(2),m.Kc(n.name)}}function Je(t,e){if(1&t&&(m.Vb(0,"div",14),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.error)}}var $e,Se=(($e=function(){function t(e,n){l(this,t),this.search=e,this.currentUser=n,this.searchControl=new g.g,this.value$=new u.a([]),this.searchResults$=new u.a([])}return d(t,[{key:"ngOnInit",value:function(){this.bindSearchControl()}},{key:"ngAfterViewInit",value:function(){var t=this;Object(Ue.a)(this.searchInput.nativeElement,"focus").pipe(Object(Ve.a)(1)).subscribe(function(){t.findMatches()})}},{key:"writeValue",value:function(t){this.value$.next(t)}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"deselectArtist",value:function(t){var e=this.value$.value.filter(function(e){return e.id!==t.id});this.value$.next(e),this.propagateChange(this.value$.value)}},{key:"selectArtist",value:function(t){-1===this.value$.value.findIndex(function(e){return e.id===t.id})&&(this.value$.next([].concat(e(this.value$.value),[t])),this.propagateChange(this.value$.value)),this.searchInput.nativeElement.blur()}},{key:"bindSearchControl",value:function(){var t=this;this.searchControl.valueChanges.pipe(Object(D.a)(),Object(w.a)(250)).subscribe(function(e){if("string"!=typeof e)return Object(I.a)([]);t.findMatches(e)})}},{key:"findMatches",value:function(t){var e=this;this.search.suggestArtists({query:t,limit:7}).subscribe(function(t){return e.searchResults$.next(t.artists)})}},{key:"displayFn",value:function(t){return null}}]),t}()).\u0275fac=function(t){return new(t||$e)(m.Pb(J.a),m.Pb(Mt.a))},$e.\u0275cmp=m.Jb({type:$e,selectors:[["track-artist-control"]],viewQuery:function(t,e){var n;1&t&&m.Pc(Me,1),2&t&&m.uc(n=m.dc())&&(e.searchInput=n.first)},hostAttrs:[1,"custom-control"],inputs:{error:"error",id:"id"},features:[m.Cb([k.a,{provide:g.q,useExisting:$e,multi:!0}])],decls:13,vars:13,consts:[[1,"input-container"],["trans","",3,"for"],["type","text","placeholder","Search artists...","trans-placeholder","",3,"id","formControl","matAutocomplete"],["searchInput",""],[3,"selectable"],["class","chip-with-image",3,"removable","removed",4,"ngFor","ngForOf"],[1,"media-autocomplete-panel",3,"displayWith","optionSelected"],["artistAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"chip-with-image",3,"removable","removed"],[3,"src","alt"],["svgIcon","cancel","matChipRemove",""],[3,"value"],[1,"error"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Vb(1,"label",1),m.Jc(2,"Artists"),m.Ub(),m.Qb(3,"input",2,3),m.Vb(5,"mat-chip-list",4),m.Hc(6,Ae,4,4,"mat-chip",5),m.hc(7,"async"),m.Ub(),m.Vb(8,"mat-autocomplete",6,7),m.cc("optionSelected",function(t){return e.selectArtist(t.option.value)}),m.Hc(10,Fe,4,4,"mat-option",8),m.hc(11,"async"),m.Ub(),m.Hc(12,Je,2,1,"div",9),m.Ub()),2&t){var n=m.vc(9);m.Db(1),m.nc("for",e.id),m.Db(2),m.nc("id",e.id)("formControl",e.searchControl)("matAutocomplete",n),m.Db(2),m.nc("selectable",!1),m.Db(1),m.nc("ngForOf",m.ic(7,9,e.value$)),m.Db(2),m.nc("displayWith",e.displayFn),m.Db(2),m.nc("ngForOf",m.ic(11,11,e.searchResults$)),m.Db(2),m.nc("ngIf",e.error)}},directives:[C.a,g.c,Ie.c,g.s,g.h,we.c,c.n,Ie.a,c.o,we.a,_.a,we.d,De.l],pipes:[c.b],styles:["[_nghost-%COMP%]{display:block}.mat-chip-list[_ngcontent-%COMP%]{display:block;margin-top:15px}.mat-standard-chip.chip-with-image[_ngcontent-%COMP%]{padding-left:0}.mat-standard-chip.chip-with-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;-o-object-fit:cover;object-fit:cover;border-radius:16px;margin-right:8px}"],changeDetection:0}),$e),Te=r("gcYM"),Qe=r("eNwd"),He=r("bv9b");function je(t,e){if(1&t&&(m.Vb(0,"div",7),m.Jc(1),m.Vb(2,"span",8),m.Jc(3,"left"),m.Ub(),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Lc(" ",n.progress.eta," ")}}function Ee(t,e){1&t&&(m.Qb(0,"mat-icon",9),m.hc(1,"trans")),2&t&&m.nc("matTooltip",m.ic(1,1,e.ngIf))}function qe(t,e){1&t&&(m.Vb(0,"span",8),m.Jc(1,"Upload complete."),m.Ub())}function Re(t,e){1&t&&(m.Vb(0,"span",8),m.Jc(1,"We are processing your track for playback\u2026"),m.Ub())}function ze(t,e){if(1&t){var n=m.Wb();m.Vb(0,"span",12),m.cc("click",function(){return m.yc(n),m.gc(2).upload.cancel()}),m.Jc(1,"Cancel"),m.Ub()}}function Ne(t,e){if(1&t&&(m.Hc(0,qe,2,0,"span",10),m.Hc(1,Re,2,0,"span",10),m.hc(2,"async"),m.Hc(3,ze,2,0,"span",11),m.hc(4,"async")),2&t){var n=m.gc();m.nc("ngIf",n.upload.completed),m.Db(1),m.nc("ngIf",m.ic(2,3,n.upload.processing$)),m.Db(2),m.nc("ngIf",!m.ic(4,5,n.upload.processing$)&&!n.upload.completed)}}var Le,Be=((Le=function(){function t(e){l(this,t),this.cd=e}return d(t,[{key:"ngOnChanges",value:function(){var t=this;this.subscription&&this.subscription.unsubscribe(),this.subscription=this.upload.progress$.pipe(Object(Te.a)(260,Qe.a,{leading:!0,trailing:!0})).subscribe(function(e){t.progress=e,t.cd.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Le)(m.Pb(m.h))},Le.\u0275cmp=m.Jb({type:Le,selectors:[["track-upload-header"]],inputs:{upload:"upload"},features:[m.Bb],decls:11,vars:10,consts:[[1,"meta"],[1,"name"],["class","time-left",4,"ngIf"],[1,"actions"],["class","error-icon action-icon","svgIcon","error-outline","matTooltipPosition","left",3,"matTooltip",4,"ngIf","ngIfElse"],["noError",""],["color","accent",3,"mode","value"],[1,"time-left"],["trans",""],["svgIcon","error-outline","matTooltipPosition","left",1,"error-icon","action-icon",3,"matTooltip"],["trans","",4,"ngIf"],["class","cancel-button","trans","",3,"click",4,"ngIf"],["trans","",1,"cancel-button",3,"click"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Jc(2),m.Ub(),m.Hc(3,je,4,1,"div",2),m.Vb(4,"div",3),m.Hc(5,Ee,2,3,"mat-icon",4),m.hc(6,"async"),m.Hc(7,Ne,5,7,"ng-template",null,5,m.Ic),m.Ub(),m.Ub(),m.Qb(9,"mat-progress-bar",6),m.hc(10,"async")),2&t){var n=m.vc(8);m.Db(2),m.Kc(e.upload.uploadedFile.name),m.Db(1),m.nc("ngIf",e.progress.percentage&&e.progress.percentage<100&&!e.upload.error$.value),m.Db(2),m.nc("ngIf",m.ic(6,6,e.upload.error$))("ngIfElse",n),m.Db(4),m.nc("mode",m.ic(10,8,e.upload.processing$)?"indeterminate":"determinate")("value",e.progress.percentage)}},directives:[c.o,He.a,C.a,_.a,$t.a],pipes:[c.b,Tt.a],styles:["[_nghost-%COMP%]{display:block;color:var(--be-secondary-text);font-size:1.3rem}.meta[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}.name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%], .time-left[_ngcontent-%COMP%]{white-space:nowrap}.actions[_ngcontent-%COMP%], .time-left[_ngcontent-%COMP%]{padding-left:20px}.actions[_ngcontent-%COMP%]{margin-left:auto}.action-icon[_ngcontent-%COMP%]{vertical-align:middle;width:22px;height:22px;margin-bottom:4px}.completed-icon[_ngcontent-%COMP%]{color:#43a047}.error-icon[_ngcontent-%COMP%]{color:#f44336}.cancel-button[_ngcontent-%COMP%]{color:var(--be-link);cursor:pointer;font-size:1.2rem;text-transform:uppercase;line-height:22px}.cancel-button[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0}),Le),Ke=r("TCaE"),Ge=["searchInput"],We=["fakeInput"];function Xe(t,e){if(1&t&&(m.Tb(0),m.Qb(1,"media-image",23),m.Vb(2,"div",24),m.Jc(3),m.Ub(),m.Sb()),2&t){var n=e.ngIf;m.Db(1),m.nc("media",n),m.Db(2),m.Kc(n.name)}}function Ye(t,e){1&t&&(m.Vb(0,"div",25),m.Jc(1,"None"),m.Ub())}function Ze(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",26),m.cc("click",function(){return m.yc(n),m.gc().clearSearchInput()}),m.Qb(1,"mat-icon",27),m.Ub()}}function tn(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",17),m.cc("click",function(){m.yc(n);var t=e.$implicit;return m.gc().selectAlbum(t)}),m.Qb(1,"media-image",23),m.Vb(2,"div",28),m.Vb(3,"div",29),m.Jc(4),m.Ub(),m.Qb(5,"artists-links-list",30),m.Ub(),m.Ub()}if(2&t){var i=e.$implicit;m.Db(1),m.nc("media",i),m.Db(3),m.Kc(i.name),m.Db(1),m.nc("artists",i.artists)}}function en(t,e){1&t&&(m.Vb(0,"button",31),m.Jc(1,"No albums found."),m.Ub())}var nn,an=((nn=function(){function t(e,n){l(this,t),this.search=e,this.currentUser=n,this.searchFormControl=new g.g,this.loading$=new u.a(!1),this.results$=new u.a([]),this.selectedAlbum$=new u.a(null),this.searchedOnce=!1}return d(t,[{key:"ngOnInit",value:function(){this.bindToSearchControl()}},{key:"writeValue",value:function(t){this.selectedAlbum$.next(t)}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var t=this;this.searchFormControl.valueChanges.pipe(Object(w.a)(150),Object(D.a)(),Object(M.a)(function(e){return t.searchAlbums(e)}),Object(A.a)(function(){return Object(I.a)([])})).subscribe(function(e){t.searchedOnce=!0,t.results$.next(e)})}},{key:"searchAlbums",value:function(t){var e=this;return this.loading$.next(!0),this.search.suggestAlbums({query:t,limit:7}).pipe(Object(b.a)(function(){return e.loading$.next(!1)}),Object(F.a)(function(t){return t.albums}))}},{key:"onMenuOpened",value:function(){document.querySelector(".add-album-control-menu").style.width=this.fakeInput.nativeElement.getBoundingClientRect().width+"px",this.searchedOnce||this.clearSearchInput()}},{key:"selectAlbum",value:function(t){this.selectedAlbum$.next(t),this.propagateChange(t)}},{key:"clearSearchInput",value:function(){this.searchFormControl.setValue("")}},{key:"onMenuClosed",value:function(){this.loading$.next(!1),this.clearSearchInput()}}]),t}()).\u0275fac=function(t){return new(t||nn)(m.Pb(J.a),m.Pb(Mt.a))},nn.\u0275cmp=m.Jb({type:nn,selectors:[["album-control"]],viewQuery:function(t,e){var n;1&t&&(m.Pc(Ge,3),m.Pc(We,1)),2&t&&(m.uc(n=m.dc())&&(e.searchInput=n.first),m.uc(n=m.dc())&&(e.fakeInput=n.first))},features:[m.Cb([{provide:g.q,useExisting:nn,multi:!0}])],decls:30,vars:16,consts:[[1,"many-inputs"],[1,"input-container"],["trans","",1,"fake-label"],["tabindex","0",1,"fake-input",3,"matMenuTriggerFor","menuOpened","menuClosed"],["fakeInput",""],[4,"ngIf","ngIfElse"],["anyAlbum",""],[1,"arrow-container"],[1,"arrow"],[1,"add-album-control-menu"],["menu","matMenu"],[1,"input-container","search-input-container",3,"click"],[1,"search-input-wrapper"],["type","text","placeholder","Search...","mat-menu-item","","trans-placeholder","",3,"formControl","blur"],["searchInput",""],["class","clear-search-input-button","mat-icon-button","",3,"click",4,"ngIf"],[1,"small",3,"isVisible"],["mat-menu-item","",3,"click"],["default","album"],[1,"info","any-user-info"],["trans","",1,"name"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","disabled","","trans","",4,"ngIf"],[3,"media"],[1,"title-name"],["trans","",1,"title-name"],["mat-icon-button","",1,"clear-search-input-button",3,"click"],["svgIcon","close"],[1,"user-info"],[1,"name"],[1,"email",3,"artists"],["mat-menu-item","","disabled","","trans",""]],template:function(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Jc(3,"Album"),m.Ub(),m.Vb(4,"div",3,4),m.cc("menuOpened",function(){return e.onMenuOpened()})("menuClosed",function(){return e.onMenuClosed()}),m.Hc(6,Xe,4,2,"ng-container",5),m.hc(7,"async"),m.Hc(8,Ye,2,0,"ng-template",null,6,m.Ic),m.Vb(10,"div",7),m.Qb(11,"div",8),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(12,"mat-menu",9,10),m.Vb(14,"div",11),m.cc("click",function(t){return t.stopPropagation()}),m.Vb(15,"div",12),m.Vb(16,"input",13,14),m.cc("blur",function(){return m.yc(n),m.vc(17).focus()}),m.Ub(),m.Hc(18,Ze,2,0,"button",15),m.Qb(19,"loading-indicator",16),m.hc(20,"async"),m.Ub(),m.Ub(),m.Vb(21,"button",17),m.cc("click",function(){return e.selectAlbum(null)}),m.Qb(22,"media-image",18),m.Vb(23,"div",19),m.Vb(24,"div",20),m.Jc(25,"No Album"),m.Ub(),m.Ub(),m.Ub(),m.Hc(26,tn,6,3,"button",21),m.hc(27,"async"),m.Hc(28,en,2,0,"button",22),m.hc(29,"async"),m.Ub()}if(2&t){var i=m.vc(9),a=m.vc(13);m.Db(4),m.nc("matMenuTriggerFor",a),m.Db(2),m.nc("ngIf",m.ic(7,8,e.selectedAlbum$))("ngIfElse",i),m.Db(10),m.nc("formControl",e.searchFormControl),m.Db(2),m.nc("ngIf",e.searchFormControl.value),m.Db(1),m.nc("isVisible",m.ic(20,10,e.loading$)),m.Db(7),m.nc("ngForOf",m.ic(27,12,e.results$)),m.Db(2),m.nc("ngIf",e.searchedOnce&&!m.ic(29,14,e.results$).length)}},directives:[C.a,$.c,c.o,$.d,g.c,$.a,g.s,g.h,S.a,T.a,c.n,O.b,_.a,Ke.a],pipes:[c.b],styles:["[_nghost-%COMP%]{display:block;min-width:280px;max-width:100%}.fake-input[_ngcontent-%COMP%]{display:flex;align-items:center}.fake-label[_ngcontent-%COMP%]{text-transform:capitalize}.title-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}media-image[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;width:35px;height:35px;flex-shrink:0;border-radius:4px;vertical-align:middle}.arrow-container[_ngcontent-%COMP%]{flex-shrink:0;padding-left:8px;margin-left:auto}.arrow[_ngcontent-%COMP%]{border-color:#000 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;width:0}  .mat-menu-panel.add-album-control-menu{max-width:none}.mat-menu-item[_ngcontent-%COMP%]:first-of-type{border-top:1px solid var(--be-divider-default)}.search-input-container[_ngcontent-%COMP%]{padding:2px 10px 10px}.search-input-wrapper[_ngcontent-%COMP%]{position:relative}.clear-search-input-button[_ngcontent-%COMP%]{position:absolute;top:4px;right:0;color:var(--be-secondary-text)}.mat-menu-item[_ngcontent-%COMP%]:not(input){display:flex;vertical-align:middle;height:65px;line-height:65px;align-items:center}.mat-menu-item[_ngcontent-%COMP%]:not(input).selected{background-color:var(--be-accent-emphasis)}.mat-menu-item[_ngcontent-%COMP%]:not(input)   media-image[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:15px;border-radius:50%}.mat-menu-item[_ngcontent-%COMP%]:not(input)   .name[_ngcontent-%COMP%]{text-transform:capitalize;overflow:hidden;text-overflow:ellipsis}.mat-menu-item[_ngcontent-%COMP%]:not(input)   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem;overflow:hidden;text-overflow:ellipsis}.user-info[_ngcontent-%COMP%]{line-height:normal}.any-user-info[_ngcontent-%COMP%]{line-height:35px}loading-indicator[_ngcontent-%COMP%]{position:absolute;top:12px;right:40px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}"],changeDetection:0}),nn);function rn(t,e){if(1&t&&m.Qb(0,"track-upload-header",23),2&t){var n=m.gc(2);m.nc("upload",n.uploadQueueItem)}}function on(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",24),m.lc(1),m.Vb(2,"div",14),m.Vb(3,"label",25),m.Jc(4,"Title"),m.Ub(),m.Qb(5,"input",26),m.Ub(),m.Vb(6,"div",27),m.Vb(7,"button",28),m.cc("click",function(){return m.yc(n),m.gc(2).toggleExpandedState()}),m.Qb(8,"mat-icon",29),m.Ub(),m.Vb(9,"button",28),m.cc("click",function(){return m.yc(n),m.gc(2).maybeCancel()}),m.Qb(10,"mat-icon",30),m.Ub(),m.Ub(),m.Ub()}if(2&t){var i=m.gc(2);m.nc("formGroup",i.form),m.Db(3),m.nc("for","track-form-"+i.uniqueId+"-name"),m.Db(2),m.nc("id","track-form-"+i.uniqueId+"-name"),m.Db(2),m.Hb("active",i.expanded)}}function cn(t,e){1&t&&(m.Vb(0,"span",31),m.Jc(1,"Replace File"),m.Ub())}function sn(t,e){1&t&&(m.Vb(0,"span",31),m.Jc(1,"Upload Track"),m.Ub())}function ln(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.name)}}function un(t,e){if(1&t&&(m.Vb(0,"div",14),m.Vb(1,"label",15),m.Jc(2,"Title"),m.Ub(),m.Qb(3,"input",26),m.Hc(4,ln,2,1,"div",17),m.Ub()),2&t){var n=m.gc().ngIf,i=m.gc();m.Db(1),m.nc("for","track-form-"+i.uniqueId+"-name"),m.Db(2),m.nc("id","track-form-"+i.uniqueId+"-name"),m.Db(1),m.nc("ngIf",n.name)}}function dn(t,e){if(1&t&&m.Qb(0,"album-control",33),2&t){var n=m.gc(2);m.nc("id","track-form-"+n.uniqueId+"-album_id")}}function bn(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc().ngIf;m.Db(1),m.Kc(n.duration)}}function pn(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.youtube_id)}}function mn(t,e){if(1&t&&(m.Vb(0,"div",14),m.Vb(1,"label",15),m.Jc(2,"Youtube Video ID"),m.Ub(),m.Qb(3,"input",34),m.Hc(4,pn,2,1,"div",17),m.Vb(5,"p"),m.Jc(6,"ID only. https://www.youtube.com/embed?v="),m.Vb(7,"strong"),m.Jc(8,"EPyh41zPg4Z"),m.Ub(),m.Ub(),m.Ub()),2&t){var n=m.gc().ngIf,i=m.gc();m.Db(1),m.nc("for","track-form-"+i.uniqueId+"-track-youtube-id"),m.Db(2),m.nc("id","track-form-"+i.uniqueId+"-track-youtube-id"),m.Db(1),m.nc("ngIf",n.youtube_id)}}function fn(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc(2).ngIf;m.Db(1),m.Kc(n.url)}}function gn(t,e){if(1&t&&(m.Vb(0,"div",14),m.Vb(1,"label",15),m.Jc(2,"Track Url"),m.Ub(),m.Qb(3,"input",35),m.Hc(4,fn,2,1,"div",17),m.Vb(5,"p"),m.Jc(6,"Remote or local url to music or video file for this track. If available, this will always play instead of youtube video."),m.Ub(),m.Ub()),2&t){var n=m.gc().ngIf,i=m.gc();m.Db(1),m.nc("for","track-form-"+i.uniqueId+"-track-url"),m.Db(2),m.nc("id","track-form-"+i.uniqueId+"-track-url"),m.Db(1),m.nc("ngIf",n.url)}}function hn(t,e){1&t&&(m.Vb(0,"div",14),m.Vb(1,"label",36),m.Jc(2,"Spotify ID"),m.Ub(),m.Qb(3,"input",37),m.Ub())}function vn(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc().ngIf;m.Db(1),m.Kc(n.genres)}}function yn(t,e){if(1&t&&(m.Vb(0,"div",32),m.Jc(1),m.Ub()),2&t){var n=m.gc().ngIf;m.Db(1),m.Kc(n.tags)}}function kn(t,e){if(1&t&&(m.Vb(0,"button",38),m.hc(1,"async"),m.Jc(2,"Save"),m.Ub()),2&t){var n=m.gc(2);m.nc("disabled",m.ic(1,1,n.loading$)||n.uploadQueueItem&&!n.uploadQueueItem.completed)}}function xn(t,e){if(1&t){var n=m.Wb();m.Vb(0,"button",39),m.cc("click",function(){return m.yc(n),m.gc(2).maybeCancel()}),m.Jc(1,"Cancel"),m.Ub()}}function Cn(t,e){if(1&t){var n=m.Wb();m.Vb(0,"form",1),m.cc("ngSubmit",function(){return m.yc(n),m.gc().submit()}),m.Hc(1,rn,1,1,"track-upload-header",2),m.Hc(2,on,11,5,"div",3),m.Vb(3,"div",4),m.Vb(4,"div",5),m.Vb(5,"div",6),m.Qb(6,"upload-image-control",7),m.hc(7,"async"),m.Vb(8,"button",8),m.cc("click",function(){return m.yc(n),m.gc().openUploadMusicModal()}),m.Hc(9,cn,2,0,"span",9),m.Hc(10,sn,2,0,"span",9),m.Ub(),m.Ub(),m.Vb(11,"div",10),m.Hc(12,un,5,3,"div",11),m.Hc(13,dn,1,1,"album-control",12),m.Qb(14,"track-artist-control",13),m.Vb(15,"div",14),m.Vb(16,"label",15),m.Jc(17,"Duration (ms)"),m.Ub(),m.Qb(18,"input",16),m.Hc(19,bn,2,1,"div",17),m.Ub(),m.Hc(20,mn,9,3,"div",11),m.Hc(21,gn,7,3,"div",11),m.Hc(22,hn,4,0,"div",11),m.Vb(23,"div",14),m.Vb(24,"label",15),m.Jc(25,"Genres"),m.Ub(),m.Qb(26,"chip-input",18),m.Hc(27,vn,2,1,"div",17),m.Ub(),m.Vb(28,"div",14),m.Vb(29,"label",15),m.Jc(30,"Tags"),m.Ub(),m.Qb(31,"chip-input",19),m.Hc(32,yn,2,1,"div",17),m.Ub(),m.Vb(33,"div",14),m.Vb(34,"label",15),m.Jc(35,"Description"),m.Ub(),m.Qb(36,"textarea",20),m.Ub(),m.Hc(37,kn,3,3,"button",21),m.Hc(38,xn,2,0,"button",22),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){var i=e.ngIf,a=m.gc();m.nc("formGroup",a.form),m.Db(1),m.nc("ngIf",a.uploadQueueItem),m.Db(1),m.nc("ngIf",a.albumForm),m.Db(1),m.nc("@bodyExpansion",a.getExpandedState()),m.Db(1),m.Hb("inside-album",a.albumForm),m.Db(2),m.nc("defaultBackground",m.ic(7,31,a.defaultImage$)),m.Db(3),m.nc("ngIf",a.track),m.Db(1),m.nc("ngIf",!a.track),m.Db(2),m.nc("ngIf",!a.albumForm),m.Db(1),m.nc("ngIf",!a.albumForm),m.Db(1),m.nc("error",i.artists)("id","track-form-"+a.uniqueId+"-artists"),m.Db(2),m.nc("for","track-form-"+a.uniqueId+"-duration"),m.Db(2),m.nc("id","track-form-"+a.uniqueId+"-duration"),m.Db(1),m.nc("ngIf",i.duration),m.Db(1),m.nc("ngIf",a.insideAdmin()),m.Db(1),m.nc("ngIf",a.insideAdmin()),m.Db(1),m.nc("ngIf",a.insideAdmin&&a.settings.get("spotify_is_setup")),m.Db(2),m.nc("for","track-form-"+a.uniqueId+"-track-genres"),m.Db(2),m.nc("id","track-form-"+a.uniqueId+"-track-genres")("suggestFn",a.suggestGenreFn),m.Db(1),m.nc("ngIf",i.genres),m.Db(2),m.nc("for","track-form-"+a.uniqueId+"-track-tags"),m.Db(2),m.nc("id","track-form-"+a.uniqueId+"-track-tags")("suggestFn",a.suggestTagFn),m.Db(1),m.nc("ngIf",i.tags),m.Db(2),m.nc("for","track-form-"+a.uniqueId+"-track-description"),m.Db(2),m.nc("id","track-form-"+a.uniqueId+"-track-description"),m.Db(1),m.nc("ngIf",!a.albumForm),m.Db(1),m.nc("ngIf",!a.albumForm&&!a.track)}}var Pn,On=["*"],_n=((Pn=function(){function e(t,n,i,a,r,o,c,s,d,b,p,f){var g=this;l(this,e),this.fb=t,this.currentUser=n,this.tracks=i,this.toast=a,this.modal=r,this.audioValidator=o,this.uploadQueue=c,this.waveGenerator=s,this.router=d,this.settings=b,this.cd=p,this.search=f,this.canceled=new m.n,this.saved=new m.n,this.errors$=new u.a({}),this.defaultImage$=new u.a(de.a.album),this.loading$=new u.a(!1),this.uniqueId=Object(ge.a)(5),this.form=this.fb.group({id:[null],name:[""],image:[""],description:[""],number:[1],tags:[[]],genres:[[]],duration:[null],url:[""],youtube_id:[""],spotify_id:[""],spotify_popularity:[""],album:[null],artists:[[]],waveData:[null],lyrics:[""]}),this.expanded=!1,this.suggestTagFn=function(t){return g.search.media(t,{types:["tag"],limit:5}).pipe(Object(F.a)(function(t){return t.results.tags.map(function(t){return t.name})}))},this.suggestGenreFn=function(t){return g.search.media(t,{types:[yt.a],limit:5}).pipe(Object(F.a)(function(t){return t.results.genres.map(function(t){return t.name})}))}}return d(e,[{key:"ngOnChanges",value:function(t){t.number&&null!=t.number.currentValue&&this.form.patchValue({number:t.number.currentValue})}},{key:"ngOnInit",value:function(){var t=this;if(this.expanded=!this.albumForm,this.track){var e=Object.assign({},this.track);e.tags=(this.track.tags||[]).map(function(t){return t.name}),e.genres=(this.track.genres||[]).map(function(t){return t.display_name||t.name}),this.form.patchValue(e),this.track.album&&this.defaultImage$.next(this.track.album.image||de.a.album)}else this.currentUser.canAttachMusicToAnyArtist()||this.form.get("artists").setValue([this.currentUser.get("artists")[0]||this.currentUser.artistPlaceholder()]);this.uploadQueueItem&&this.uploadQueueItem.uploadedResponse$.subscribe(function(e){t.patchFormUsingFileUpload(e)}),this.albumForm&&this.albumForm.get("image").valueChanges.subscribe(function(e){t.defaultImage$.next(e||de.a.album)})}},{key:"getPayload",value:function(){var t=this.uploadQueueItem?this.uploadQueueItem.customData:{},e=Object.assign(Object.assign({},this.form.value),t);return e.artists=e.artists.map(function(t){return"number"!=typeof t?t.id:t}),e}},{key:"isUploading",value:function(){return this.uploadQueueItem&&!this.uploadQueueItem.completed}},{key:"submit",value:function(){var t=this;if(!this.albumForm){this.loading$.next(!0);var e=this.getPayload();(this.track?this.tracks.update(this.track.id,e):this.tracks.create(e)).pipe(Object(b.a)(function(){return t.loading$.next(!1)})).subscribe(function(e){t.uploadQueueItem&&t.uploadQueue.remove(t.uploadQueueItem.id),t.toast.open("Track saved."),t.form.markAsPristine(),t.saved.emit(e.track)},function(e){t.errors$.next(e.errors),Object(he.a)(t.errors$.value,"track-form-".concat(t.uniqueId))})}}},{key:"toggleExpandedState",value:function(){this.expanded=!this.expanded}},{key:"getExpandedState",value:function(){return this.expanded?"expanded":"collapsed"}},{key:"maybeCancel",value:function(){var t=this;this.modal.show(Vt.a,{title:"Remove Track",body:"Are you sure you want to cancel the upload and remove this track?",ok:"Remove"}).beforeClosed().subscribe(function(e){e&&(t.uploadQueueItem?(t.uploadQueue.remove(t.uploadQueueItem.id),t.canceled.emit(t.uploadQueueItem),t.toast.open("Upload canceled.")):t.track&&t.tracks.delete([t.track.id]).subscribe(function(){t.canceled.emit(t.track),t.toast.open("Track deleted.")}))})}},{key:"openUploadMusicModal",value:function(){var e=this,n={uri:"uploads",validator:this.audioValidator,httpParams:{diskPrefix:"track_media",disk:"public"},willProcessFiles:!0};Object(pe.a)({types:[me.a.audio,me.a.video]}).then(function(i){i&&(e.uploadQueue.start(e.uploadQueueItem?t({},e.uploadQueueItem.id,i[0]):i,n).subscribe(function(t){var n=e.uploadQueue.find(t.queueItemId);e.waveGenerator.generate(n.uploadedFile.native).then(function(t){e.form.patchValue({waveData:t}),n.finishProcessing()}),e.patchFormUsingFileUpload(t),e.toast.open("Track uploaded.")},function(){return e.toast.open("Could not upload track")}),e.uploadQueueItem||(e.uploadQueueItem=e.uploadQueue.uploads$.value[0],e.cd.markForCheck()))})}},{key:"patchFormUsingFileUpload",value:function(t){var e={name:t.metadata.title,duration:t.metadata.duration,url:t.fileEntry.url,genres:t.metadata.genres||[],description:t.metadata.comment,lyrics:t.metadata.lyrics};t.metadata.album&&(e.album=t.metadata.album),t.metadata.artist&&(e.artists=[t.metadata.artist],this.albumForm&&!this.albumForm.value.artist&&this.albumForm.patchValue({artist:t.metadata.artist})),t.metadata.image&&(e.image=t.metadata.image.url,this.albumForm&&!this.albumForm.value.image&&this.albumForm.patchValue({image:t.metadata.image.url})),t.metadata.release_date&&this.albumForm&&!this.albumForm.value.release_date&&this.albumForm.patchValue({release_date:t.metadata.release_date}),this.form.patchValue(e)}},{key:"insideAdmin",value:function(){return this.router.url.indexOf("admin")>-1}},{key:"shouldShowDurationField",value:function(){var t=this.form.get("url").value;return!t||Object(fe.a)(t)}}]),e}()).\u0275fac=function(t){return new(t||Pn)(m.Pb(g.f),m.Pb(v.a),m.Pb(ve.a),m.Pb(xt.b),m.Pb(wt.a),m.Pb(Pe),m.Pb(k.a),m.Pb(_e.c),m.Pb(s.e),m.Pb(h.a),m.Pb(m.h),m.Pb(J.a))},Pn.\u0275cmp=m.Jb({type:Pn,selectors:[["track-form"]],inputs:{track:"track",uploadQueueItem:"uploadQueueItem",albumForm:"albumForm",number:"number"},outputs:{canceled:"canceled",saved:"saved"},features:[m.Bb],ngContentSelectors:On,decls:2,vars:3,consts:[["class","many-inputs",3,"formGroup","ngSubmit",4,"ngIf"],[1,"many-inputs",3,"formGroup","ngSubmit"],[3,"upload",4,"ngIf"],["class","inline-form",3,"formGroup",4,"ngIf"],[1,"full-form"],[1,"full-form-container"],[1,"left-column"],["formControlName","image","diskPrefix","track_image",3,"defaultBackground"],["mat-flat-button","","color","accent","type","button",1,"left-column-action-button",3,"click"],["trans","",4,"ngIf"],[1,"many-inputs","fields-container"],["class","input-container",4,"ngIf"],["formControlName","album",3,"id",4,"ngIf"],["formControlName","artists",3,"error","id"],[1,"input-container"],["trans","",3,"for"],["type","number","formControlName","duration","min","1","required","",3,"id"],["class","error",4,"ngIf"],["placeholder","+Add genre","formControlName","genres",3,"id","suggestFn"],["placeholder","+Add tag","formControlName","tags",3,"id","suggestFn"],["type","text","formControlName","description","minlength","10","maxlength","999","rows","5",3,"id"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled",4,"ngIf"],["type","button","mat-button","","trans","",3,"click",4,"ngIf"],[3,"upload"],[1,"inline-form",3,"formGroup"],["trans","",1,"hidden",3,"for"],["type","text","formControlName","name","required","",3,"id"],[1,"actions"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","delete"],["trans",""],[1,"error"],["formControlName","album",3,"id"],["type","text","formControlName","youtube_id","minlength","1","maxlength","30",3,"id"],["type","url","formControlName","url","minlength","1","maxlength","191",3,"id"],["for","track-spotify-id","trans",""],["type","text","id","track-spotify-id","formControlName","spotify_id","minlength","22","maxlength","22"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["type","button","mat-button","","trans","",3,"click"]],template:function(t,e){1&t&&(m.mc(),m.Hc(0,Cn,39,33,"form",0),m.hc(1,"async")),2&t&&m.nc("ngIf",m.ic(1,1,e.errors$))},directives:[c.o,g.D,g.t,g.k,P.a,g.s,g.i,O.b,Se,C.a,g.x,g.c,g.A,Ot.a,g.o,g.n,Be,_.a,an],pipes:[c.b],styles:["[_nghost-%COMP%]{display:block}.inline-form[_ngcontent-%COMP%]{display:flex}.inline-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-shrink:0;color:var(--be-secondary-text);margin-left:20px}.full-form[_ngcontent-%COMP%]{overflow:hidden}.full-form-container[_ngcontent-%COMP%]{display:flex}.full-form-container.inside-album[_ngcontent-%COMP%]{margin:25px 100px 0 60px}.fields-container[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:20px;min-width:0}.cdk-drag-handle[_ngcontent-%COMP%]{flex-shrink:0;color:var(--be-secondary-text);margin-right:20px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}track-upload-header[_ngcontent-%COMP%]{margin-bottom:15px}.drag-handle[_ngcontent-%COMP%]{cursor:move}.left-column-action-button[_ngcontent-%COMP%]{margin-top:15px;width:100%;line-height:40px}@media only screen and (max-width:768px){.full-form-container[_ngcontent-%COMP%]{display:block}.left-column[_ngcontent-%COMP%]{max-width:220px;margin:auto auto 25px}.fields-container[_ngcontent-%COMP%]{margin-left:0}}"],data:{animation:[be.g.bodyExpansion]},changeDetection:0}),Pn);function Un(t,e){if(1&t&&(m.Vb(0,"div",24),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.name)}}function Vn(t,e){if(1&t&&(m.Vb(0,"div",24),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.release_date)}}function In(t,e){if(1&t&&(m.Vb(0,"div",24),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.description)}}function wn(t,e){if(1&t&&(m.Vb(0,"div",24),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.genres)}}function Dn(t,e){if(1&t&&(m.Vb(0,"div",24),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.errors.tags)}}function Mn(t,e){1&t&&(m.Vb(0,"div",6),m.Vb(1,"label",25),m.Jc(2,"Spotify ID"),m.Ub(),m.Qb(3,"input",26),m.Ub())}function An(t,e){if(1&t){var n=m.Wb();m.Vb(0,"track-form",30),m.cc("canceled",function(){m.yc(n);var t=m.gc().$implicit;return m.gc().trackRemoved(t)}),m.Vb(1,"button",31),m.Qb(2,"mat-icon",32),m.Ub(),m.Ub()}if(2&t){var i=m.gc(),a=i.$implicit,r=i.index,o=m.gc();m.nc("albumForm",o.form)("track",a)("number",r+1)}}function Fn(t,e){if(1&t){var n=m.Wb();m.Vb(0,"track-form",33),m.cc("canceled",function(){m.yc(n);var t=m.gc().$implicit;return m.gc().trackRemoved(t)}),m.Vb(1,"button",31),m.Qb(2,"mat-icon",32),m.Ub(),m.Ub()}if(2&t){var i=m.gc(),a=i.$implicit,r=i.index,o=m.gc();m.nc("albumForm",o.form)("uploadQueueItem",a)("number",r+1)}}function Jn(t,e){if(1&t&&(m.Vb(0,"li",27),m.Hc(1,An,3,3,"track-form",28),m.Hc(2,Fn,3,3,"track-form",29),m.Ub()),2&t){var n=e.$implicit;m.Db(1),m.nc("ngIf",n.model_type),m.Db(1),m.nc("ngIf",!n.model_type)}}var $n,Sn,Tn,Qn,Hn=function(){return["music.update"]},jn=((Qn=function(){function t(e,n,i,a,r,o,c,s,d,b,p,f){var g=this;l(this,t),this.fb=e,this.uploadQueue=n,this.albums=i,this.cd=a,this.currentUser=r,this.modal=o,this.toast=c,this.audioValidator=s,this.settings=d,this.search=b,this.router=p,this.waveform=f,this.uploadButtonConfig={multiple:!0,types:[me.a.audio,me.a.video]},this.confirmCancel=!0,this.canceled=new m.n,this.saved=new m.n,this.errors={},this.loading$=new u.a(!1),this.allTracks$=new u.a([]),this.form=this.fb.group({name:[""],image:[""],artists:[[]],release_date:[(new Date).toISOString().slice(0,10)],description:[""],spotify_id:[""],tags:[[]],genres:[[]]}),this.trackByFn=function(t,e){return e.id},this.suggestTagFn=function(t){return g.search.media(t,{types:["tag"],limit:5}).pipe(Object(F.a)(function(t){return t.results.tags.map(function(t){return t.name})}))},this.suggestGenreFn=function(t){return g.search.media(t,{types:[yt.a],limit:5}).pipe(Object(F.a)(function(t){return t.results.genres.map(function(t){return t.name})}))}}return d(t,[{key:"ngOnInit",value:function(){var t=this;if(this.insideAdmin=this.router.url.includes("admin"),this.allTracks$=new u.a([].concat(e(this.album?this.album.tracks:[]),e(this.onlyValidUploads(this.uploadQueue.uploads$.value)))),this.uploadQueue.uploadsAdded$.subscribe(function(n){t.allTracks$.next([].concat(e(t.allTracks$.value),e(t.onlyValidUploads(n))))}),this.album){var n=Object.assign(Object.assign({},this.album),{tags:this.album.tags.map(function(t){return t.name}),genres:this.album.genres.map(function(t){return t.display_name||t.name})});this.form.patchValue(n)}else this.artist?this.form.get("artists").setValue([this.artist]):this.currentUser.canAttachMusicToAnyArtist()||this.form.get("artists").setValue([this.currentUser.get("artists")[0]||this.currentUser.artistPlaceholder()])}},{key:"onlyValidUploads",value:function(t){return t.filter(function(t){return!t.error$.value})}},{key:"reorderTracks",value:function(t){var e=this.allTracks$.value;Object(ue.g)(e,t.previousIndex,t.currentIndex),this.allTracks$.next(e)}},{key:"submit",value:function(){var t=this;if(this.trackForms.some(function(t){return t.isUploading()}))this.toast.open("Some tracks are still uploading or failed to upload.");else{this.loading$.next(!0);var e=Object.assign(Object.assign({},this.form.value),{tracks:this.trackForms.map(function(t){return t.getPayload()})});e.artists=e.artists.map(function(t){return"number"!=typeof t?t.id:t}),(this.album?this.albums.update(this.album.id,e):this.albums.create(e)).pipe(Object(b.a)(function(){return t.loading$.next(!1)})).subscribe(function(e){t.form.markAsPristine(),t.trackForms.forEach(function(t){return t.form.markAsPristine()}),t.toast.open("Album saved."),t.uploadQueue.reset(),t.saved.emit(e.album)},function(e){t.errors=e.errors,Object(he.a)(t.errors,"track-form"),t.cd.markForCheck()})}}},{key:"maybeCancel",value:function(){var t=this;this.confirmCancel?this.modal.show(Vt.a,{title:"Delete Album",body:"Are you sure you want to cancel all uploads and delete this album?",ok:"Delete"}).beforeClosed().subscribe(function(e){e&&(t.form.reset(),t.uploadQueue.reset(),t.canceled.emit())}):this.canceled.emit()}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t,{uri:"uploads",httpParams:{autoMatchAlbum:!1,diskPrefix:"track_media",disk:"public"},validator:this.audioValidator}).subscribe(function(t){var n=e.uploadQueue.find(t.queueItemId),i=e.trackForms.find(function(e){var n;return(null===(n=e.uploadQueueItem)||void 0===n?void 0:n.id)===t.queueItemId}).form;e.waveform.generate(n.uploadedFile.native).then(function(t){i.patchValue({waveData:t}),n.finishProcessing()}),i.markAsDirty()},function(){return e.toast.open("Could not upload tracks.")})}},{key:"trackRemoved",value:function(t){var e=this.allTracks$.value.filter(function(e){return e.id!==t.id});this.allTracks$.next(e)}}]),t}()).\u0275fac=function(t){return new(t||Qn)(m.Pb(g.f),m.Pb(k.a),m.Pb(Dt.a),m.Pb(m.h),m.Pb(v.a),m.Pb(wt.a),m.Pb(xt.b),m.Pb(Pe),m.Pb(h.a),m.Pb(J.a),m.Pb(s.e),m.Pb(_e.c))},Qn.\u0275cmp=m.Jb({type:Qn,selectors:[["album-form"]],viewQuery:function(t,e){var n;1&t&&m.Pc(_n,1),2&t&&m.uc(n=m.dc())&&(e.trackForms=n)},inputs:{album:"album",artist:"artist",confirmCancel:"confirmCancel"},outputs:{canceled:"canceled",saved:"saved"},decls:42,vars:20,consts:[[3,"formGroup","ngSubmit"],[1,"main-info-fields"],[1,"left-column"],["formControlName","image","diskPrefix","album"],["mat-flat-button","","color","accent","type","button","trans","",1,"upload-tracks-button",3,"uploadButton","filesSelected"],[1,"text-fields-container","many-inputs"],[1,"input-container"],["for","album-form-name","trans",""],["type","text","id","album-form-name","formControlName","name","required","",3,"readOnly"],["class","error",4,"ngIf"],["for","album-form-release_date","trans",""],["type","date","placeholder","YYYY-MM-DD","id","album-form-release_date","formControlName","release_date","required",""],["id","album-form-artists","formControlName","artists",3,"error"],["for","album-form-description","trans",""],["type","text","id","album-form-description","formControlName","description","minlength","10","maxlength","250","rows","5"],["for","album-form-genres","trans",""],["placeholder","+Add genre","id","album-form-genres","formControlName","genres",3,"suggestFn"],["for","album-form-tags","trans",""],["placeholder","+Add tag","id","album-form-tags","formControlName","tags",3,"suggestFn"],["class","input-container",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["type","button","mat-button","","trans","",3,"click"],["cdkDropList","",1,"track-list","unstyled-list",3,"cdkDropListDropped"],["class","track-list-item","cdkDrag","",4,"ngFor","ngForOf","ngForTrackBy"],[1,"error"],["for","album-spotify-id","trans",""],["type","text","id","album-spotify-id","formControlName","spotify_id","minlength","22","maxlength","22"],["cdkDrag","",1,"track-list-item"],[3,"albumForm","track","number","canceled",4,"ngIf"],[3,"albumForm","uploadQueueItem","number","canceled",4,"ngIf"],[3,"albumForm","track","number","canceled"],["mat-icon-button","","cdkDragHandle","","type","button"],["svgIcon","drag-handle"],[3,"albumForm","uploadQueueItem","number","canceled"]],template:function(t,e){1&t&&(m.Vb(0,"form",0),m.cc("ngSubmit",function(){return e.submit()}),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Qb(3,"upload-image-control",3),m.Vb(4,"button",4),m.cc("filesSelected",function(t){return e.uploadFiles(t)}),m.Jc(5,"Upload Tracks"),m.Ub(),m.Ub(),m.Vb(6,"div",5),m.Vb(7,"div",6),m.Vb(8,"label",7),m.Jc(9,"Name"),m.Ub(),m.Qb(10,"input",8),m.Hc(11,Un,2,1,"div",9),m.Ub(),m.Vb(12,"div",6),m.Vb(13,"label",10),m.Jc(14,"Release Date"),m.Ub(),m.Qb(15,"input",11),m.Hc(16,Vn,2,1,"div",9),m.Ub(),m.Qb(17,"track-artist-control",12),m.Vb(18,"div",6),m.Vb(19,"label",13),m.Jc(20,"Description"),m.Ub(),m.Qb(21,"textarea",14),m.Hc(22,In,2,1,"div",9),m.Ub(),m.Vb(23,"div",6),m.Vb(24,"label",15),m.Jc(25,"Genres"),m.Ub(),m.Qb(26,"chip-input",16),m.Hc(27,wn,2,1,"div",9),m.Ub(),m.Vb(28,"div",6),m.Vb(29,"label",17),m.Jc(30,"Tags"),m.Ub(),m.Qb(31,"chip-input",18),m.Hc(32,Dn,2,1,"div",9),m.Ub(),m.Hc(33,Mn,4,0,"div",19),m.Vb(34,"button",20),m.hc(35,"async"),m.Jc(36,"Save"),m.Ub(),m.Vb(37,"button",21),m.cc("click",function(){return e.maybeCancel()}),m.Jc(38,"Cancel"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(39,"ul",22),m.cc("cdkDropListDropped",function(t){return e.reorderTracks(t)}),m.Hc(40,Jn,3,2,"li",23),m.hc(41,"async"),m.Ub()),2&t&&(m.nc("formGroup",e.form),m.Db(4),m.nc("uploadButton",e.uploadButtonConfig),m.Db(6),m.nc("readOnly",e.album&&!e.currentUser.hasPermissions(m.qc(19,Hn))),m.Db(1),m.nc("ngIf",e.errors.name),m.Db(5),m.nc("ngIf",e.errors.release_date),m.Db(1),m.nc("error",e.errors.artists),m.Db(5),m.nc("ngIf",e.errors.description),m.Db(4),m.nc("suggestFn",e.suggestGenreFn),m.Db(1),m.nc("ngIf",e.errors.genres),m.Db(4),m.nc("suggestFn",e.suggestTagFn),m.Db(1),m.nc("ngIf",e.errors.tags),m.Db(1),m.nc("ngIf",e.insideAdmin&&e.settings.get("spotify_is_setup")),m.Db(1),m.nc("disabled",m.ic(35,15,e.loading$)),m.Db(6),m.nc("ngForOf",m.ic(41,17,e.allTracks$))("ngForTrackBy",e.trackByFn))},directives:[g.D,g.t,g.k,P.a,g.s,g.i,O.b,C.a,U.a,g.c,g.A,c.o,Se,g.o,g.n,Ot.a,ue.d,c.n,ue.a,_n,ue.b,_.a],pipes:[c.b],styles:["[_nghost-%COMP%]{display:block;padding:25px}.main-info-fields[_ngcontent-%COMP%]{display:flex}.text-fields-container[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:20px}.track-list[_ngcontent-%COMP%]{margin-top:30px;padding:0 15px}.track-list-item[_ngcontent-%COMP%]:not(.cdk-drag-preview){border-bottom:1px solid var(--be-divider-lighter);padding-bottom:15px;margin-bottom:15px}.upload-tracks-button[_ngcontent-%COMP%]{margin-top:15px;width:100%;line-height:40px}@media only screen and (max-width:768px){[_nghost-%COMP%]{padding:10px}.track-list[_ngcontent-%COMP%]{padding:0}.main-info-fields[_ngcontent-%COMP%]{display:block}.left-column[_ngcontent-%COMP%]{max-width:220px;margin:auto auto 25px}.text-fields-container[_ngcontent-%COMP%]{margin-left:0}}"],changeDetection:0}),Qn),En=((Tn=function(){function t(e,n,i,a){l(this,t),this.route=e,this.router=n,this.settings=i,this.urls=a}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe(function(e){e.api&&(t.album=e.api.album)}),this.route.queryParams.subscribe(function(e){e.artist&&(t.artist=JSON.parse(atob(e.artist)))})}},{key:"toAlbumsPage",value:function(){this.router.url.includes("admin")?this.router.navigate(this.artist?this.urls.editArtist(this.artist.id,!0):["/admin/albums"]):this.router.navigate(["/"])}},{key:"canDeactivate",value:function(){return!this.albumForm.form.dirty&&!this.albumForm.trackForms.some(function(t){return t.form.dirty})}}]),t}()).\u0275fac=function(t){return new(t||Tn)(m.Pb(s.a),m.Pb(s.e),m.Pb(h.a),m.Pb(Ct.a))},Tn.\u0275cmp=m.Jb({type:Tn,selectors:[["crupdate-album-page"]],viewQuery:function(t,e){var n;1&t&&m.Pc(jn,3),2&t&&m.uc(n=m.dc())&&(e.albumForm=n.first)},features:[m.Cb([k.a])],decls:1,vars:3,consts:[[1,"material-panel",3,"album","artist","confirmCancel","canceled","saved"]],template:function(t,e){1&t&&(m.Vb(0,"album-form",0),m.cc("canceled",function(){return e.toAlbumsPage()})("saved",function(){return e.toAlbumsPage()}),m.Ub()),2&t&&m.nc("album",e.album)("artist",e.artist)("confirmCancel",!1)},directives:[jn],styles:[""],changeDetection:0}),Tn),qn=((Sn=function(){function t(e){l(this,t),this.modal=e}return d(t,[{key:"canDeactivate",value:function(t){return!!t.canDeactivate()||this.modal.show(Vt.a,{title:"Unsaved Changes",body:"You have unsaved changes. Do you want to discard them?",ok:"Discard"}).beforeClosed()}}]),t}()).\u0275fac=function(t){return new(t||Sn)(m.Zb(wt.a))},Sn.\u0275prov=m.Lb({token:Sn,factory:Sn.\u0275fac,providedIn:"root"}),Sn),Rn=(($n=function(){function t(e,n,i){l(this,t),this.route=e,this.router=n,this.settings=i}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe(function(e){e.api&&(t.track=e.api.track)})}},{key:"toTracksPage",value:function(){this.insideAdmin()?this.router.navigate(["/admin/tracks"]):this.router.navigate(["/"])}},{key:"canDeactivate",value:function(){return!this.trackForm.form.dirty}},{key:"insideAdmin",value:function(){return this.router.url.includes("admin")}}]),t}()).\u0275fac=function(t){return new(t||$n)(m.Pb(s.a),m.Pb(s.e),m.Pb(h.a))},$n.\u0275cmp=m.Jb({type:$n,selectors:[["crupdate-track-page"]],viewQuery:function(t,e){var n;1&t&&m.Pc(_n,3),2&t&&m.uc(n=m.dc())&&(e.trackForm=n.first)},decls:1,vars:1,consts:[[1,"material-panel",3,"track","canceled","saved"]],template:function(t,e){1&t&&(m.Vb(0,"track-form",0),m.cc("canceled",function(){return e.toTracksPage()})("saved",function(){return e.toTracksPage()}),m.Ub()),2&t&&m.nc("track",e.track)},directives:[_n],styles:[""],changeDetection:0}),$n),zn=r("MFV3"),Nn=r("sgCb");function Ln(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(Ut.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,a,r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a=t,new Promise(function(t){Bn(a.createReader(),t)});case 2:i=n.sent,n.t0=regeneratorRuntime.keys(i);case 4:if((n.t1=n.t0()).done){n.next=19;break}if(r=n.t1.value,!(o=i[r]).isDirectory){n.next=12;break}return n.next=10,Ln(o,e);case 10:n.next=17;break;case 12:return n.t2=e,n.next=15,Kn(o);case 15:n.t3=n.sent,n.t2.push.call(n.t2,n.t3);case 17:n.next=4;break;case 19:return n.abrupt("return",e);case 20:case"end":return n.stop()}},n)}))}function Bn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.readEntries(function(i){i.length?(n=n.concat(i),Bn(t,e,n)):e(n)})}function Kn(t){return new Promise(function(e){t.file(function(n){e(new Nn.a(n,t.fullPath))})})}var Gn,Wn=((Gn=function(){function t(e){l(this,t),this.el=e,this.disableDropzoneClick=!1,this.disableDropzone=!1,this.uploadConfig={},this.filesDropped=new m.n}return d(t,[{key:"ngOnInit",value:function(){var t=this,e=this.el.nativeElement;e.addEventListener("dragenter",function(e){return t.handleDragEnter(e)}),e.addEventListener("dragover",function(e){return t.handleDragOver(e)}),e.addEventListener("dragleave",function(e){return t.handleDragLeave(e)}),e.addEventListener("drop",function(e){return t.handleDrop(e)}),this.disableDropzoneClick||(this.clickButton?this.clickButton.nativeElement:e).addEventListener("click",function(){return t.handleClick()})}},{key:"ngOnDestroy",value:function(){this.removeClassesFromDropzone()}},{key:"handleClick",value:function(){var t=this;this.disableDropzone||Object(pe.a)(this.uploadConfig).then(function(e){t.emitUploadEvent(e)})}},{key:"handleDragEnter",value:function(t){this.dropzoneDisabled(t)||this.el.nativeElement.classList.add("file-over-dropzone")}},{key:"handleDragOver",value:function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect=this.dropzoneDisabled(t)?"none":"move",!1}},{key:"handleDragLeave",value:function(t){var e=document.elementFromPoint(t.clientX,t.clientY);this.el.nativeElement.contains(e)||this.removeClassesFromDropzone()}},{key:"handleDrop",value:function(t){return Object(Ut.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),this.removeClassesFromDropzone(),!this.dropzoneDisabled(t)&&t.dataTransfer.items){e.next=2;break}return e.abrupt("return");case 2:if(n=Array.from(t.dataTransfer.items).filter(function(t){return"file"===t.kind}).map(function(t){return t.webkitGetAsEntry()}),e.t0=n.length,!e.t0){e.next=10;break}return e.t1=this,e.next=8,function(t){return Object(Ut.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=20;break}if(i=e.t1.value,!(a=t[i]).isDirectory){e.next=13;break}return e.t2=n,e.next=9,Ln(a);case 9:e.t3=e.sent,n=e.t2.concat.call(e.t2,e.t3),e.next=18;break;case 13:return e.t4=n,e.next=16,Kn(a);case 16:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 18:e.next=2;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e)}))}(n);case 8:e.t2=e.sent,e.t1.emitUploadEvent.call(e.t1,e.t2);case 10:case"end":return e.stop()}},e,this)}))}},{key:"emitUploadEvent",value:function(t){this.filesDropped.emit(t)}},{key:"removeClassesFromDropzone",value:function(){this.el.nativeElement.classList.remove("file-over-dropzone")}},{key:"dropzoneDisabled",value:function(t){var e=t.dataTransfer.types.find(function(t){return"files"===t.toLowerCase()});return this.disableDropzone||!e}}]),t}()).\u0275fac=function(t){return new(t||Gn)(m.Pb(m.l))},Gn.\u0275dir=m.Kb({type:Gn,selectors:[["","fileDropzone",""]],inputs:{disableDropzoneClick:"disableDropzoneClick",disableDropzone:"disableDropzone",clickButton:"clickButton",uploadConfig:["fileDropzone","uploadConfig"]},outputs:{filesDropped:"filesDropped"}}),Gn),Xn=r("IvAZ"),Yn=r("EO6T"),Zn=["trackLinkInput"];function ti(t,e){if(1&t&&(m.Vb(0,"mat-chip",23),m.Jc(1),m.Ub()),2&t){var n=m.gc();m.Db(1),m.Kc(n.media.genres[0].name)}}var ei,ni=((ei=function(){function t(e,n){l(this,t),this.settings=e,this.urls=n}return d(t,[{key:"ngOnInit",value:function(){var t=this;setTimeout(function(){t.trackLinkInput.nativeElement.focus(),t.trackLinkInput.nativeElement.select()})}},{key:"mediaLink",value:function(){return this.isTrack(this.media)?this.urls.track(this.media):this.urls.album(this.media)}},{key:"mediaUrl",value:function(){return this.urls.routerLinkToUrl(this.mediaLink())}},{key:"shareUsing",value:function(t){Object(Yn.a)(t,this.mediaUrl())}},{key:"isTrack",value:function(t){return t.model_type===Xn.a}}]),t}()).\u0275fac=function(t){return new(t||ei)(m.Pb(h.a),m.Pb(Ct.a))},ei.\u0275cmp=m.Jb({type:ei,selectors:[["uploaded-media-preview"]],viewQuery:function(t,e){var n;1&t&&m.Pc(Zn,3),2&t&&m.uc(n=m.dc())&&(e.trackLinkInput=n.first)},hostAttrs:[1,"material-panel"],inputs:{media:"media"},decls:32,vars:14,consts:[[1,"media-image-container"],[3,"media"],["alt","album border image",1,"album-border-image",3,"src"],[1,"middle-column"],[1,"artist-name"],[1,"track-name"],[1,"genre-row"],["class","track-genre",4,"ngIf"],[1,"message"],["trans",""],["trans","",3,"routerLink"],[1,"right-column"],["trans","",1,"title"],[1,"share-icons"],["mat-icon-button","",3,"click"],["alt","facebook-icon",3,"src"],["alt","twitter-icon",3,"src"],["alt","tumblr-icon",3,"src"],["alt","blogger-icon",3,"src"],[1,"track-link-input","input-container"],["for","media-item-link","trans","",1,"hidden"],["id","media-item-link","type","text","readonly","",3,"value","click"],["trackLinkInput",""],[1,"track-genre"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Qb(1,"media-image",1),m.Qb(2,"img",2),m.Ub(),m.Vb(3,"div",3),m.Vb(4,"div",4),m.Jc(5),m.Ub(),m.Vb(6,"div",5),m.Jc(7),m.Ub(),m.Vb(8,"div",6),m.Hc(9,ti,2,1,"mat-chip",7),m.Ub(),m.Vb(10,"div",8),m.Vb(11,"span",9),m.Jc(12,"Upload complete."),m.Ub(),m.Vb(13,"a",10),m.Jc(14," View now."),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"div",11),m.Vb(16,"div",12),m.Jc(17),m.Ub(),m.Vb(18,"div",13),m.Vb(19,"button",14),m.cc("click",function(){return e.shareUsing("facebook")}),m.Qb(20,"img",15),m.Ub(),m.Vb(21,"button",14),m.cc("click",function(){return e.shareUsing("twitter")}),m.Qb(22,"img",16),m.Ub(),m.Vb(23,"button",14),m.cc("click",function(){return e.shareUsing("tumblr")}),m.Qb(24,"img",17),m.Ub(),m.Vb(25,"button",14),m.cc("click",function(){return e.shareUsing("blogger")}),m.Qb(26,"img",18),m.Ub(),m.Ub(),m.Vb(27,"div",19),m.Vb(28,"label",20),m.Jc(29,"Media link"),m.Ub(),m.Vb(30,"input",21,22),m.cc("click",function(t){return t.target.select()}),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Hb("show-album-border",!e.isTrack(e.media)),m.Db(1),m.nc("media",e.media),m.Db(1),m.nc("src",e.settings.getAssetUrl("images/album-border.png"),m.Bc),m.Db(3),m.Kc(e.media.artists[0].name),m.Db(2),m.Kc(e.media.name),m.Db(2),m.nc("ngIf",e.media.genres.length),m.Db(4),m.nc("routerLink",e.mediaLink()),m.Db(4),m.Lc("Share your new ",e.isTrack(e.media)?"track":"album",""),m.Db(3),m.oc("src",e.settings.getAssetUrl("images/social-icons/facebook.png"),m.Bc),m.Db(2),m.oc("src",e.settings.getAssetUrl("images/social-icons/twitter.png"),m.Bc),m.Db(2),m.oc("src",e.settings.getAssetUrl("images/social-icons/tumblr.png"),m.Bc),m.Db(2),m.oc("src",e.settings.getAssetUrl("images/social-icons/bloggr.png"),m.Bc),m.Db(4),m.nc("value",e.mediaUrl()))},directives:[T.a,c.o,C.a,s.h,O.b,we.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;min-width:800px;max-width:100%}.media-image-container[_ngcontent-%COMP%]{flex-shrink:0;width:130px;height:130px}.media-image-container.show-album-border[_ngcontent-%COMP%]{position:relative;margin:15px 15px 15px 20px}.media-image-container.show-album-border[_ngcontent-%COMP%]   .album-border-image[_ngcontent-%COMP%]{display:block}media-image[_ngcontent-%COMP%]     img{position:relative;z-index:2}.album-border-image[_ngcontent-%COMP%]{display:none;position:absolute;width:160px;height:160px;top:-15px;left:-15px;z-index:1}.middle-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:1 1 auto}.middle-column[_ngcontent-%COMP%]{padding:0 20px}.artist-name[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.track-name[_ngcontent-%COMP%]{font-weight:500}.genre-row[_ngcontent-%COMP%]{margin:10px 0 20px}.right-column[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--be-secondary-text);margin-bottom:5px}.right-column[_ngcontent-%COMP%]   .share-icons[_ngcontent-%COMP%]{margin-bottom:30px}.right-column[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-right:5px;width:32px;height:32px;line-height:32px}.right-column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px}"],changeDetection:0}),ei),ii=["clickMatButton"];function ai(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",10),m.Vb(1,"mat-slide-toggle",11),m.cc("change",function(t){return m.yc(n),m.gc().createAlbum$.next(t.checked)}),m.Jc(2,"Make an album when multiple files are selected"),m.Ub(),m.Ub()}}function ri(t,e){if(1&t&&(m.Vb(0,"div",12),m.Vb(1,"span"),m.Jc(2),m.Vb(3,"a",13),m.Jc(4,"Pro accounts"),m.Ub(),m.Jc(5," to get more time and access to advanced features."),m.Ub(),m.Ub()),2&t){var n=e.ngIf;m.Db(2),m.Lc("You have ",n," minutes left. Try ")}}function oi(t,e){if(1&t){var n=m.Wb();m.Vb(0,"album-form",18),m.cc("saved",function(t){return m.yc(n),m.gc(3).addSavedMedia(t)}),m.Ub()}}function ci(t,e){if(1&t){var n=m.Wb();m.Vb(0,"div",20),m.Vb(1,"track-form",21),m.cc("saved",function(t){return m.yc(n),m.gc(5).addSavedMedia(t)}),m.Ub(),m.Ub()}if(2&t){var i=e.$implicit;m.Db(1),m.nc("uploadQueueItem",i)}}function si(t,e){if(1&t&&(m.Tb(0),m.Hc(1,ci,2,1,"div",19),m.Sb()),2&t){var n=m.gc(3).ngIf,i=m.gc();m.Db(1),m.nc("ngForOf",n)("ngForTrackBy",i.trackByFn)}}function li(t,e){if(1&t&&(m.Hc(0,si,2,2,"ng-container",15),m.hc(1,"async")),2&t){var n=m.gc(3);m.nc("ngIf",m.ic(1,1,n.errors$))}}function ui(t,e){if(1&t&&(m.Tb(0),m.Hc(1,oi,1,0,"album-form",16),m.hc(2,"async"),m.Hc(3,li,2,3,"ng-template",null,17,m.Ic),m.Sb()),2&t){var n=m.vc(4),i=m.gc(2);m.Db(1),m.nc("ngIf",m.ic(2,2,i.createAlbum$))("ngIfElse",n)}}function di(t,e){if(1&t&&(m.Vb(0,"div",14),m.Hc(1,ui,5,4,"ng-container",15),m.Ub()),2&t){var n=e.ngIf;m.Db(1),m.nc("ngIf",n.length)}}function bi(t,e){1&t&&m.Qb(0,"uploaded-media-preview",22),2&t&&m.nc("media",e.$implicit)}var pi,mi,fi,gi,hi,vi,yi=[{path:"",redirectTo:"/",pathMatch:"full"},{path:"requests",component:vt},{path:"requests/verify-artist",component:dt},{path:"requests/become-artist",component:dt},{path:"requests/claim-artist",component:dt},{path:"requests/:requestId/request-submitted",component:bt},{path:"upload",component:(mi=function(){function t(e,n,i,a,r,o,c,s){l(this,t),this.track=e,this.currentUser=n,this.uploadQueue=i,this.settings=a,this.tracks=r,this.toast=o,this.audioValidator=c,this.waveGenerator=s,this.errors$=new u.a({}),this.uploadConfig={types:[me.a.video,me.a.audio],multiple:!0},this.savedMedia$=new u.a([]),this.createAlbum$=new u.a(!1),this.trackByFn=function(t,e){return e.id}}return d(t,[{key:"uploadTracks",value:function(t){var e=this;this.uploadQueue.start(t,{uri:"uploads",httpParams:{diskPrefix:"track_media",disk:"public"},validator:this.audioValidator,willProcessFiles:!0,autoMatchAlbum:!this.createAlbum$.value}).subscribe(function(t){var n=e.uploadQueue.find(t.queueItemId);e.waveGenerator.generate(n.uploadedFile.native).then(function(t){n.customData={waveData:t},n.finishProcessing()}),e.albumForm&&!e.albumForm.form.get("name").value&&t.metadata.album_name&&e.albumForm.form.patchValue({name:t.metadata.album_name})})}},{key:"addSavedMedia",value:function(t){this.savedMedia$.next([].concat(e(this.savedMedia$.value),[t]))}}]),t}(),mi.\u0275fac=function(t){return new(t||mi)(m.Pb(ve.a),m.Pb(Mt.a),m.Pb(k.a),m.Pb(h.a),m.Pb(ve.a),m.Pb(xt.b),m.Pb(Pe),m.Pb(_e.c))},mi.\u0275cmp=m.Jb({type:mi,selectors:[["upload-page"]],viewQuery:function(t,e){var n;1&t&&(m.Pc(ii,3,m.l),m.Pc(jn,1),m.Pc(_n,1)),2&t&&(m.uc(n=m.dc())&&(e.clickButton=n.first),m.uc(n=m.dc())&&(e.albumForm=n.first),m.uc(n=m.dc())&&(e.trackForms=n))},features:[m.Cb([k.a])],decls:14,vars:10,consts:[[1,"dropzone",3,"fileDropzone","clickButton","filesDropped"],["trans","",1,"title"],[1,"action-button"],["mat-flat-button","","color","accent","type","button","trans","",1,"upload-button"],["clickMatButton",""],["class","setting-toggle-container",4,"ngIf"],["class","minutes-container",4,"ngIf"],["class","track-upload-queue",4,"ngIf"],[1,"saved-tracks"],[3,"media",4,"ngFor","ngForOf"],[1,"setting-toggle-container"],["trans","",3,"change"],[1,"minutes-container"],["routerLink","/billing/upgrade","target","_blank",1,"hover-underline"],[1,"track-upload-queue"],[4,"ngIf"],["class","material-panel",3,"saved",4,"ngIf","ngIfElse"],["createTracks",""],[1,"material-panel",3,"saved"],["class","track-panel material-panel",4,"ngFor","ngForOf","ngForTrackBy"],[1,"track-panel","material-panel"],[3,"uploadQueueItem","saved"],[3,"media"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.cc("filesDropped",function(t){return e.uploadTracks(t)}),m.Vb(1,"div",1),m.Jc(2,"Drag and drop your tracks, videos & albums here."),m.Ub(),m.Vb(3,"div",2),m.Vb(4,"button",3,4),m.Jc(6," or choose files to upload "),m.Ub(),m.Ub(),m.Hc(7,ai,3,0,"div",5),m.Ub(),m.Hc(8,ri,6,1,"div",6),m.Hc(9,di,2,1,"div",7),m.hc(10,"async"),m.Vb(11,"div",8),m.Hc(12,bi,1,1,"uploaded-media-preview",9),m.hc(13,"async"),m.Ub()),2&t&&(m.nc("fileDropzone",e.uploadConfig)("clickButton",e.clickButton),m.Db(7),m.nc("ngIf",e.uploadQueue.isEmpty()),m.Db(1),m.nc("ngIf",e.currentUser.getRestrictionValue("tracks.create","minutes")),m.Db(1),m.nc("ngIf",m.ic(10,6,e.uploadQueue.uploads$)),m.Db(3),m.nc("ngForOf",m.ic(13,8,e.savedMedia$)))},directives:[Wn,C.a,O.b,c.o,c.n,Lt.a,s.h,jn,_n,ni],pipes:[c.b],styles:["admin[_nghost-%COMP%], admin   [_nghost-%COMP%]{min-height:calc(100vh - 120px)}[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:100%}.dropzone[_ngcontent-%COMP%]{background:var(--be-background);padding:50px;border-radius:4px;text-align:center;border:1px solid var(--be-divider-default);min-width:520px;max-width:90%}.dropzone[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-top:20px}.dropzone[_ngcontent-%COMP%]   .setting-toggle-container[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid var(--be-divider-lighter);font-size:1.3rem}.dropzone[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.8rem}.dropzone[_ngcontent-%COMP%]   .setting-toggle-container[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.dropzone.file-over-dropzone[_ngcontent-%COMP%]{border-color:var(--be-accent-default);background-color:var(--be-accent-emphasis)}.create-artists-toggle[_ngcontent-%COMP%]{margin-top:20px;min-width:520px;text-align:center}.minutes-container[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.5rem;margin-top:20px}.minutes-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--be-accent-default)}.track-upload-queue[_ngcontent-%COMP%]{width:100%;margin-top:40px}.track-panel[_ngcontent-%COMP%]{margin-bottom:20px;padding:20px 25px}uploaded-media-preview[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),mi)},{path:"artists/new",component:oe},{path:"artists/:id/edit",component:oe,resolve:{api:le},canDeactivate:[qn]},{path:"albums/:id/edit",component:En,resolve:{api:(pi=function(){function t(e,n){l(this,t),this.albums=e,this.router=n}return d(t,[{key:"resolve",value:function(t,e){var n=this,i=+t.paramMap.get("id");return this.albums.get(i,{with:["tags","genres","artists","fullTracks"],albumsPerPage:50,forEditing:!0}).pipe(Object(A.a)(function(){return n.router.navigate(["/"]),se.a}),Object(ce.a)(function(t){return t.album?Object(I.a)(t):(n.router.navigate(["/"]),se.a)}))}}]),t}(),pi.\u0275fac=function(t){return new(t||pi)(m.Zb(Dt.a),m.Zb(s.e))},pi.\u0275prov=m.Lb({token:pi,factory:pi.\u0275fac,providedIn:"root"}),pi)},canDeactivate:[qn]},{path:"albums/new",component:En,canDeactivate:[qn]},{path:"tracks/:id/edit",component:Rn,resolve:{api:zn.a},canDeactivate:[qn]},{path:"tracks/new",component:Rn,canDeactivate:[qn]}],ki=((fi=function t(){l(this,t)}).\u0275fac=function(t){return new(t||fi)},fi.\u0275mod=m.Nb({type:fi}),fi.\u0275inj=m.Mb({imports:[[s.i.forChild(yi)],s.i]}),fi),xi=r("gFpt"),Ci=r("6rvT"),Pi=r("fo0W"),Oi=r("GSRO"),_i=r("k3xQ"),Ui=r("mhcW"),Vi=r("X3pI"),Ii=((gi=function t(){l(this,t)}).\u0275fac=function(t){return new(t||gi)},gi.\u0275mod=m.Nb({type:gi}),gi.\u0275inj=m.Mb({imports:[[c.c,$.b,Ui.a,Ci.a,g.m,g.z,_.b,Vi.a,O.c]]}),gi),wi=r("0Gur"),Di=r("1ImS"),Mi=r("zWu1"),Ai=r("5ZHN"),Fi=((hi=function t(){l(this,t)}).\u0275fac=function(t){return new(t||hi)},hi.\u0275mod=m.Nb({type:hi}),hi.\u0275inj=m.Mb({imports:[[c.c,s.i,Ui.a,Ii,_.b,He.b,Ci.a,Oi.a,g.z,g.m,O.c,wi.a,we.e,Lt.b,$t.b,Pi.a,ue.f,Ie.b,$.b,Vi.a,Ai.a]]}),hi),Ji=r("0IaG"),$i=((vi=function t(){l(this,t)}).\u0275fac=function(t){return new(t||vi)},vi.\u0275mod=m.Nb({type:vi}),vi.\u0275inj=m.Mb({imports:[[c.c,ki,Fi,g.z,g.m,Ii,Ci.a,xi.a,O.c,_.b,Lt.b,Oi.a,Pi.a,_i.a,Mi.a,Vi.a,Ji.f,Pt.c,wi.a,Di.a,Ui.a,$t.b]]}),vi)}}])}();
//# sourceMappingURL=7-es5.1797d489213c9f09862c.js.map