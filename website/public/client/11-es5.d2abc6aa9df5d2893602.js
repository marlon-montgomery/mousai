!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var i,a,o=[],c=!0,r=!1;try{for(n=n.call(e);!(c=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);c=!0);}catch(s){r=!0,a=s}finally{try{c||null==n.return||n.return()}finally{if(r)throw a}}return o}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Eh8b:function(i,a,o){"use strict";o.r(a),o.d(a,"AppAppearanceModule",function(){return Kn});var s,l=o("ofXK"),u=o("3Pt+"),b=o("tyNb"),d=o("WAq7"),p=o("+rOU"),h=o("lJxs"),f=o("fXoL"),g=new f.r("APPEARANCE_EDITOR_CONFIG"),m={navigationRoutes:[],menus:{availableRoutes:["login","register","contact","billing/pricing","account-settings","admin/appearance","admin/users","admin/settings/authentication","admin/settings/branding","admin/settings/cache","admin/settings/providers","admin/roles"],positions:["admin-navbar","custom-page-navbar","auth-page-footer"]},sections:[{name:"general",position:1},{name:"themes",position:2},{name:"menus",position:3},{name:"custom-code",position:4},{name:"seo-settings",position:5}]},v=o("OlQx"),y=o("fKqa"),k=function e(t,n){r(this,e),this.route=t,this.queryParams=n,this.type=y.a.Navigate},V=function e(t,n){r(this,e),this.key=t,this.value=n,this.type=y.a.SetConfig},C=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.selector=t,this.index=n,this.type=y.a.Select},x=function e(){r(this,e),this.type=y.a.Deselect},P=function e(t,n){r(this,e),this.key=t,this.value=n,this.type=y.a.SetColors},U=function e(t){r(this,e),this.content=t,this.type=y.a.SetCustomCss},w=function e(t){r(this,e),this.content=t,this.type=y.a.SetCustomHtml},M=o("LFZc"),O=o("2Vo4"),I=o("jtHE"),D=o("xgIS"),$=o("pLZG"),_=o("nYR2"),S=o("w1tV"),J=o("PE4B"),F=o.n(J),T=o("kmQS"),Q=o("LRXf"),A=o("i2dy"),H=((s=function(){function e(t,n,i,a){r(this,e),this.settings=t,this.router=n,this.http=i,this.toast=a,this.activePanel$=new O.a(null),this.defaultSettings={},this.initiated$=new I.a(1),this.loading$=new O.a(!1),this.changes$=new O.a(null)}return c(e,[{key:"addChanges",value:function(e){this.changes$.next(Object.assign(Object.assign({},this.changes$.value),e))}},{key:"openPanel",value:function(e){var t=this.config.sections.find(function(t){return Object(d.a)(t.name)===e});this.activePanel$.next(t),this.navigate(t)}},{key:"init",value:function(e,t,n){var i=this;return Object(D.a)(window,"message").pipe(Object($.a)(function(e){return e.data===M.a&&new URL(e.origin).hostname===window.location.hostname})).subscribe(function(){i.initiated$.next(!0),i.initiated$.complete(),i.activePanel$.value&&i.navigate(i.activePanel$.value)}),t.forEach(function(e){"env"===e.name?i.defaultSettings=Object.assign(Object.assign({},i.defaultSettings),e.value):i.defaultSettings[e.name]=e.value}),this.initConfig(n),this.initIframe(e),this.initiated$}},{key:"saveChanges",value:function(e){var t=this;e&&this.addChanges(e),this.loading$.next(!0);var n=(this.saveRequest?this.saveRequest:function(e){return t.http.post("admin/appearance",e)})(this.changes$.value).pipe(Object(_.a)(function(){return t.loading$.next(!1)}),Object(S.a)());return n.subscribe(function(){t.changes$.next(null),t.toast.open("Appearance saved")}),n}},{key:"setSaveRequest",value:function(e){this.saveRequest=e}},{key:"closeActivePanel",value:function(){this.router.navigate(["/admin/appearance"])}},{key:"navigate",value:function(e){this.postMessage(new k((null==e?void 0:e.route)||this.config.defaultRoute,null==e?void 0:e.queryParams))}},{key:"setConfig",value:function(e,t){this.postMessage(new V(e,t))}},{key:"selectNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&this.postMessage(new C(e,t))}},{key:"deselectNode",value:function(){this.postMessage(new x)}},{key:"postMessage",value:function(e){this.previewWindow.postMessage(e,"*")}},{key:"currentValue",value:function(e){return e.startsWith("env.")||e.startsWith("custom-code.")?this.defaultSettings[e]:this.settings.get(e)}},{key:"initConfig",value:function(e){var t=F.a.all(e);t.sections=t.sections.sort(function(e,t){return e.position>t.position?1:-1}),t.defaultRoute||(t.defaultRoute="/"),this.settings.get("site.has_mobile_app")&&t.menus.positions.push("mobile-app-about"),this.config=t}},{key:"initIframe",value:function(e){var t=this.settings.getBaseUrl()+"/"+this.config.defaultRoute+"?be-preview-mode=".concat(M.a);e.src=function(e){return e.replace(/([^:]\/)\/+/g,"$1")}(t),this.previewWindow=e.contentWindow}}]),e}()).\u0275fac=function(e){return new(e||s)(f.Zb(T.a),f.Zb(b.e),f.Zb(Q.a),f.Zb(A.b))},s.\u0275prov=f.Lb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),N=o("OnlV"),j=o("NFeN"),E=o("Rd8u"),L=o("bTqV"),R=o("Wf9w");function q(e,t){1&e&&f.Qb(0,"mat-icon",9)}function W(e,t){if(1&e&&(f.Vb(0,"span"),f.Hc(1,q,1,0,"mat-icon",7),f.Vb(2,"span",8),f.Jc(3),f.Ub(),f.Ub()),2&e){var n=f.gc(),i=n.first,a=n.last,o=n.$implicit,c=f.gc();f.Db(1),f.nc("ngIf",!i),f.Db(1),f.Hb("last",a),f.Db(1),f.Kc(c.viewName(o))}}function z(e,t){if(1&e&&(f.Tb(0),f.Hc(1,W,4,4,"span",6),f.Sb()),2&e){var n=t.$implicit;f.Db(1),f.nc("ngIf",n)}}var G,K=((G=function(){function e(){r(this,e),this.path=[],this.back=new f.n}return c(e,[{key:"viewName",value:function(e){return Object(R.a)(e).replace(/_/g," ")}}]),e}()).\u0275fac=function(e){return new(e||G)},G.\u0275cmp=f.Jb({type:G,selectors:[["appearance-panel-meta"]],inputs:{path:"path"},outputs:{back:"back"},decls:7,vars:1,consts:[[1,"back-button",3,"click"],["svgIcon","keyboard-arrow-left"],[1,"title"],["trans","",1,"static"],[1,"path"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","keyboard-arrow-right","class","separator",4,"ngIf"],["trans","",1,"name"],["svgIcon","keyboard-arrow-right",1,"separator"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.cc("click",function(){return t.back.emit()}),f.Qb(1,"mat-icon",1),f.Ub(),f.Vb(2,"div",2),f.Vb(3,"div",3),f.Jc(4,"Customizing"),f.Ub(),f.Vb(5,"div",4),f.Hc(6,z,2,1,"ng-container",5),f.Ub(),f.Ub()),2&e&&(f.Db(6),f.nc("ngForOf",t.path))},directives:[j.a,E.a,l.n,l.o],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:70px;margin-bottom:10px;border-bottom:1px solid var(--be-divider-default);background-color:var(--be-background)}.title[_ngcontent-%COMP%]{padding:10px}.path[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.last[_ngcontent-%COMP%]{color:var(--be-accent-default)}.separator[_ngcontent-%COMP%]{vertical-align:middle;color:var(--be-secondary-text);width:18px;height:18px;line-height:18px}"],changeDetection:0}),G),B=o("h586"),Z=o("Lm4C"),X=o("QeDF"),Y=o("oJgS"),ee=o("W5HX"),te=o("8cGs"),ne=o("STbY"),ie=o("gA0O"),ae=o("bv9b");function oe(e,t){1&e&&f.Qb(0,"image-or-icon",11),2&e&&f.nc("src",t.ngIf)}function ce(e,t){1&e&&(f.Vb(0,"div",12),f.Qb(1,"mat-icon",13),f.Vb(2,"span",14),f.Jc(3,"Upload"),f.Ub(),f.Ub())}function re(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",15),f.cc("click",function(){return f.yc(n),f.gc().remove()}),f.Jc(1,"Remove"),f.Ub()}}function se(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",15),f.cc("click",function(){return f.yc(n),f.gc().useDefault()}),f.Jc(1,"Use Default"),f.Ub()}}function le(e,t){1&e&&f.Qb(0,"mat-progress-bar",16)}var ue,be,de,pe,he=["*"],fe=((be=function(){function e(t,n,i,a){r(this,e),this.editor=t,this.uploadQueue=n,this.validator=i,this.settings=a,this.image$=new O.a(null),this.loading$=new O.a(!1),this.validator.showToast=!0}return c(e,[{key:"openModal",value:function(){var e=this,t={uri:this.backendUri||ee.a.Image,httpParams:{diskPrefix:this.diskPrefix},validator:this.validator};Object(Z.a)({types:[X.a.image]}).then(function(n){e.loading$.next(!0),e.uploadQueue.start(n,t).pipe(Object(_.a)(function(){return e.loading$.next(!1)})).subscribe(function(t){e.updateValue(t.fileEntry.url)})})}},{key:"remove",value:function(){this.updateValue(null)}},{key:"useDefault",value:function(){this.updateValue(this.defaultValue)}},{key:"updateValue",value:function(e){this.propagateChange(e),this.image$.next(e?e+"?v=".concat(Object(Y.a)(8)):null)}},{key:"writeValue",value:function(e){this.image$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||be)(f.Pb(H),f.Pb(B.a),f.Pb(te.a),f.Pb(T.a))},be.\u0275cmp=f.Jb({type:be,selectors:[["appearance-image-input"]],hostAttrs:["tabindex","0"],inputs:{defaultValue:"defaultValue",backendUri:"backendUri",diskPrefix:"diskPrefix"},features:[f.Cb([B.a,{provide:u.q,useExisting:be,multi:!0}])],ngContentSelectors:he,decls:18,vars:12,consts:[[1,"field-container",3,"click"],["trans","",1,"label","fake-label"],[1,"img-container"],["class","inherit-size",3,"src",4,"ngIf","ngIfElse"],["noImage",""],[1,"actions-dropdown"],[1,"no-style",3,"matMenuTriggerFor","click"],["svgIcon","settings",1,"trigger-icon"],["actionsMenu",""],["mat-menu-item","","trans","",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"inherit-size",3,"src"],[1,"no-image"],["svgIcon","photo-size-select-actual"],["trans","",1,"text"],["mat-menu-item","","trans","",3,"click"],["mode","indeterminate","color","accent"]],template:function(e,t){if(1&e&&(f.mc(),f.Vb(0,"div",0),f.cc("click",function(){return t.openModal()}),f.Vb(1,"div",1),f.lc(2),f.Ub(),f.Vb(3,"div",2),f.Hc(4,oe,1,1,"image-or-icon",3),f.hc(5,"async"),f.Hc(6,ce,4,0,"ng-template",null,4,f.Ic),f.Vb(8,"div",5),f.Vb(9,"button",6),f.cc("click",function(e){return e.stopPropagation()}),f.Qb(10,"mat-icon",7),f.Ub(),f.Vb(11,"mat-menu",null,8),f.Hc(13,re,2,0,"div",9),f.hc(14,"async"),f.Hc(15,se,2,0,"div",9),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Hc(16,le,1,0,"mat-progress-bar",10),f.hc(17,"async")),2&e){var n=f.vc(7),i=f.vc(12);f.Db(4),f.nc("ngIf",f.ic(5,6,t.image$))("ngIfElse",n),f.Db(5),f.nc("matMenuTriggerFor",i),f.Db(4),f.nc("ngIf",f.ic(14,8,t.image$)),f.Db(2),f.nc("ngIf",t.defaultValue),f.Db(1),f.nc("ngIf",f.ic(17,10,t.loading$))}},directives:[E.a,l.o,ne.c,j.a,ne.d,ie.a,ne.a,ae.a],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block;cursor:pointer;margin-bottom:15px;position:relative}.label[_ngcontent-%COMP%]{margin-bottom:5px}.img-container[_ngcontent-%COMP%]{position:relative;height:80px;padding:5px;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-chip);overflow:hidden}.img-container[_ngcontent-%COMP%], image-or-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}image-or-icon[_ngcontent-%COMP%]{height:100%}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:cover;object-fit:cover}.no-image[_ngcontent-%COMP%]{text-align:center}.no-image[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;color:var(--be-hint-text);width:40px;height:40px}.no-image[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--be-link);margin-top:3px;font-size:1.3rem}.actions-dropdown[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.actions-dropdown[_ngcontent-%COMP%]   .trigger-icon[_ngcontent-%COMP%]{width:20px;height:20px}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}"],changeDetection:0}),be),ge=((ue=function(){function e(t,n){r(this,e),this.el=t,this.editor=n}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.el.nativeElement.addEventListener("focus",function(){e.editor.selectNode(e.selector)}),this.el.nativeElement.addEventListener("blur",function(){e.editor.deselectNode()})}}]),e}()).\u0275fac=function(e){return new(e||ue)(f.Pb(f.l),f.Pb(H))},ue.\u0275dir=f.Kb({type:ue,selectors:[["","highlightInPreview",""]],inputs:{selector:["highlightInPreview","selector"]}}),ue),me=function(){return["General"]},ve=((de=function(){function e(t,n){r(this,e),this.fb=t,this.editor=n,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.app_name":[""],"branding.site_description":[""]})}return c(e,[{key:"ngOnInit",value:function(){var e=this,t={};Object.keys(this.form.controls).forEach(function(n){t[n]=e.editor.currentValue(n)}),this.form.patchValue(t),this.form.valueChanges.subscribe(function(t){e.editor.addChanges(t)})}},{key:"defaultValue",value:function(e){return this.editor.defaultSettings[e]}}]),e}()).\u0275fac=function(e){return new(e||de)(f.Pb(u.f),f.Pb(H))},de.\u0275cmp=f.Jb({type:de,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.app_name","trans",""],["type","text","id","env.app_name","formControlName","env.app_name",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(e,t){1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.editor.closeActivePanel()}),f.Ub(),f.Vb(1,"div",1),f.Vb(2,"appearance-image-input",2),f.Jc(3," Logo #1 (For top navbar) "),f.Ub(),f.Vb(4,"appearance-image-input",3),f.Jc(5," Logo #2 (Everywhere else) "),f.Ub(),f.Vb(6,"appearance-image-input",4),f.Jc(7," Favicon "),f.Ub(),f.Vb(8,"div",5),f.Vb(9,"label",6),f.Jc(10,"Site Name"),f.Ub(),f.Qb(11,"input",7),f.Ub(),f.Vb(12,"div",5),f.Vb(13,"label",8),f.Jc(14,"Site Description"),f.Ub(),f.Qb(15,"textarea",9),f.Ub(),f.Ub()),2&e&&(f.nc("path",f.qc(7,me)),f.Db(1),f.nc("formGroup",t.form),f.Db(1),f.nc("defaultValue",t.defaultValue("branding.logo_light")),f.Db(2),f.nc("defaultValue",t.defaultValue("branding.logo_dark")),f.Db(2),f.nc("defaultValue",t.defaultValue("branding.favicon")),f.Db(5),f.nc("placeholder",t.defaultValue("env.app_name")),f.Db(4),f.nc("placeholder",t.defaultValue("branding.site_description")))},directives:[K,u.t,u.k,fe,u.s,u.i,ge,E.a,u.c],styles:[""],changeDetection:0}),de),ye=o("0IaG"),ke=((pe=function(){function e(t){r(this,e),this.http=t}return c(e,[{key:"all",value:function(){return this.http.get("css-theme")}},{key:"create",value:function(e){return this.http.post("css-theme",e)}},{key:"update",value:function(e,t){return this.http.put("css-theme/".concat(e),t)}},{key:"delete",value:function(e){return this.http.delete("css-theme/".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||pe)(f.Zb(Q.a))},pe.\u0275prov=f.Lb({token:pe,factory:pe.\u0275fac,providedIn:"root"}),pe),Ve=o("1jcm");function Ce(e,t){1&e&&(f.Vb(0,"span",6),f.Jc(1,"Update Theme"),f.Ub())}function xe(e,t){1&e&&(f.Vb(0,"span",6),f.Jc(1,"Create Theme"),f.Ub())}function Pe(e,t){if(1&e&&(f.Vb(0,"div",21),f.Jc(1),f.Ub()),2&e){var n=f.gc().ngIf;f.Db(1),f.Kc(n.name)}}function Ue(e,t){1&e&&(f.Vb(0,"span"),f.Jc(1,"Update"),f.Ub())}function we(e,t){1&e&&(f.Vb(0,"span"),f.Jc(1,"Create"),f.Ub())}function Me(e,t){if(1&e){var n=f.Wb();f.Vb(0,"form",7),f.cc("ngSubmit",function(){return f.yc(n),f.gc().confirm()}),f.Vb(1,"mat-dialog-content",8),f.Vb(2,"div",9),f.Vb(3,"label",10),f.Jc(4,"Name"),f.Ub(),f.Qb(5,"input",11),f.Hc(6,Pe,2,1,"div",12),f.Ub(),f.Vb(7,"div",13),f.Vb(8,"mat-slide-toggle",14),f.Jc(9,"Dark Theme"),f.Ub(),f.Vb(10,"p",6),f.Jc(11,"Whether this theme has light text on dark background."),f.Ub(),f.Ub(),f.Vb(12,"div",13),f.Vb(13,"mat-slide-toggle",15),f.Jc(14,"Default Dark Theme"),f.Ub(),f.Vb(15,"p",6),f.Jc(16,"Whether this theme should be used as default dark theme."),f.Ub(),f.Ub(),f.Vb(17,"div",13),f.Vb(18,"mat-slide-toggle",16),f.Jc(19,"Default Light Theme"),f.Ub(),f.Vb(20,"p",6),f.Jc(21,"Whether this theme should be used as default light theme."),f.Ub(),f.Ub(),f.Ub(),f.Vb(22,"mat-dialog-actions"),f.Vb(23,"button",17),f.cc("click",function(){return f.yc(n),f.gc().close()}),f.Jc(24,"Cancel"),f.Ub(),f.Vb(25,"button",18),f.hc(26,"async"),f.Hc(27,Ue,2,0,"span",19),f.Hc(28,we,2,0,"ng-template",null,20,f.Ic),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=t.ngIf,a=f.vc(29),o=f.gc();f.nc("formGroup",o.form),f.Db(6),f.nc("ngIf",i.name),f.Db(19),f.nc("disabled",f.ic(26,5,o.loading$)),f.Db(2),f.nc("ngIf",o.data.theme)("ngIfElse",a)}}var Oe,Ie,De=((Oe=function(){function e(t,n,i,a,o){var c=this;r(this,e),this.dialogRef=t,this.data=n,this.cssTheme=i,this.toast=a,this.fb=o,this.loading$=new O.a(!1),this.errors$=new O.a({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),n.theme&&this.form.patchValue(n.theme),this.form.get("default_dark").valueChanges.pipe(Object($.a)(function(e){return!!e})).subscribe(function(){c.form.get("default_light").setValue(!1)}),this.form.get("default_light").valueChanges.pipe(Object($.a)(function(e){return!!e})).subscribe(function(){c.form.get("default_dark").setValue(!1)})}return c(e,[{key:"confirm",value:function(){var e=this;(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe(function(t){e.toast.open(e.data.theme?"Theme updated":"Theme created"),e.close(t.theme)},function(t){return e.errors$.next(t.errors)})}},{key:"close",value:function(e){this.dialogRef.close(e)}}]),e}()).\u0275fac=function(e){return new(e||Oe)(f.Pb(ye.g),f.Pb(ye.a),f.Pb(ke),f.Pb(A.b),f.Pb(u.f))},Oe.\u0275cmp=f.Jb({type:Oe,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"h2",1),f.Hc(2,Ce,2,0,"span",2),f.Hc(3,xe,2,0,"span",2),f.Ub(),f.Vb(4,"button",3),f.cc("click",function(){return t.close()}),f.Qb(5,"mat-icon",4),f.Ub(),f.Ub(),f.Hc(6,Me,30,7,"form",5),f.hc(7,"async")),2&e&&(f.Db(2),f.nc("ngIf",t.data.theme),f.Db(1),f.nc("ngIf",!t.data.theme),f.Db(3),f.nc("ngIf",f.ic(7,3,t.errors$)))},directives:[ye.h,l.o,j.a,E.a,u.t,u.k,ye.e,u.c,u.s,u.i,u.A,u.o,Ve.a,ye.c,L.b],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),Oe),$e=o("/RwR"),_e=o("QGXG"),Se=o("FBzJ"),Je=o("mrSG"),Fe=o("JYI4"),Te=o("dz5c"),Qe=o("FKr1"),Ae=["*"],He=((Ie=function(){function e(t){r(this,e),this.overlayPanel=t,this.color$=new O.a(null)}return c(e,[{key:"ngOnDestroy",value:function(){this.pickerSub&&this.pickerSub.unsubscribe()}},{key:"writeValue",value:function(e){this.color$.next(e)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"openColorPicker",value:function(e){return Object(Je.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e(1).then(o.bind(null,"0PT2"));case 2:n=t.sent,i=n.BeColorPickerModule,this.pickerSub=this.overlayPanel.open(i.components.panel,{origin:new f.l(e.target),position:Fe.a,data:{color:this.color$.value}}).valueChanged().subscribe(function(e){a.color$.next(e),a.propagateChange(a.color$.value)});case 5:case"end":return t.stop()}},t,this)}))}}]),e}()).\u0275fac=function(e){return new(e||Ie)(f.Pb(Te.a))},Ie.\u0275cmp=f.Jb({type:Ie,selectors:[["color-picker-input"]],features:[f.Cb([{provide:u.q,useExisting:Ie,multi:!0}])],ngContentSelectors:Ae,decls:7,vars:4,consts:[["type","button","matRipple","",1,"no-style","color-picker-btn",3,"click"],["svgIcon","drop-custom",1,"color-icon"],["trans","",1,"name"],["trans","",1,"change"]],template:function(e,t){1&e&&(f.mc(),f.Vb(0,"button",0),f.cc("click",function(e){return t.openColorPicker(e)}),f.Vb(1,"mat-icon",1),f.hc(2,"async"),f.Ub(),f.Vb(3,"span",2),f.lc(4),f.Ub(),f.Vb(5,"span",3),f.Jc(6,"Change"),f.Ub(),f.Ub()),2&e&&(f.Db(1),f.Ec("color",f.ic(2,2,t.color$)))},directives:[Qe.q,j.a,E.a],pipes:[l.b],styles:[".color-picker-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px 0 15px;margin-bottom:15px;border-radius:4px;border:1px solid var(--be-divider-default);background-color:var(--be-background);cursor:pointer;height:57px;font-size:1.5rem;overflow:hidden;width:100%}.color-picker-btn[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:35px;height:35px}.color-picker-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:3px;margin-top:3px;font-size:1.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;text-transform:capitalize}.color-picker-btn[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem;margin-left:auto}"],changeDetection:0}),Ie);function Ne(e,t){if(1&e&&(f.Vb(0,"li"),f.Vb(1,"color-picker-input",2),f.Jc(2),f.Ub(),f.Ub()),2&e){var n=t.$implicit,i=f.gc();f.Db(1),f.nc("formControlName",n.key),f.Db(1),f.Kc(i.viewName(n.key))}}var je,Ee=((je=function(){function e(t,n){r(this,e),this.editor=t,this.themes=n,this.form=new u.j({}),this.colorCache={}}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach(function(t){var i=n(t,2),a=i[0],o=i[1];e.form.addControl(a,new u.g(o))}),this.editor.initiated$.subscribe(function(){e.setColors(e.theme.colors),e.form.valueChanges.subscribe(function(t){e.setColors(t),e.editor.addChanges({colors:t})})})}},{key:"ngOnDestroy",value:function(){this.editor.setSaveRequest(null)}},{key:"saveColors",value:function(e){return this.themes.update(this.theme.id,e)}},{key:"setColors",value:function(e){var t=this;Object.entries(e).forEach(function(e){var i=n(e,2),a=i[0],o=i[1];t.colorCache[a]!==o&&(t.editor.postMessage(new P(a,o)),t.colorCache[a]=o)})}},{key:"viewName",value:function(e){return e.replace("be-","").replace(/-/g," ")}}]),e}()).\u0275fac=function(e){return new(e||je)(f.Pb(H),f.Pb(ke))},je.\u0275cmp=f.Jb({type:je,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[1,"unstyled-list",3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(e,t){1&e&&(f.Vb(0,"ul",0),f.Hc(1,Ne,3,2,"li",1),f.hc(2,"keyvalue"),f.Ub()),2&e&&(f.nc("formGroup",t.form),f.Db(1),f.nc("ngForOf",f.ic(2,2,t.theme.colors)))},directives:[u.t,u.k,l.n,He,E.a,u.s,u.i],pipes:[l.i],styles:[""],changeDetection:0}),je);function Le(e,t){1&e&&f.Qb(0,"css-theme-colors-panel",5),2&e&&f.nc("theme",t.ngIf)}function Re(e,t){if(1&e){var n=f.Wb();f.Vb(0,"li",9),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).setSelectedTheme(e)}),f.Vb(1,"div",10),f.Jc(2),f.Ub(),f.Vb(3,"div",11),f.cc("click",function(e){return e.stopPropagation()}),f.Vb(4,"button",12),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).setSelectedTheme(e)}),f.Qb(5,"mat-icon",13),f.Ub(),f.Vb(6,"button",12),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).openCrupdateThemeModal(e)}),f.Qb(7,"mat-icon",14),f.Ub(),f.Vb(8,"button",12),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).maybeDeleteThemeModal(e)}),f.Qb(9,"mat-icon",15),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=t.$implicit;f.Db(2),f.Kc(i.name)}}function qe(e,t){if(1&e){var n=f.Wb();f.Vb(0,"button",6),f.cc("click",function(){return f.yc(n),f.gc().openCrupdateThemeModal()}),f.Jc(1,"New Theme"),f.Ub(),f.Vb(2,"ul",7),f.Hc(3,Re,10,1,"li",8),f.hc(4,"async"),f.Ub()}if(2&e){var i=f.gc();f.Db(3),f.nc("ngForOf",f.ic(4,1,i.loadedThemes$))}}var We,ze,Ge,Ke=((We=function(){function e(t,n,i,a,o,c){r(this,e),this.appearance=t,this.modal=n,this.themes=i,this.toast=a,this.router=o,this.route=c,this.loading$=new O.a(!1),this.loadedThemes$=new O.a([]),this.selectedTheme$=new O.a(null),this.path$=this.selectedTheme$.pipe(Object(h.a)(function(e){var t=["Themes"];return e&&t.push(e.name),t}))}return c(e,[{key:"ngOnInit",value:function(){this.reloadThemes()}},{key:"ngOnDestroy",value:function(){this.querySub&&this.querySub.unsubscribe()}},{key:"openCrupdateThemeModal",value:function(e){var t=this;this.modal.open(De,{theme:e}).afterClosed().subscribe(function(e){e&&t.reloadThemes()})}},{key:"setSelectedTheme",value:function(e){this.router.navigate([],{queryParams:{theme:e&&e.id},queryParamsHandling:"merge"})}},{key:"openPreviousPanel",value:function(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}},{key:"maybeDeleteThemeModal",value:function(e){var t=this;this.modal.show($e.a,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe(function(n){n&&t.deleteTheme(e)})}},{key:"reloadThemes",value:function(){var e=this;this.loading$.next(!0),this.themes.all().pipe(Object(_.a)(function(){return e.loading$.next(!1)})).subscribe(function(t){e.loadedThemes$.next(t.pagination.data),e.bindToQueryParams()})}},{key:"deleteTheme",value:function(e){var t=this;this.themes.delete([e.id]).subscribe(function(){t.toast.open("Theme deleted"),t.reloadThemes()})}},{key:"bindToQueryParams",value:function(){var e=this;this.querySub||(this.querySub=this.route.queryParams.subscribe(function(t){var n=e.loadedThemes$.value.find(function(e){return e.id===+t.theme});e.selectedTheme$.next(n)}))}}]),e}()).\u0275fac=function(e){return new(e||We)(f.Pb(H),f.Pb(_e.a),f.Pb(ke),f.Pb(A.b),f.Pb(b.e),f.Pb(b.a))},We.\u0275cmp=f.Jb({type:We,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],[1,"unstyled-list"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.openPreviousPanel()}),f.hc(1,"async"),f.Ub(),f.Vb(2,"div",1),f.Hc(3,Le,1,1,"css-theme-colors-panel",2),f.hc(4,"async"),f.Hc(5,qe,5,3,"ng-template",null,3,f.Ic),f.Ub(),f.Qb(7,"loading-indicator",4),f.hc(8,"async")),2&e){var n=f.vc(6);f.nc("path",f.ic(1,4,t.path$)),f.Db(3),f.nc("ngIf",f.ic(4,6,t.selectedTheme$))("ngIfElse",n),f.Db(4),f.nc("isVisible",f.ic(8,8,t.loading$))}},directives:[K,l.o,Se.a,Ee,L.b,E.a,l.n,j.a],pipes:[l.b],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),We),Be=o("WvtK"),Ze=o("5+WD"),Xe=o("f9yG"),Ye=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in r(this,e),this.type="link",this.condition=null,this.target=null,this.activeExact=!1,t)this[n]=t[n];this.id=Math.floor(999*Math.random())},et=((ze=function(){function e(t,n){r(this,e),this.settings=t,this.appearance=n,this.allMenus$=new O.a([]),this.activeMenu$=new O.a(null)}return c(e,[{key:"create",value:function(){var e=t(this.allMenus$.value);this.activeMenu$.next(new Xe.a({name:"New Menu"})),e.push(this.activeMenu$.value),this.allMenus$.next(e),this.commitChanges()}},{key:"reorderActiveMenuItems",value:function(e,t){var n=Object.assign({},this.activeMenu$.value);Object(Ze.g)(n.items,e,t),this.activeMenu$.next(n),this.commitChanges()}},{key:"deleteActive",value:function(){var e=t(this.allMenus$.value),n=e.indexOf(this.activeMenu$.value);e.splice(n,1),this.activeMenu$.next(null),this.allMenus$.next(e),this.commitChanges()}},{key:"addItem",value:function(e){var t=Object.assign({},this.activeMenu$.value);e=this.transformLocalLinksToRoutes(e),t.items.push(e),this.activeMenu$.next(t),this.commitChanges()}},{key:"removeItem",value:function(e){var t=Object.assign({},this.activeMenu$.value),n=this.activeMenu$.value.items.indexOf(e);t.items.splice(n,1),this.activeMenu$.next(t),this.commitChanges()}},{key:"transformLocalLinksToRoutes",value:function(e){var t=this.settings.getBaseUrl();return"link"!==e.type||-1===e.action.indexOf(t)||(e.type="route",e.action=e.action.replace(this.settings.getBaseUrl(),"")),e}},{key:"commitChanges",value:function(){var e=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",e),this.appearance.addChanges({menus:e})}},{key:"setFromJson",value:function(e){if(e){var t=JSON.parse(e);if(t){var n=t.map(function(e){var t=new Xe.a(e);return t.items=t.items.map(function(e){return new Ye(e)}),t});this.allMenus$.next(n)}}}}]),e}()).\u0275fac=function(e){return new(e||ze)(f.Zb(T.a),f.Zb(H))},ze.\u0275prov=f.Lb({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze),tt=o("ZfYz"),nt=o("sPnx"),it=((Ge=function(){function e(t){r(this,e),this.http=t}return c(e,[{key:"get",value:function(){return this.http.getWithCache("admin/appearance/menu-categories")}}]),e}()).\u0275fac=function(e){return new(e||Ge)(f.Zb(nt.a))},Ge.\u0275prov=f.Lb({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge),at=o("7EHt");function ot(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",17),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc().addRouteMenuItem(e)}),f.Jc(1),f.Ub()}if(2&e){var i=t.$implicit;f.Db(1),f.Lc("",i," ")}}function ct(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",17),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).addCustomMenuItem(e)}),f.Jc(1),f.Ub()}if(2&e){var i=t.$implicit;f.Db(1),f.Kc(i.label)}}function rt(e,t){if(1&e&&(f.Vb(0,"mat-expansion-panel",5),f.Vb(1,"mat-expansion-panel-header"),f.Vb(2,"mat-panel-title",6),f.Jc(3),f.Ub(),f.Ub(),f.Vb(4,"div",14),f.Hc(5,ct,2,1,"div",15),f.Ub(),f.Ub()),2&e){var n=t.$implicit;f.Db(3),f.Kc(n.name),f.Db(2),f.nc("ngForOf",n.items)}}var st,lt=((st=function(){function e(t,n,i,a,o){r(this,e),this.editor=t,this.appearance=n,this.overlayPanelRef=i,this.fb=a,this.itemCategories=o,this.linkForm=this.fb.group({action:[""],label:[""]})}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.itemCategories.get().subscribe(function(t){e.menuItemCategories=t.categories})}},{key:"addLinkMenuItem",value:function(){this.close({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})}},{key:"addRouteMenuItem",value:function(e){this.close({type:"route",label:e,action:e})}},{key:"addCustomMenuItem",value:function(e){this.close(e)}},{key:"close",value:function(e){this.overlayPanelRef.close(e)}}]),e}()).\u0275fac=function(e){return new(e||st)(f.Pb(et),f.Pb(H),f.Pb(tt.a),f.Pb(u.f),f.Pb(it))},st.\u0275cmp=f.Jb({type:st,selectors:[["select-menu-item-action"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"span",1),f.Jc(2,"Select Destination"),f.Ub(),f.Vb(3,"mat-icon",2),f.cc("click",function(){return t.close()}),f.Ub(),f.Ub(),f.Vb(4,"div",3),f.Vb(5,"mat-accordion"),f.Vb(6,"form",4),f.cc("ngSubmit",function(){return t.addLinkMenuItem()}),f.Vb(7,"mat-expansion-panel",5),f.Vb(8,"mat-expansion-panel-header"),f.Vb(9,"mat-panel-title",6),f.Jc(10,"Link"),f.Ub(),f.Ub(),f.Vb(11,"div",7),f.Vb(12,"div",8),f.Vb(13,"label",9),f.Jc(14,"URL"),f.Ub(),f.Qb(15,"input",10),f.Ub(),f.Vb(16,"div",8),f.Vb(17,"label",11),f.Jc(18,"Link Text"),f.Ub(),f.Qb(19,"input",12),f.Ub(),f.Ub(),f.Vb(20,"mat-action-row"),f.Vb(21,"button",13),f.Jc(22,"Select"),f.Ub(),f.Ub(),f.Ub(),f.Ub(),f.Vb(23,"mat-expansion-panel",5),f.Vb(24,"mat-expansion-panel-header"),f.Vb(25,"mat-panel-title",6),f.Jc(26,"Route"),f.Ub(),f.Ub(),f.Vb(27,"div",14),f.Hc(28,ot,2,1,"div",15),f.Ub(),f.Ub(),f.Hc(29,rt,6,2,"mat-expansion-panel",16),f.Ub(),f.Ub()),2&e&&(f.Db(6),f.nc("formGroup",t.linkForm),f.Db(22),f.nc("ngForOf",t.appearance.config.menus.availableRoutes),f.Db(1),f.nc("ngForOf",t.menuItemCategories))},directives:[E.a,j.a,at.a,u.t,u.k,at.c,at.e,at.f,u.c,u.s,u.i,u.A,at.d,L.b,l.n],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),st);function ut(e,t){if(1&e){var n=f.Wb();f.Vb(0,"button",2),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc().selectIcon(e)}),f.Qb(1,"mat-icon",3),f.Ub()}if(2&e){var i=t.$implicit;f.Db(1),f.nc("svgIcon",i)}}var bt,dt=((bt=function(){function e(t,n){r(this,e),this.http=t,this.overlayPanelRef=n,this.icons$=new O.a([]),this.loading$=new O.a(!1),this.iconSelected=new f.n}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.loading$.next(!0),this.http.get("admin/icons").pipe(Object(_.a)(function(){return e.loading$.next(!1)})).subscribe(function(t){e.icons$.next(t.icons)})}},{key:"selectIcon",value:function(e){this.iconSelected.observers.length?this.iconSelected.next(e):(this.overlayPanelRef.emitValue(e),this.overlayPanelRef.close())}}]),e}()).\u0275fac=function(e){return new(e||bt)(f.Pb(nt.a),f.Pb(tt.a))},bt.\u0275cmp=f.Jb({type:bt,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(f.Hc(0,ut,2,1,"button",0),f.hc(1,"async"),f.Qb(2,"loading-indicator",1),f.hc(3,"async")),2&e&&(f.nc("ngForOf",f.ic(1,2,t.icons$)),f.Db(2),f.nc("isVisible",f.ic(3,4,t.loading$)))},directives:[l.n,Se.a,L.b,j.a],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),bt);function pt(e,t){if(1&e){var n=f.Wb();f.Vb(0,"mat-expansion-panel",5),f.cc("opened",function(){f.yc(n);var e=t.$implicit;return f.gc(2).toggleMenuItem(e)})("closed",function(){f.yc(n);var e=t.$implicit;return f.gc(2).toggleMenuItem(e)}),f.Vb(1,"mat-expansion-panel-header"),f.Vb(2,"mat-panel-title"),f.Qb(3,"mat-icon",6),f.Vb(4,"span",7),f.Jc(5),f.Ub(),f.Ub(),f.Ub(),f.Vb(6,"div",8),f.Vb(7,"div",9),f.Vb(8,"label",10),f.Jc(9,"Label"),f.Ub(),f.Vb(10,"input",11),f.cc("ngModelChange",function(e){return t.$implicit.label=e})("ngModelChange",function(){return f.yc(n),f.gc(2).menus.commitChanges()}),f.Ub(),f.Ub(),f.Vb(11,"div",9),f.Vb(12,"label",10),f.Jc(13,"Type"),f.Ub(),f.Vb(14,"select",12),f.cc("ngModelChange",function(e){return t.$implicit.type=e})("ngModelChange",function(){return f.yc(n),f.gc(2).menus.commitChanges()}),f.Vb(15,"option",13),f.Jc(16,"Link"),f.Ub(),f.Vb(17,"option",14),f.Jc(18,"Route"),f.Ub(),f.Vb(19,"option",15),f.Jc(20,"Page"),f.Ub(),f.Ub(),f.Ub(),f.Vb(21,"div",9),f.Vb(22,"label",10),f.Jc(23,"Action"),f.Ub(),f.Vb(24,"input",11),f.cc("ngModelChange",function(e){return t.$implicit.action=e})("ngModelChange",function(){return f.yc(n),f.gc(2).menus.commitChanges()}),f.Ub(),f.Ub(),f.Vb(25,"div",9),f.Vb(26,"label",10),f.Jc(27,"Condition"),f.Ub(),f.Vb(28,"select",12),f.cc("ngModelChange",function(e){return t.$implicit.condition=e})("ngModelChange",function(){return f.yc(n),f.gc(2).menus.commitChanges()}),f.Vb(29,"option",16),f.Jc(30,"None"),f.Ub(),f.Vb(31,"option",17),f.Jc(32,"Show to Logged in Users Only"),f.Ub(),f.Vb(33,"option",18),f.Jc(34,"Show to Guest Users Only"),f.Ub(),f.Vb(35,"option",19),f.Jc(36,"Show to Admin Only"),f.Ub(),f.Ub(),f.Ub(),f.Vb(37,"div",9),f.Vb(38,"label",10),f.Jc(39,"Open link in"),f.Ub(),f.Vb(40,"select",12),f.cc("ngModelChange",function(e){return t.$implicit.target=e})("ngModelChange",function(){return f.yc(n),f.gc(2).menus.commitChanges()}),f.Vb(41,"option",20),f.Jc(42,"Same Window"),f.Ub(),f.Vb(43,"option",21),f.Jc(44,"New Window"),f.Ub(),f.Ub(),f.Ub(),f.Vb(45,"div",22,23),f.cc("click",function(){f.yc(n);var e=t.$implicit,i=f.vc(46);return f.gc(2).openIconSelector(i,e)}),f.Vb(47,"label",10),f.Jc(48,"Icon"),f.Ub(),f.Vb(49,"input",24),f.cc("ngModelChange",function(e){return t.$implicit.icon=e}),f.Ub(),f.Qb(50,"mat-icon",25),f.Ub(),f.Ub(),f.Vb(51,"mat-action-row"),f.Vb(52,"button",26),f.cc("click",function(){return f.yc(n),f.gc(2).confirmMenuItemDeletion()}),f.Jc(53,"Remove"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=t.$implicit;f.Eb("data-id",i.id),f.Db(5),f.Kc(i.label),f.Db(3),f.oc("for",i.id+"-label"),f.Db(2),f.oc("id",i.id+"-label"),f.nc("ngModel",i.label),f.Db(2),f.oc("for",i.id+"-type"),f.Db(2),f.oc("id",i.id+"-type"),f.nc("ngModel",i.type),f.Db(8),f.oc("for",i.id+"-action"),f.Db(2),f.oc("id",i.id+"-action"),f.nc("ngModel",i.action),f.Db(2),f.oc("for",i.id+"-condition"),f.Db(2),f.oc("id",i.id+"-condition"),f.nc("ngModel",i.condition),f.Db(1),f.nc("ngValue",null),f.Db(9),f.oc("for",i.id+"-target"),f.Db(2),f.oc("id",i.id+"-target"),f.nc("ngModel",i.target),f.Db(7),f.oc("for",i.id+"-icon"),f.Db(2),f.oc("id",i.id+"-icon"),f.nc("ngModel",i.icon),f.Db(1),f.nc("svgIcon",i.icon)}}function ht(e,t){if(1&e){var n=f.Wb();f.Vb(0,"mat-accordion",3),f.cc("cdkDropListDropped",function(e){return f.yc(n),f.gc().reorderMenuItems(e)}),f.Hc(1,pt,54,22,"mat-expansion-panel",4),f.Ub()}if(2&e){var i=t.ngIf;f.Db(1),f.nc("ngForOf",i.items)}}function ft(e,t){1&e&&(f.Vb(0,"div",27),f.Jc(1,"This menu has no items yet."),f.Ub())}var gt,mt=((gt=function(){function e(t,n,i,a){r(this,e),this.menus=t,this.modal=n,this.overlayPanel=i,this.cd=a,this.subscriptions=[]}return c(e,[{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){e&&e.unsubscribe()})}},{key:"reorderMenuItems",value:function(e){this.menus.reorderActiveMenuItems(e.previousIndex,e.currentIndex)}},{key:"toggleMenuItem",value:function(e){this.selectedMenuItem=this.selectedMenuItem===e?null:e}},{key:"confirmMenuItemDeletion",value:function(){var e=this;this.modal.show($e.a,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe(function(t){t&&(e.menus.removeItem(e.selectedMenuItem),e.selectedMenuItem=null)})}},{key:"openIconSelector",value:function(e,t){var n=this;this.overlayPanel.open(dt,{position:Be.a,origin:new f.l(e)}).valueChanged().subscribe(function(e){t.icon=e,n.menus.commitChanges(),n.cd.detectChanges()})}}]),e}()).\u0275fac=function(e){return new(e||gt)(f.Pb(et),f.Pb(_e.a),f.Pb(Te.a),f.Pb(f.h))},gt.\u0275cmp=f.Jb({type:gt,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_self","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(e,t){if(1&e&&(f.Vb(0,"div",0),f.Jc(1,"Menu Items"),f.Ub(),f.Hc(2,ht,2,1,"mat-accordion",1),f.hc(3,"async"),f.Hc(4,ft,2,0,"ng-template",null,2,f.Ic)),2&e){var n=f.vc(5);f.Db(2),f.nc("ngIf",f.ic(3,2,t.menus.activeMenu$))("ngIfElse",n)}},directives:[E.a,l.o,at.a,Ze.d,l.n,at.c,Ze.a,at.e,at.f,j.a,Ze.b,u.c,u.s,u.v,u.B,u.w,u.E,at.d,L.b],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),gt);function vt(e,t){if(1&e&&(f.Vb(0,"option",15),f.Jc(1),f.Ub()),2&e){var n=t.$implicit,i=f.gc(2);f.nc("ngValue",n),f.Db(1),f.Kc(i.getDisplayName(n))}}function yt(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",4),f.Vb(1,"div",5),f.Vb(2,"div",6),f.Vb(3,"label",7),f.Jc(4,"Menu Name"),f.Ub(),f.Vb(5,"input",8),f.cc("ngModelChange",function(e){return t.ngIf.name=e})("ngModelChange",function(){return f.yc(n),f.gc().menus.commitChanges()}),f.Ub(),f.Ub(),f.Vb(6,"div",6),f.Vb(7,"label",9),f.Jc(8,"Menu Position"),f.Ub(),f.Vb(9,"select",10),f.cc("ngModelChange",function(e){return t.ngIf.position=e})("ngModelChange",function(){return f.yc(n),f.gc().menus.commitChanges()}),f.Hc(10,vt,2,2,"option",11),f.Ub(),f.Ub(),f.Ub(),f.Qb(11,"menu-items"),f.Vb(12,"div",12),f.Vb(13,"button",13),f.cc("click",function(){return f.yc(n),f.gc().confirmMenuDeletion()}),f.Jc(14,"Delete Menu"),f.Ub(),f.Vb(15,"button",14),f.cc("click",function(){return f.yc(n),f.gc().openAddItemPanel()}),f.Jc(16,"Add Item"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=t.ngIf,a=f.gc();f.Db(5),f.nc("ngModel",i.name),f.Db(4),f.nc("ngModel",i.position),f.Db(1),f.nc("ngForOf",a.appearance.config.menus.positions)}}function kt(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",19),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(2).setActiveMenu(e)}),f.Vb(1,"span",20),f.Jc(2),f.Ub(),f.Qb(3,"mat-icon",21),f.Ub()}if(2&e){var i=t.$implicit;f.Db(2),f.Kc(i.name)}}function Vt(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",16),f.Hc(1,kt,4,1,"div",17),f.hc(2,"async"),f.Vb(3,"div",12),f.Vb(4,"button",18),f.cc("click",function(){return f.yc(n),f.gc().menus.create()}),f.Jc(5,"Add a Menu"),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=f.gc();f.Db(1),f.nc("ngForOf",f.ic(2,1,i.menus.allMenus$))}}var Ct,xt=function(e){return["Menus",e]},Pt=((Ct=function(){function e(t,n,i,a,o,c){r(this,e),this.appearance=t,this.menus=n,this.modal=i,this.settings=a,this.panel=o,this.el=c,this.menus.setFromJson(this.settings.get("menus"))}return c(e,[{key:"openAddItemPanel",value:function(){var e=this,t=Be.a.slice();t[0].offsetX=10,t[1].offsetX=10,this.panel.open(lt,{position:t,origin:this.el,panelClass:"add-menu-item-panel-container"}).afterClosed().subscribe(function(t){t&&e.menus.addItem(new Ye(t))})}},{key:"openPreviousPanel",value:function(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}},{key:"setActiveMenu",value:function(e){this.menus.activeMenu$.next(e)}},{key:"confirmMenuDeletion",value:function(){var e=this;this.modal.show($e.a,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe(function(t){t&&e.menus.deleteActive()})}},{key:"getDisplayName",value:function(e){return e.replace(/-/g," ")}}]),e}()).\u0275fac=function(e){return new(e||Ct)(f.Pb(H),f.Pb(et),f.Pb(_e.a),f.Pb(T.a),f.Pb(Te.a),f.Pb(f.l))},Ct.\u0275cmp=f.Jb({type:Ct,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.openPreviousPanel()}),f.Ub(),f.Vb(1,"div",1),f.Hc(2,yt,17,3,"div",2),f.hc(3,"async"),f.Hc(4,Vt,6,3,"ng-template",null,3,f.Ic),f.Ub()),2&e){var n=f.vc(5);f.nc("path",f.rc(5,xt,t.menus.activeMenu$.value&&t.menus.activeMenu$.value.name)),f.Db(2),f.nc("ngIf",f.ic(3,3,t.menus.activeMenu$))("ngIfElse",n)}},directives:[K,l.o,E.a,u.c,u.s,u.v,u.B,l.n,mt,L.b,u.w,u.E,j.a],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),Ct);function Ut(e,t){if(1&e&&(f.Tb(0),f.Vb(1,"div",3),f.Vb(2,"label",4),f.Jc(3),f.Ub(),f.Qb(4,"textarea",5),f.Ub(),f.Sb()),2&e){var n=t.$implicit;f.Db(2),f.nc("for",n.key),f.Db(1),f.Kc(n.name),f.Db(1),f.nc("id",n.key)("formControlName",n.key)("placeholder",n.defaultValue)}}var wt,Mt=function(){return["Seo Settings"]},Ot=((wt=function(){function e(t,n){r(this,e),this.editor=t,this.fb=n,this.form=this.fb.group({})}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach(function(t){e.form.addControl(t.key,e.fb.control(t.value))}),this.form.valueChanges.subscribe(function(t){e.editor.addChanges(t)})}}]),e}()).\u0275fac=function(e){return new(e||wt)(f.Pb(H),f.Pb(u.f))},wt.\u0275cmp=f.Jb({type:wt,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(e,t){1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.editor.closeActivePanel()}),f.Ub(),f.Vb(1,"div",1),f.Hc(2,Ut,5,5,"ng-container",2),f.Ub()),2&e&&(f.nc("path",f.qc(3,Mt)),f.Db(1),f.nc("formGroup",t.form),f.Db(1),f.nc("ngForOf",t.seoFields))},directives:[K,u.t,u.k,l.n,E.a,u.c,u.s,u.i],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),wt),It=o("FtGj"),Dt=o("5o4b"),$t=["editor"];function _t(e,t){1&e&&(f.Vb(0,"p",11),f.Jc(1,"If entering javascript, wrap it with <script><\/script> tag."),f.Ub())}var St,Jt,Ft=((St=function(){function e(t,n,i){r(this,e),this.dialogRef=t,this.data=n,this.lazyLoader=i,this.loading$=new O.a(!1),this.syntaxInvalid$=new O.a(!1)}return c(e,[{key:"ngOnInit",value:function(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}},{key:"confirm",value:function(){this.close(this.editor.getValue())}},{key:"close",value:function(e){this.dialogRef.close(e)}},{key:"initEditor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html";this.loading$.next(!0),this.lazyLoader.loadAsset("js/ace/ace.js",{type:"js"}).then(function(){t.editor=ace.edit(t.editorEl.nativeElement),t.editor.getSession().setMode("ace/mode/"+n),t.editor.setTheme("ace/theme/chrome"),t.editor.$blockScrolling=1/0,e&&t.editor.setValue(e,1),t.editor.getSession().on("changeAnnotation",function(){var e=t.editor.getSession().getAnnotations();if(e[0]&&/doctype first/.test(e[0].text))return e.splice(0,1),void t.editor.getSession().setAnnotations(e);var n=t.editor.getSession().getAnnotations().filter(function(e){return"error"===e.type}).length>0;t.syntaxInvalid$.next(n)}),t.loading$.next(!1)})}},{key:"overrideDialogCloseEvents",value:function(){var e=this;this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe(function(){e.close()}),this.dialogRef.keydownEvents().pipe(Object($.a)(function(e){return e.keyCode===It.g})).subscribe(function(){return e.close()})}}]),e}()).\u0275fac=function(e){return new(e||St)(f.Pb(ye.g),f.Pb(ye.a),f.Pb(Dt.a))},St.\u0275cmp=f.Jb({type:St,selectors:[["code-editor-modal"]],viewQuery:function(e,t){var n;1&e&&f.Pc($t,3),2&e&&f.uc(n=f.dc())&&(t.editorEl=n.first)},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Vb(1,"h2",1),f.Jc(2,"Code Editor"),f.Ub(),f.Vb(3,"button",2),f.cc("click",function(){return t.close()}),f.Qb(4,"mat-icon",3),f.Ub(),f.Ub(),f.Vb(5,"mat-dialog-content"),f.Vb(6,"div",4),f.Hc(7,_t,2,0,"p",5),f.Qb(8,"div",6,7),f.Ub(),f.Ub(),f.Vb(10,"mat-dialog-actions"),f.Vb(11,"button",8),f.cc("click",function(){return t.close()}),f.Jc(12,"Cancel"),f.Ub(),f.Vb(13,"button",9),f.cc("click",function(){return t.confirm()}),f.hc(14,"async"),f.Jc(15,"Update"),f.Ub(),f.Ub(),f.Qb(16,"loading-indicator",10),f.hc(17,"async")),2&e&&(f.Db(7),f.nc("ngIf","html"===t.data.language),f.Db(6),f.nc("disabled",f.ic(14,3,t.syntaxInvalid$)),f.Db(3),f.nc("isVisible",f.ic(17,5,t.loading$)))},directives:[ye.h,E.a,j.a,ye.e,l.o,ye.c,L.b,Se.a],pipes:[l.b],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),St),Tt=function(){return["Custom Code"]},Qt=((Jt=function(){function t(e,n,i,a){r(this,t),this.editor=e,this.fb=n,this.modal=i,this.toast=a,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}return c(t,[{key:"ngOnInit",value:function(){var e=this,t={};Object.keys(this.form.controls).forEach(function(n){t[n]=e.editor.currentValue(n)}),this.form.patchValue(t)}},{key:"openModal",value:function(t){var n=this,i="custom-code."+t,a=this.form.value[i]||"";this.modal.open(Ft,{contents:this.form.value[i],language:t}).afterClosed().subscribe(function(o){if(void 0!==o&&a!==o){var c=e({},i,o);n.form.patchValue(c),n.editor.saveChanges(c).subscribe(function(){n.addCodeToPreview(t,o),n.toast.open("Custom code saved")})}})}},{key:"addCodeToPreview",value:function(e,t){this.editor.postMessage("css"===e?new U(t):new w(t))}}]),t}()).\u0275fac=function(e){return new(e||Jt)(f.Pb(H),f.Pb(u.f),f.Pb(_e.a),f.Pb(A.b))},Jt.\u0275cmp=f.Jb({type:Jt,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(e,t){1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.editor.closeActivePanel()}),f.Ub(),f.Vb(1,"div",1),f.Vb(2,"button",2),f.cc("click",function(){return t.openModal("css")}),f.Vb(3,"span",3),f.Jc(4,"Custom CSS"),f.Ub(),f.Vb(5,"span",4),f.Jc(6,"Modify"),f.Ub(),f.Ub(),f.Vb(7,"button",5),f.cc("click",function(){return t.openModal("html")}),f.Vb(8,"span",3),f.Jc(9,"Custom HTML & Javascript"),f.Ub(),f.Vb(10,"span",4),f.Jc(11,"Modify"),f.Ub(),f.Ub(),f.Ub()),2&e&&f.nc("path",f.qc(1,Tt))},directives:[K,E.a],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),Jt),At=["iframe"];function Ht(e,t){1&e&&(f.Vb(0,"span",16),f.Jc(1,"Save"),f.Ub())}function Nt(e,t){1&e&&(f.Vb(0,"span",16),f.Jc(1,"Saved"),f.Ub())}function jt(e,t){1&e&&f.Qb(0,"general-appearance-panel")}function Et(e,t){1&e&&f.Qb(0,"themes-appearance-panel")}function Lt(e,t){1&e&&f.Qb(0,"menus-appearance-panel")}function Rt(e,t){1&e&&f.Qb(0,"seo-appearance-panel")}function qt(e,t){1&e&&f.Qb(0,"custom-code-appearance-panel")}function Wt(e,t){}function zt(e,t){1&e&&f.Hc(0,Wt,0,0,"ng-template",21),2&e&&f.nc("cdkPortalOutlet",t.ngIf)}function Gt(e,t){if(1&e&&(f.Tb(0),f.Hc(1,zt,1,1,void 0,20),f.hc(2,"async"),f.Sb()),2&e){var n=f.gc(2);f.Db(1),f.nc("ngIf",f.ic(2,1,n.panelPortal$))}}function Kt(e,t){if(1&e&&(f.Tb(0),f.Tb(1,17),f.Hc(2,jt,1,0,"general-appearance-panel",18),f.Hc(3,Et,1,0,"themes-appearance-panel",18),f.Hc(4,Lt,1,0,"menus-appearance-panel",18),f.Hc(5,Rt,1,0,"seo-appearance-panel",18),f.Hc(6,qt,1,0,"custom-code-appearance-panel",18),f.Hc(7,Gt,3,3,"ng-container",19),f.Sb(),f.Sb()),2&e){var n=t.ngIf;f.Db(1),f.nc("ngSwitch",n.name),f.Db(1),f.nc("ngSwitchCase","general"),f.Db(1),f.nc("ngSwitchCase","themes"),f.Db(1),f.nc("ngSwitchCase","menus"),f.Db(1),f.nc("ngSwitchCase","seo-settings"),f.Db(1),f.nc("ngSwitchCase","custom-code")}}var Bt=function(){return[]},Zt=function(e){return{panel:e}};function Xt(e,t){if(1&e&&(f.Vb(0,"a",24),f.Vb(1,"span",25),f.Jc(2),f.Ub(),f.Qb(3,"mat-icon",26),f.Ub()),2&e){var n=t.$implicit,i=f.gc(2);f.nc("routerLink",f.qc(3,Bt))("queryParams",f.rc(4,Zt,i.slugify(n.name))),f.Db(2),f.Kc(i.viewName(n.name))}}function Yt(e,t){if(1&e&&(f.Vb(0,"div",22),f.Hc(1,Xt,4,6,"a",23),f.Ub()),2&e){var n=f.gc();f.Db(1),f.nc("ngForOf",n.editor.config.sections)}}var en,tn,nn,an,on,cn,rn,sn=((tn=function(){function e(t,n,i,a,o){r(this,e),this.editor=t,this.router=n,this.route=i,this.breakpoints=a,this.config=o,this.panelPortal$=this.editor.activePanel$.pipe(Object(h.a)(function(e){return e&&e.component?new p.d(e.component):null}))}return c(e,[{key:"ngOnInit",value:function(){var e=this;this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings,this.config),this.routerSub=this.route.queryParams.subscribe(function(t){e.editor.openPanel(t.panel)})}},{key:"ngOnDestroy",value:function(){this.routerSub&&this.routerSub.unsubscribe()}},{key:"closeEditor",value:function(){this.router.navigate(["admin"])}},{key:"slugify",value:function(e){return Object(d.a)(e)}},{key:"viewName",value:function(e){return e.replace("-"," ")}}]),e}()).\u0275fac=function(e){return new(e||tn)(f.Pb(H),f.Pb(b.e),f.Pb(b.a),f.Pb(N.a),f.Pb(g,8))},tn.\u0275cmp=f.Jb({type:tn,selectors:[["appearance"]],viewQuery:function(e,t){var n;1&e&&(f.Pc(At,3),f.Pc(v.a,3)),2&e&&(f.uc(n=f.dc())&&(t.iframe=n.first),f.uc(n=f.dc())&&(t.sidenav=n.first))},decls:24,vars:13,consts:[[1,"no-navbar"],[1,"sidebar"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(f.Vb(0,"sidenav",0),f.Vb(1,"nav",1),f.Vb(2,"div",2),f.Vb(3,"div",3),f.cc("click",function(){return t.closeEditor()}),f.Qb(4,"mat-icon",4),f.Ub(),f.Vb(5,"div",5),f.Jc(6,"Appearance Editor"),f.Ub(),f.Vb(7,"button",6),f.cc("click",function(){return t.editor.saveChanges()}),f.hc(8,"async"),f.hc(9,"async"),f.Hc(10,Ht,2,0,"span",7),f.hc(11,"async"),f.Hc(12,Nt,2,0,"ng-template",null,8,f.Ic),f.Ub(),f.Ub(),f.Hc(14,Kt,8,6,"ng-container",9),f.hc(15,"async"),f.Hc(16,Yt,2,1,"ng-template",null,10,f.Ic),f.Ub(),f.Vb(18,"main"),f.Vb(19,"div",11),f.Qb(20,"iframe",12,13),f.Ub(),f.Ub(),f.Ub(),f.Vb(22,"button",14),f.cc("click",function(){return t.sidenav.toggleSidebarMode()}),f.Qb(23,"mat-icon",15),f.Ub()),2&e){var n=f.vc(13),i=f.vc(17);f.Db(7),f.nc("disabled",!f.ic(8,5,t.editor.changes$)||f.ic(9,7,t.editor.loading$)),f.Db(3),f.nc("ngIf",f.ic(11,9,t.editor.changes$))("ngIfElse",n),f.Db(4),f.nc("ngIf",f.ic(15,11,t.editor.activePanel$))("ngIfElse",i)}},directives:[v.a,j.a,E.a,L.b,l.o,l.q,l.r,l.s,ve,Ke,Pt,Ot,Qt,p.c,l.n,b.h],pipes:[l.b],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:4}sidenav[_ngcontent-%COMP%]{--nav-width:330px}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:0}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width:768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),tn),ln=((en=function(){function e(t,n){r(this,e),this.editor=t,this.modal=n}return c(e,[{key:"canDeactivate",value:function(){return!this.editor.changes$.value||this.modal.show($e.a,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}]),e}()).\u0275fac=function(e){return new(e||en)(f.Zb(H),f.Zb(_e.a))},en.\u0275prov=f.Lb({token:en,factory:en.\u0275fac,providedIn:"root"}),en),un=o("0QyJ"),bn=o("JIr8"),dn=o("5+tZ"),pn=o("EY2u"),hn=o("LRne"),fn=[{path:"",component:sn,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(nn=function(){function e(t,n){r(this,e),this.router=t,this.http=n}return c(e,[{key:"resolve",value:function(e,t){var n=this;return this.http.get("admin/appearance/values").pipe(Object(bn.a)(function(){return n.router.navigate(["/admin"]),pn.a}),Object(dn.a)(function(e){return e?Object(hn.a)(e):(n.router.navigate(["/admin"]),pn.a)}))}}]),e}(),nn.\u0275fac=function(e){return new(e||nn)(f.Zb(b.e),f.Zb(Q.a))},nn.\u0275prov=f.Lb({token:nn,factory:nn.\u0275fac,providedIn:"root"}),nn)},canActivate:[un.a],canDeactivate:[ln],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}],gn=((an=function e(){r(this,e)}).\u0275fac=function(e){return new(e||an)},an.\u0275mod=f.Nb({type:an}),an.\u0275inj=f.Mb({imports:[[b.i.forChild(fn)],b.i]}),an),mn=o("X3pI"),vn=((on=function e(){r(this,e)}).\u0275fac=function(e){return new(e||on)},on.\u0275mod=f.Nb({type:on}),on.\u0275inj=f.Mb({imports:[[l.c,mn.a,L.c,j.b]]}),on),yn=o("6rvT"),kn=o("MKyN"),Vn=((cn=function e(){r(this,e)}).\u0275fac=function(e){return new(e||cn)},cn.\u0275mod=f.Nb({type:cn}),cn.\u0275inj=f.Mb({imports:[[l.c,yn.a,j.b,Qe.r]]}),cn),Cn=o("CahO"),xn=((rn=function e(){r(this,e)}).\u0275fac=function(e){return new(e||rn)},rn.\u0275mod=f.Nb({type:rn}),rn.\u0275inj=f.Mb({providers:[{provide:g,useValue:m,multi:!0}],imports:[[gn,l.c,u.m,u.z,vn,yn.a,kn.a,mn.a,Vn,Cn.a,ne.b,ae.b,j.b,L.c,ye.f,at.b,Ze.f,p.h,Ve.b]]}),rn);o("8LU1"),o("R1ws"),o("nLfN"),o("quSY"),o("u47x"),o("cH1L");var Pn,Un=((Pn=function e(){r(this,e)}).\u0275fac=function(e){return new(e||Pn)},Pn.\u0275mod=f.Nb({type:Pn}),Pn.\u0275inj=f.Mb({imports:[[l.c,Qe.j],Qe.j]}),Pn),wn=o("/1cH"),Mn=o("Kj3r"),On=o("/uUt"),In=o("eIep"),Dn=o("hLX6"),$n=o("dtOA"),_n=o("zW5C");function Sn(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",10),f.Vb(1,"div",11),f.Vb(2,"div",12),f.Jc(3),f.hc(4,"trans"),f.Ub(),f.Vb(5,"button",13),f.cc("click",function(){f.yc(n);var e=t.index;return f.gc(3).removeFeature("primary",e)}),f.Qb(6,"mat-icon",14),f.Ub(),f.Ub(),f.Vb(7,"div",15),f.Vb(8,"label",16),f.Jc(9,"Title"),f.Ub(),f.Qb(10,"input",17),f.Ub(),f.Vb(11,"div",15),f.Vb(12,"label",16),f.Jc(13,"Subtitle"),f.Ub(),f.Qb(14,"input",18),f.Ub(),f.Vb(15,"appearance-image-input",19),f.Jc(16," Image "),f.Ub(),f.Ub()}if(2&e){var i=t.$implicit,a=t.index,o=f.gc(3);f.nc("formGroup",i),f.Db(3),f.Mc("",f.ic(4,13,"Feature")," #",a+1,""),f.Db(5),f.nc("for","primary."+a+".title"),f.Db(2),f.pc("highlightInPreview",".inline-feature:nth-child(",a+1,") h3"),f.nc("id","primary."+a+".title")("placeholder",o.defaultValue("primaryFeatures."+a+".title")),f.Db(2),f.nc("for","primary."+a+".subtitle"),f.Db(2),f.pc("highlightInPreview",".inline-feature:nth-child(",a+1,") p"),f.nc("id","primary."+a+".subtitle")("placeholder",o.defaultValue("primaryFeatures."+a+".subtitle")),f.Db(1),f.pc("highlightInPreview",".inline-feature:nth-child(",a+1,") img"),f.nc("defaultValue",o.defaultValue("primaryFeatures."+a+".image"))}}function Jn(e,t){if(1&e){var n=f.Wb();f.Vb(0,"button",20),f.cc("click",function(){return f.yc(n),f.gc(3).addFeature("primary")}),f.Jc(1,"Add"),f.Ub()}}function Fn(e,t){if(1&e&&(f.Tb(0),f.Hc(1,Sn,17,15,"div",8),f.Hc(2,Jn,2,0,"button",9),f.Sb()),2&e){var n=f.gc(2);f.Db(1),f.nc("ngForOf",n.primaryArray().controls),f.Db(1),f.nc("ngIf",n.primaryArray().length<3)}}function Tn(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",10),f.Vb(1,"div",11),f.Vb(2,"div",12),f.Jc(3),f.hc(4,"trans"),f.Ub(),f.Vb(5,"button",13),f.cc("click",function(){f.yc(n);var e=t.index;return f.gc(3).removeFeature("secondary",e)}),f.Qb(6,"mat-icon",14),f.Ub(),f.Ub(),f.Vb(7,"div",15),f.Vb(8,"label",16),f.Jc(9,"Title"),f.Ub(),f.Qb(10,"input",17),f.Ub(),f.Vb(11,"div",15),f.Vb(12,"label",16),f.Jc(13,"Subtitle"),f.Ub(),f.Qb(14,"input",18),f.Ub(),f.Vb(15,"div",15),f.Vb(16,"label",16),f.Jc(17,"Description"),f.Ub(),f.Qb(18,"textarea",21),f.Ub(),f.Vb(19,"appearance-image-input",22),f.Jc(20,"Image "),f.Ub(),f.Ub()}if(2&e){var i=t.$implicit,a=t.index,o=f.gc(3);f.nc("formGroup",i),f.Db(3),f.Mc("",f.ic(4,17,"Feature")," #",a+1,""),f.Db(5),f.nc("for","secondary."+a+".title"),f.Db(2),f.pc("highlightInPreview",".big-feature:nth-child(",a+1,") h2"),f.nc("id","secondary."+a+".title")("placeholder",o.defaultValue("secondaryFeatures."+a+".title")),f.Db(2),f.nc("for","secondary."+a+".subtitle"),f.Db(2),f.pc("highlightInPreview",".big-feature:nth-child(",a+1,") small"),f.nc("id","secondary."+a+".subtitle")("placeholder",o.defaultValue("secondaryFeatures."+a+".subtitle")),f.Db(2),f.nc("for","secondary."+a+".description"),f.Db(2),f.pc("highlightInPreview",".big-feature:nth-child(",a+1,") p"),f.nc("id","secondary."+a+".description")("placeholder",o.defaultValue("secondaryFeatures."+a+".description")),f.Db(1),f.pc("highlightInPreview",".big-feature:nth-child(",a+1,") img"),f.nc("defaultValue",o.defaultValue("secondaryFeatures."+a+".image"))}}function Qn(e,t){if(1&e){var n=f.Wb();f.Tb(0),f.Hc(1,Tn,21,19,"div",8),f.Vb(2,"button",20),f.cc("click",function(){return f.yc(n),f.gc(2).addFeature("secondary")}),f.Jc(3,"Add"),f.Ub(),f.Sb()}if(2&e){var i=f.gc(2);f.Db(1),f.nc("ngForOf",i.secondaryArray().controls)}}function An(e,t){if(1&e&&(f.Vb(0,"div",23),f.Vb(1,"div",15),f.Vb(2,"label",24),f.Jc(3,"Input Text"),f.Ub(),f.Qb(4,"input",25),f.Ub(),f.Vb(5,"div",15),f.Vb(6,"label",26),f.Jc(7,"Input Button"),f.Ub(),f.Qb(8,"input",27),f.Ub(),f.Vb(9,"div",15),f.Vb(10,"label",28),f.Jc(11,"Call to Action #1"),f.Ub(),f.Qb(12,"input",29),f.Ub(),f.Vb(13,"div",15),f.Vb(14,"label",30),f.Jc(15,"Call to Action #2"),f.Ub(),f.Qb(16,"input",31),f.Ub(),f.Ub()),2&e){var n=f.gc(2);f.nc("formGroup",n.form.get("actions")),f.Db(4),f.nc("placeholder",n.defaultValue("actions.inputText")),f.Db(4),f.nc("placeholder",n.defaultValue("actions.inputButton")),f.Db(4),f.nc("placeholder",n.defaultValue("actions.cta1")),f.Db(4),f.nc("placeholder",n.defaultValue("actions.cta2"))}}function Hn(e,t){if(1&e&&(f.Vb(0,"mat-option",47),f.Jc(1),f.Ub()),2&e){var n=t.$implicit;f.nc("value",n),f.Db(1),f.Kc(n.name)}}var Nn=function(e){return["/admin/channels",e,"edit"]};function jn(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",48),f.Vb(1,"button",49),f.Qb(2,"mat-icon",50),f.Ub(),f.Vb(3,"div",51),f.Jc(4),f.Ub(),f.Vb(5,"div",52),f.Vb(6,"a",53),f.Qb(7,"mat-icon",54),f.Ub(),f.Vb(8,"button",55),f.cc("click",function(){f.yc(n);var e=t.$implicit;return f.gc(3).removeChannel(e)}),f.Qb(9,"mat-icon",56),f.Ub(),f.Ub(),f.Ub()}if(2&e){var i=t.$implicit;f.Db(4),f.Kc(i.name),f.Db(2),f.nc("routerLink",f.rc(2,Nn,i.id))}}function En(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",32),f.Vb(1,"div",33),f.Vb(2,"div",15),f.Vb(3,"label",34),f.Jc(4,"Manage Channels"),f.Ub(),f.Vb(5,"div",35),f.Qb(6,"input",36,37),f.Vb(8,"button",38),f.Qb(9,"mat-icon",39),f.Ub(),f.Ub(),f.Ub(),f.Vb(10,"mat-autocomplete",40,41),f.cc("optionSelected",function(e){return f.yc(n),f.gc(2).selectResult(e)}),f.Hc(12,Hn,2,2,"mat-option",42),f.hc(13,"async"),f.Ub(),f.Ub(),f.Vb(14,"a",43),f.Jc(15,"New Channel"),f.Ub(),f.Qb(16,"loading-indicator",44),f.hc(17,"async"),f.Vb(18,"div",45),f.cc("cdkDropListDropped",function(e){return f.yc(n),f.gc(2).reorderChannels(e)}),f.Hc(19,jn,10,4,"div",46),f.hc(20,"async"),f.Ub(),f.Ub()}if(2&e){var i=f.vc(11),a=f.gc(2);f.Db(6),f.nc("formControl",a.searchControl)("matAutocomplete",i),f.Db(4),f.nc("autoActiveFirstOption",!0)("displayWith",a.displayFn),f.Db(2),f.nc("ngForOf",f.ic(13,7,a.results$)),f.Db(4),f.nc("isVisible",f.ic(17,9,a.loading$)),f.Db(3),f.nc("ngForOf",f.ic(20,11,a.selectedChannels$))}}function Ln(e,t){if(1&e&&(f.Tb(0),f.Vb(1,"div",4),f.Hc(2,Fn,3,2,"ng-container",5),f.Hc(3,Qn,4,1,"ng-container",5),f.Hc(4,An,17,5,"div",6),f.Hc(5,En,21,13,"div",7),f.Ub(),f.Sb()),2&e){var n=t.ngIf;f.Db(1),f.nc("ngSwitch",n),f.Db(1),f.nc("ngSwitchCase","primaryFeatures"),f.Db(1),f.nc("ngSwitchCase","secondaryFeatures"),f.Db(1),f.nc("ngSwitchCase","actions"),f.Db(1),f.nc("ngSwitchCase","channels")}}function Rn(e,t){if(1&e){var n=f.Wb();f.Vb(0,"div",23),f.Vb(1,"div",15),f.Vb(2,"label",57),f.Jc(3,"Header Title"),f.Ub(),f.Qb(4,"input",58),f.Ub(),f.Vb(5,"div",15),f.Vb(6,"label",59),f.Jc(7,"Header Subtitle"),f.Ub(),f.Qb(8,"textarea",60),f.Ub(),f.Vb(9,"appearance-image-input",61),f.Jc(10,"Header Image "),f.Ub(),f.Vb(11,"color-picker-input",62),f.Jc(12,"Header Overlay Color 1"),f.Ub(),f.Vb(13,"color-picker-input",63),f.Jc(14,"Header Overlay Color 2"),f.Ub(),f.Qb(15,"div",64),f.Vb(16,"ul",65),f.Vb(17,"li",66),f.cc("click",function(){return f.yc(n),f.gc().openSubpanel("actions")}),f.Vb(18,"span",67),f.Jc(19,"Action Buttons"),f.Ub(),f.Qb(20,"mat-icon",68),f.Ub(),f.Vb(21,"li",66),f.cc("click",function(){return f.yc(n),f.gc().openSubpanel("primaryFeatures")}),f.Vb(22,"span",67),f.Jc(23,"Primary Features"),f.Ub(),f.Qb(24,"mat-icon",68),f.Ub(),f.Vb(25,"li",66),f.cc("click",function(){return f.yc(n),f.gc().openSubpanel("secondaryFeatures")}),f.Vb(26,"span",67),f.Jc(27,"Secondary Features"),f.Ub(),f.Qb(28,"mat-icon",68),f.Ub(),f.Vb(29,"li",66),f.cc("click",function(){return f.yc(n),f.gc().openSubpanel("channels")}),f.Vb(30,"span",67),f.Jc(31,"Channels"),f.Ub(),f.Qb(32,"mat-icon",68),f.Ub(),f.Ub(),f.Qb(33,"div",64),f.Vb(34,"div",15),f.Vb(35,"label",69),f.Jc(36,"Footer Title"),f.Ub(),f.Qb(37,"input",70),f.Ub(),f.Vb(38,"div",15),f.Vb(39,"label",71),f.Jc(40,"Footer Subtitle"),f.Ub(),f.Qb(41,"textarea",72),f.Ub(),f.Vb(42,"appearance-image-input",73),f.Jc(43,"Footer Image "),f.Ub(),f.Ub()}if(2&e){var i=f.gc();f.nc("formGroup",i.form),f.Db(4),f.nc("placeholder",i.defaultValue("headerTitle")),f.Db(4),f.nc("placeholder",i.defaultValue("headerSubtitle")),f.Db(1),f.nc("defaultValue",i.defaultValue("headerImage")),f.Db(28),f.nc("placeholder",i.defaultValue("footerTitle")),f.Db(4),f.nc("placeholder",i.defaultValue("footerSubtitle")),f.Db(1),f.nc("defaultValue",i.defaultValue("footerImage"))}}var qn,Wn,zn="homepage.appearance",Gn={defaultRoute:"/",navigationRoutes:["/","artist","album","track","playlist","genre","user","account","login","register"],menus:{availableRoutes:["admin/upload","upload","library/songs","library/albums","library/artists","library/history"],positions:["sidebar-primary","sidebar-secondary","mobile-bottom","landing-page-navbar","landing-page-footer","custom-page-navbar","admin-navbar"]},sections:[{name:"landing page",component:(qn=function(){function n(e,t,i,a){r(this,n),this.fb=e,this.editor=t,this.settings=i,this.channels=a,this.selectedSubpanel$=new O.a(null),this.path$=this.selectedSubpanel$.pipe(Object(h.a)(function(e){var t=["Homepage"];return e&&t.push(e),t})),this.form=this.fb.group({headerTitle:[""],headerSubtitle:[""],headerImage:[""],headerOverlayColor1:[""],headerOverlayColor2:[""],footerTitle:[""],footerSubtitle:[""],footerImage:[""],actions:this.fb.group({inputText:[""],inputButton:[""],cta1:[""],cta2:[""]}),primaryFeatures:this.fb.array([]),secondaryFeatures:this.fb.array([]),channelIds:this.fb.control([])}),this.searchControl=new u.g,this.results$=new O.a([]),this.loading$=new O.a(!1),this.selectedChannels$=new O.a([]),this.displayFn=function(e){return e?e.name:""}}return c(n,[{key:"ngOnInit",value:function(){var t=this;this.bindToSearchQueryControl();var n=this.settings.getJson(zn,{});this.loadChannels(n.channelIds),this.defaultValues=this.editor.defaultSettings[zn]?JSON.parse(this.editor.defaultSettings[zn]):{},(n.primaryFeatures||[]).forEach(function(){t.addFeature("primary")}),(n.secondaryFeatures||[]).forEach(function(){t.addFeature("secondary")}),this.form.patchValue(n),this.form.valueChanges.subscribe(function(n){t.editor.setConfig(zn,n),t.editor.addChanges(e({},zn,n))})}},{key:"openPreviousPanel",value:function(){this.selectedSubpanel$.value?this.openSubpanel(null):this.editor.closeActivePanel()}},{key:"openSubpanel",value:function(e){this.selectedSubpanel$.next(e)}},{key:"addFeature",value:function(e){var t=this.form.get("".concat(e,"Features")),n={title:[""],subtitle:[""],image:[""]};"secondary"===e&&(n.description=[""]),t.push(this.fb.group(n))}},{key:"removeFeature",value:function(e,t){this.form.get("".concat(e,"Features")).removeAt(t)}},{key:"defaultValue",value:function(e){return Dn.pick(e,this.defaultValues)||""}},{key:"primaryArray",value:function(){return this.form.get("primaryFeatures")}},{key:"secondaryArray",value:function(){return this.form.get("secondaryFeatures")}},{key:"loadChannels",value:function(e){var t=this;e&&e.length&&(this.loading$.next(!0),this.channels.all({channelIds:e}).pipe(Object(_.a)(function(){return t.loading$.next(!1)})).subscribe(function(n){var i,a;t.selectedChannels$.next((a=e,(i=n.pagination.data)?(i.sort(function(e,t){var n=t.id;return a.indexOf(e.id)>a.indexOf(n)?1:-1}),i):i))}))}},{key:"removeChannel",value:function(e){var t=this.selectedChannels$.value.filter(function(t){return t.id!==e.id});this.updateChannels(t)}},{key:"reorderChannels",value:function(e){var t=this.selectedChannels$.value.slice();Object(Ze.g)(t,e.previousIndex,e.currentIndex),this.updateChannels(t)}},{key:"selectResult",value:function(e){var n=e.option.value;this.selectedChannels$.value.find(function(e){return e.id===n.id})||(this.updateChannels([].concat(t(this.selectedChannels$.value),[n])),this.searchControl.reset())}},{key:"updateChannels",value:function(e){this.selectedChannels$.next(e),this.form.patchValue({channelIds:e.map(function(e){return e.id})})}},{key:"bindToSearchQueryControl",value:function(){var e=this;this.searchControl.valueChanges.pipe(Object(Mn.a)(200),Object(On.a)(),Object($.a)(function(e){return"string"==typeof e}),Object(In.a)(function(t){return e.searchForChannel(t)}),Object(bn.a)(function(){return Object(hn.a)([])})).subscribe(function(t){e.results$.next(t)})}},{key:"searchForChannel",value:function(e){return this.channels.all({query:e}).pipe(Object(h.a)(function(e){return e.pagination.data.filter(function(e){return"trackTable"!==e.config.layout&&"trackList"!==e.config.layout})}))}}]),n}(),qn.\u0275fac=function(e){return new(e||qn)(f.Pb(u.f),f.Pb(H),f.Pb(T.a),f.Pb($n.a))},qn.\u0275cmp=f.Jb({type:qn,selectors:[["homepage-appearance-panel"]],decls:7,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],[4,"ngIf","ngIfElse"],["mainPanel",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","many-inputs",3,"formGroup",4,"ngSwitchCase"],["class","channels-panel many-inputs",4,"ngSwitchCase"],["class","many-inputs feature-group",3,"formGroup",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent","trans","",3,"click",4,"ngIf"],[1,"many-inputs","feature-group",3,"formGroup"],[1,"feature-group-header"],[1,"text"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],[1,"input-container"],["trans","",3,"for"],["type","text","formControlName","title","required","",3,"id","placeholder","highlightInPreview"],["type","text","formControlName","subtitle","required","",3,"id","placeholder","highlightInPreview"],["formControlName","image","diskPrefix","homepage","trans","",3,"defaultValue","highlightInPreview"],["mat-flat-button","","color","accent","trans","",3,"click"],["type","text","formControlName","description","rows","4","required","",3,"id","placeholder","highlightInPreview"],["diskPrefix","homepage","formControlName","image","trans","",3,"defaultValue","highlightInPreview"],[1,"many-inputs",3,"formGroup"],["for","home.actions.inputText","trans",""],["type","text","id","home.actions.inputText","formControlName","inputText","highlightInPreview","new-link-form input","required","",3,"placeholder"],["for","home.actions.inputButton","trans",""],["type","text","id","home.actions.inputButton","formControlName","inputButton","highlightInPreview","new-link-form .mat-flat-button","required","",3,"placeholder"],["for","home.actions.cta1","trans",""],["type","text","id","home.actions.cta1","formControlName","cta1","highlightInPreview",".get-started-button","required","",3,"placeholder"],["for","home.actions.cta2","trans",""],["type","text","id","home.actions.cta2","formControlName","cta2","highlightInPreview",".learn-more-button","required","",3,"placeholder"],[1,"channels-panel","many-inputs"],[1,"slider-list-container"],["for","slider-list","trans",""],[1,"input-wrapper"],["id","slider-list","placeholder","Find channel...","trans-placeholder","",3,"formControl","matAutocomplete"],["inputEl",""],["type","submit","mat-icon-button","",1,"search-button"],["svgIcon","search"],[1,"search-list-autocomplete",3,"autoActiveFirstOption","displayWith","optionSelected"],["sliderAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent","routerLink","/admin/channels/new","target","_blank","trans",""],[1,"overlay",3,"isVisible"],["cdkDropList","",1,"lists",3,"cdkDropListDropped"],["class","channel-list-item","cdkDrag","",4,"ngFor","ngForOf"],[3,"value"],["cdkDrag","",1,"channel-list-item"],["mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],[1,"name"],[1,"actions"],["mat-icon-button","","target","_blank",3,"routerLink"],["svgIcon","edit"],["mat-icon-button","",3,"click"],["svgIcon","delete"],["for","home.header.title","trans",""],["type","text","id","home.header.title","formControlName","headerTitle","highlightInPreview",".header-title","required","",3,"placeholder"],["for","home.header.subtitle","trans",""],["type","text","id","home.header.subtitle","formControlName","headerSubtitle","rows","4","highlightInPreview",".header-description","required","",3,"placeholder"],["highlightInPreview",".hero","diskPrefix","homepage","formControlName","headerImage","trans","",3,"defaultValue"],["formControlName","headerOverlayColor1","trans",""],["formControlName","headerOverlayColor2","trans",""],[1,"separator"],[1,"unstyled-list"],[1,"nav-item",3,"click"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"],["for","home.footer.title","trans",""],["type","text","id","home.footer.title","formControlName","footerTitle","highlightInPreview",".footer-title","required","",3,"placeholder"],["for","home.footer.subtitle","trans",""],["type","text","id","home.footer.subtitle","formControlName","footerSubtitle","rows","4","highlightInPreview",".footer-description","required","",3,"placeholder"],["highlightInPreview",".bottom-cta","diskPrefix","homepage","formControlName","footerImage","trans","",3,"defaultValue"]],template:function(e,t){if(1&e&&(f.Vb(0,"appearance-panel-meta",0),f.cc("back",function(){return t.openPreviousPanel()}),f.hc(1,"async"),f.Ub(),f.Vb(2,"div",1),f.Hc(3,Ln,6,5,"ng-container",2),f.hc(4,"async"),f.Hc(5,Rn,44,7,"ng-template",null,3,f.Ic),f.Ub()),2&e){var n=f.vc(6);f.nc("path",f.ic(1,3,t.path$)),f.Db(3),f.nc("ngIf",f.ic(4,5,t.selectedSubpanel$))("ngIfElse",n)}},directives:[K,l.o,l.q,l.r,l.n,u.t,u.k,L.b,j.a,E.a,u.c,u.s,u.i,u.A,ge,fe,wn.c,u.h,wn.a,L.a,b.h,Se.a,Ze.d,Qe.l,Ze.a,Ze.b,He],pipes:[l.b,_n.a],styles:[".separator[_ngcontent-%COMP%]{height:1px;width:100%;background-color:var(--be-divider-default);margin:20px 0}.feature-group[_ngcontent-%COMP%]{padding-bottom:5px;margin-bottom:15px}.feature-group[_ngcontent-%COMP%], .feature-group-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.feature-group-header[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;padding-bottom:10px;margin-bottom:10px}.feature-group-header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-left:auto}.channels-panel[_ngcontent-%COMP%]{display:block}.channels-panel[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.channels-panel[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px}.channels-panel[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]{margin:15px 0}.channel-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-background);margin-bottom:10px}.channel-list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:auto;color:var(--be-secondary-text)}.channel-list-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;margin-right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto}"],changeDetection:0}),qn),position:1}]},Kn=((Wn=function e(){r(this,e)}).\u0275fac=function(e){return new(e||Wn)},Wn.\u0275mod=f.Nb({type:Wn}),Wn.\u0275inj=f.Mb({providers:[{provide:g,useValue:Gn,multi:!0}],imports:[[l.c,xn,u.z,Vn,mn.a,b.i,j.b,L.c,yn.a,Un,wn.b,Ze.f]]}),Wn)}}])}();
//# sourceMappingURL=11-es5.d2abc6aa9df5d2893602.js.map